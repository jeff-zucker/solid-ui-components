!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.solidUI=t():e.solidUI=t()}(self,(function(){return(()=>{var e={2:()=>{function e(e,t){const n=e.querySelectorAll("A");for(var o of n)o.classList.contains("skipMunge")||(o.addEventListener("click",(async e=>{e.preventDefault();let t=e.target.closest(".solid-uic-app");t=t.querySelector(".main");let n=e.target.href||e.target.parentElement.href;displayLink(null,{href:n,needsIframe:!0},t)})),t||(o.style="display:block;text-decoration:none;padding:0.5em; border-bottom:1px solid grey;"));return e}window.openModal=function(e,t){e.parentElement.children[1].style.display="block"},window.closeModal=function(e,t){e.parentElement.parentElement.style.display="none"},window.displayLink=async function(t,n,o){if("string"==typeof n&&(n={href:n}),n.href=n.href||n.link,n.type=n.type||"Link",n.type=n.type.replace(/http:\/\/www.w3.org\/ns\/ui#/,""),n.popout){let e=await solidUI.processComponent("",n.href);return e.style.display="block",document.body.appendChild(e),e}if("SolidOSLink"===n.type)return document.getElementById("suicTabulator").style.display="block",document.getElementById("mainMain").style.display="none",void window.outliner.GotoSubject(window.kb.sym(n.href),!0,void 0,!0);if("SolidOSPane"===n.type){const e=document.getElementById("suicTabulator");e.style.display="block",document.getElementById("mainMain").style.display="none";var l=panes.UI.rdf.sym(n.href),r=panes.byName(n.pane);return void outliner.GotoSubject(l,!0,r,!0,null,e)}let i;o&&!t&&(i=o);let a=t&&t.target?t.target.closest(".solid-uic-app"):null;a&&a.classList.contains("solid-main-app")?i=a.querySelector("#mainMain"):a&&(i=a.querySelector(".main")),document.getElementById("mainMain").style.display="block",document.getElementById("suicTabulator").style.display="none",i=i||document.body.querySelector(".main")||document.body,i&&(i.innerHTML="");let s=n.content;if(s){let t=document.createElement("SPAN");return t.innerHTML=s,t=e(t),i.innerHTML="",i.appendChild(t),await solidUI.initInternal(i)}if("SolidOSLink"!==n.type){if("Feed"===n.type||"Feed"===n.linkType){let t={type:"App",orientation:"vertical",menu:n},o=await solidUI.processComponent("","",t);return o=e(o,"noStyle"),i.innerHTML="",i.appendChild(o),i}if("TransformLink"===n.type){if(n.href&&n.format&&n.format.match(/markdown/))return async function(t,n){let o=await fetch(t.href);o=await o.text(),n.innerHTML="";let l=document.createElement("SPAN");return l.innerHTML="\n<style>\n  h1 {display:none;}\n//  a{text-decoration:none; padding-top:0.25em;display:inline-block;padding-left:1em;}\n  ul {list-style:none;padding-left:0;margin-top:0;}\n</style>"+marked.parse(o),l=e(l,"noStyle"),l}(n,i)}else{if("Link"!==n.type)return s=await window.solidUI.processComponent("",n),n.format||(s=e(s)),i.innerHTML="",i.appendChild(s),i;if(s)return i.innerHTML=s,await this.initInternal(i);if(n.script){let t=await Function('"use strict";return ('+n.script+")")();return t=e(t),t}if(n.href){let e=await async function(e,t,n){let o=e.href;const l=document.createElement("IFRAME");if(l.style="width:100%;height:90vh;border:none;margin:0;padding:0;",l.src="",n)l.src=o;else try{let e=await fetch(o);if(e){e=await e.text(),t.innerHTML="",o=o.replace(/^.*proxy\?uri=/,""),o=new URL(o);const n=`<base href="${o.origin}/"><base target="_BLANK">`;l.srcdoc=`<body>${n}${e}</body>`,l.scrollTo({top:0,behavior:"smooth"})}else console.log("Fetched but no content!")}catch(e){console.log("Couldn't fetch!",e)}return l}(n,i,n.nativeIframe);return i.appendChild(e),i}}}}},157:()=>{}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";n.d(o,{default:()=>I}),n(2);const e=panes.UI.rdf,t=panes.UI.store,l=e.fetcher(t),r=e.Namespace("http://www.w3.org/2000/01/rdf-schema#"),i=e.Namespace("http://www.w3.org/2002/07/owl#"),a=e.Namespace("http://xmlns.com/foaf/0.1/"),s=e.Namespace("http://www.w3.org/ns/solid/terms#"),d=e.Namespace("http://www.w3.org/ns/pim/space#"),c=e.Namespace("http://www.w3.org/ns/ldp#"),p=e.Namespace("http://www.w3.org/2006/vcard/ns#");function u(e,t,n){t=e.sym(t);let o=e.any(t,n);return o?o.value:""}function y(e,t,n){t=e.sym(t);let o=e.each(t,n),l=[];for(let e of o)l.push(e?e.value:"");return l}class h{async fetchAndParse(e,t){t=encodeURI(t),t=(e.proxy||"")+t;let n=await fetch(t),o=await n.text(),l=(new window.DOMParser).parseFromString(o,"text/xml"),r=l.querySelectorAll("item")||null;r=r.length<1?l.querySelectorAll("entry"):r;let i=[];return r.forEach((e=>{let t=e.querySelector("link").innerHTML;t||(t=e.querySelector("link").getAttribute("href")),t&&!t.match(/ /)||(t=e.querySelector("content").innerHTML.replace(/.*\[link\]/,"").replace(/a href="/,"").replace(/"&gt;.*/,"").replace(/.*&lt;/,"")),t.match(/^http/)||(t=t.replace(/.*\[CDATA\[/,"")),t=t.replace(/^http:/,"https:");let n=e.querySelector("title").innerHTML;n=n.replace(/^\<\!\[CDATA\[/,""),n=n.replace(/\]\].*\>/,"").trim(),i.push({title:n,link:t})})),i}async render(e,t){let n="",o=UI.icons.iconBase+"/noun_189137.svg";o=`<img src="${o}" style="width:1.2em;height:1.2em;display:inline-block; padding-left:0.4em;">`;for(let l of await this.fetchAndParse(e,t.href||t.link))"window"===t.displayTarget?n+=`\n          <li about="${l.link}" typeof="rss:item">\n            <a href="${l.link}" target="_BLANK" property="rss:title">\n              ${l.title}\n            </a>\n          </li>\n        `:n+=`\n          <li about="${l.link}" typeof="rss:item" style="display:none;background:green;border:1px solid grey;">\n            <a href="${l.link}" class="skipMunge" target="_BLANK" class="external">${o}</a>\n            <a href="${t.proxy+l.link}" property="rss:title">\n              ${l.title}\n            </a>\n          </li>\n        `;const l=document.createElement("DIV");l.property="xmlns:rss",l.content="http://purl.org/rss/1.0/",t.standAlone?(l.innerHTML=`\n        <div about="${t.href}" typeof="rss:channel">\n          <b property="rss:title">${t.label}</b>\n          <ul typeof="rss:items" style="display:table">\n            ${n}\n          </ul>\n        </div>\n    `,l.querySelector("B").style=`padding:1em;padding-right:0;background:${t.selBackground};color:${t.selColor};border:1px solid grey;width:100%;display:inline-block`,l.querySelector("UL").style=`padding:0;border:1px solid grey;border-top:none;list-style:none;margin-top:0;width:100%;height:${t.height};overflow-y:auto`):(l.innerHTML=`\n        <div about="${t.href}" typeof="rss:channel">\n          <div property="title" style="background:#d0d0d0;padding:1em;">${t.label}</div>\n          <ul typeof="rss:items" style="display:table">\n            ${n}\n          </ul>\n        </div>\n    `,l.querySelector("UL").style="padding:0;padding-left:0;list-style:none;margin-top:0;width:100%;");let r=l.querySelectorAll("A");for(let e of r)e.style="text-decoration:none;";let i=l.querySelectorAll("LI");for(let e of i)e.style="padding:1em;padding-bottom:0.75em;border-bottom:1px solid grey";return t.width&&(l.style.width=t.width),l}}class m{async render(e,t){const n=t.parts,o=e.createElement("DIV","accordion");if(!n||!n.length)return o;for(let l of n){let n=e.createElement("DIV"),r=e.createElement("DIV",""),i=e.createElement("SPAN","",l.label||l.topic);i.style.display="table-cell",i.style.width="100%",r.appendChild(i);let a=e.createElement("SPAN","caret-down","âŒ„");a.style.display="table-cell",a.textAlign="right",r.appendChild(a),r.style.backgroundColor=t.unselBackground,r.style.color=t.unselColor,r.style.padding="0.75em",r.style.border="1px solid grey",r.style.cursor="pointer";let s=e.createElement("DIV");if(l.content)s.innerHTML=l.content;else{console.log(t);for(let t=0;t<l.linkLabel.length;t++){let n=l.linkLabel[t],o=l.linkUrl[t],r=e.createElement("BUTTON","",n);r.setAttribute("data-link",o),r.style.width="100%",r.style.border="none",r.style.background="transparent",r.style.marginBottom="0.25em",r.style.cursor="pointer",r.onclick=e=>{showByClass(e)},s.appendChild(r)}}s.style.padding="0.75em",s.style.border="1px solid grey",s.style.borderTop="none",s.style.display="none",r.onclick=e=>{let t="block"===s.style.display,n=o.children;for(let e of n)e.children[1].style.display="none";s.style.display=t?"none":"block"},s.style.backgroundColor=t.background,s.style.color=t.color,n.appendChild(r),n.appendChild(s),n.style.marginBottom="1em",o.appendChild(n)}return e.simulateClick(o.querySelector("DIV DIV DIV")),await e.initInternal(o)}}class f{async render(e,n){(n=e.setDefaults(n)).fullPage&&(window.addEventListener("resize",(()=>{})),document.body.style.overflow="hidden"),n=function(e){let t=function(){let e=document.createElement("DIV");e.style="height:1rem",document.body.appendChild(e);let t=e.clientHeight;return document.body.removeChild(e),t}();return e.menuHeight=2*t,e.headerHeight=6*t,e.mainHeight=window.innerHeight-e.headerHeight,window.SolidAppContext={scroll:e.headerHeight},e.headerHeight=e.headerHeight.toString()+"px",e.mainHeight=e.mainHeight.toString()+"px",e}(n),n.logo||="",n.title||="",n.headerHeight=n.logo||n.title||n.adminMenu?n.headerHeight:"0",n.leftMenu="",n.siteMenu="","horizontal"===n.orientation?n.leftMenuStyle="display:none":n.leftMenuStyle=`\n        display:block;\n        width:36vw !important;\n        height:${n.mainHeight};\n        overflow-y:scroll;\n        margin:0;\n        padding:0;\n      `;let o=await this.getHTML(n),h=e.createElement("SPAN","",o),m=h.querySelector("#solidLogo");m&&(m.src="https://solidproject.org/assets/img/solid-emblem.svg");let f=h.querySelector("#currentPodMenu");"vertical"===n.orientation&&(f=h.querySelector("NAV"));const g=await e.processComponent(f,n.currentPodMenu);if(f.appendChild(g),h.querySelector(".main"),n.userMenu){const t=await e.processComponent(f,n.userMenu);h.querySelector("#userMenu").appendChild(t)}return n.initialContent,n.loginBox&&await async function(e){const t=e.querySelector("#loginArea"),n=panes.UI;async function o(){await async function(){n.authn.currentUser()||await n.authn.checkUser()}(),t.innerHTML="",t.appendChild(n.authn.loginStatusBox(document,null,{}));let e=t.querySelectorAll("input");for(let t of e)t.style="\n          border:none;\n          background:transparent;\n          font-size:1rem;\n          position: absolute;\n          top:3.5rem;\n          right:7.2rem;\n          cursor:pointer;\n        ";e[0].value=e[0].value.replace(/WebID\s*/,""),e[1]&&(e[1].style.display="none")}e.querySelector("#suicTabulator").style="\n        display: none; /* Hidden by default */\n        position: fixed; /* Stay in place */\n        z-index: 1; /* Sit on top */\n        left: 0;\n        top: 10vh;\n        /* height: set in app.js */\n        width: 100%; /* Full width */\n        overflow: auto; /* Enable scroll if needed */\n        background-color: rgb(0,0,0); /* Fallback color */\n        background-color: rgba(0,0,0,0.2); /* Black w/ opacity */\n      ",n.authn.authSession&&(n.authn.authSession.onLogin((()=>{o()})),n.authn.authSession.onLogout((()=>{o()})),n.authn.authSession.onSessionRestore((e=>{o()}))),o()}(h),await async function(e){if(!e)return;let n=`${window.origin}/profile/card#me`;n=await async function(e){await l.load(e);let n=t.each(e,r("seeAlso"));n=n.concat(t.each(e,i("sameAs"))),n=n.concat(t.each(e,a("primaryTopicOf")));for(let e of n)await l.load(e);return{webId:e,name:u(t,e,a("name"))||u(t,e,p("fn")),nick:u(t,e,a("nick")),image:u(t,e,p("hasPhoto")),inbox:u(t,e,c("inbox")),preferences:u(t,e,d("preferencesFile")),privateTypeIndex:u(t,e,s("privateTypeIndex")),publicTypeIndex:u(t,e,s("publicTypeIndex")),storages:y(t,e,d("storage")),issuers:y(t,e,s("oidcIssuer"))}}(n),n.image=n.image||"",n.name=n.name||n.nick||n.webId,e.querySelector("#currentPodLogo").src=n.image,e.querySelector("#currentPodTitle").innerHTML=`${n.name}'s Pod`}(h),h}rem2vw(e){return e*(100/document.body.clientWidth)}rem2vh(e){return 16*e*(100/window.innerHeight)}async getHTML(e){if(e.leftColumnColumnStyle||="display:none",e.leftColumnColumnMenu||="",e.siteMenu||="",e.leftColumnColumnStyle||="",e.iframeSrc||="",e.iframeContent||="",e.logoStyle="\n             height: 3rem;\n            display: inline-block;\n       padding-left: 0.5rem;\n     ",e.titleStyle='\n       display:inline-block;\n       vertical-align:top; align:left;\n       font-size: 2rem;\n       padding-top: 0.4rem;\n       padding-left:1rem;"\n     ',e.appStye="\n              display: flex;\n       flex-direction: column;\n                width: 100%;\n               height: 100%;\n     ",e.mainStyle=`\n        padding:0rem;\n        width:100%;\n        overflow:scroll;\n        position:absolute;\n        top:${e.headerHeight} !important;\n        left:0;\n        height:${e.mainHeight};\n     `,e.theme)try{let t=await window.fetch(e.theme),n=await t.text();return n=solidUI.fillTemplate(n,[e]),await n}catch(e){console.log(e)}return`\n\x3c!--APP--\x3e\n<div class="solid-uic-app solid-main-app">\n\n    \x3c!--BANNER--\x3e\n    <div class="app-banner">\n\n        \x3c!--USER IMAGE & NAME--\x3e  \n        <img id="currentPodLogo" src="">\n        <div id="currentPodTitle"></div>\n\n\n        \x3c!--ADMIN MENU, LOGIN, SOLID LOGO--\x3e\n        <div style="background:${e.unselBackground};text-align:center;position:absolute;top:0.5rem;right:7rem;"><span id="adminMenu" style="white-space: nowrap;"></span> </div>\n        <div id="loginArea"></div>\n        <img src="${e.logo}" style="height:7rem;position:absolute;top:-0.5rem;right:-0.5rem">\n\n        \x3c!--PUBLIC MENU--\x3e\n        <div id="currentPodMenu" style="white-space:nowrap;position:absolute;top:3rem;left:7.4rem;">${e.siteMenu}</div>\n\n    </div>\x3c!--BANNER--\x3e\n\n    \x3c!--MAIN WRAPPER--\x3e\n\x3c!--    <div style="display:flex;flex-direction:row;width:100%;height:100%;"> --\x3e\n    <div style="width:100%;height:100%;min-height:0;">\n\n        \x3c!-- LEFT COLUMN MENU (IF EXISTS) --\x3e\n        <div class="leftColumn" style="${e.leftMenuStyle}">${e.leftMenu}</div>\n\n        \x3c!--MAIN MAIN--\x3e\n        <div id="mainMain" style="min-height:0;${e.mainStyle}"></div>\n\n        \x3c!--MAIN TABULATOR--\x3e\n            <div class="TabulatorOutline" role="main" id="suicTabulator" style="${e.mainStyle}">\n                <table id="outline"></table>\n                <div id="GlobalDashboard"></div>\n            </div>\n\n    </div>\x3c!--MAIN WRAPPER--\x3e\n\n</div>\x3c!--APP--\x3e\n<style>\n  #suicTabulator{\n    top:${e.headerHeight} !important;\n    overflow:scroll !important;\n    min-height: 0; \n  }\n  #suicTabulator table {\n    background:#7e7e7e !important;\n    color:white !important;\n  }\n  .solid-main-app {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n  }\n  .solid-main-app .app-banner {\n     width:100%;\n     display:flex;\n     background:${e.unselBackground};\n     color:black;\n  }\n  .solid-main-app input[type="button"]:hover {\n    background:${e.selBackground};\n    color:${e.selColor};\n  }\n  .solid-main-app #currentPodTitle {\n    left:8rem;\n    font-size:1.3rem;\n    position:absolute;\n    top:1rem;\n  }\n  .solid-main-app #currentPodLogo {\n    height:${e.headerHeight}\n  }\n</style>\n\n    `}}class g{async render(e,t){const n=document.createElement("DIV","uic-form"),o=window.document,l=await e.loadUnlessLoaded(t.form);await e.loadUnlessLoaded(t.formSubject);const r=await e.loadUnlessLoaded(t.formSubject);if(!r)return console.log("ERROR : Couldn not load form subject ",t.formSubject);let i=t.formResultDocument;!i&&r.doc&&(i=r.doc());const a=t.script||function(){};try{UI.widgets.appendForm(o,n,{},r,l,i,a)}catch(e){return console.log(e)}if(t.onchange){const e=n.querySelectorAll(".formFieldValue button");for(let t of e)t.onclick="alert(3)"}return n}}class w{async render(e,t,n){"string"==typeof t&&(t=await e.processComponent(n,t));let o=e.createElement("NAV","solid-uic-dropdown-menu"),l=document.createElement("UL"),r=document.createElement("DIV");for(var i of(o.style.background=t.unselBackground,o.style.color=t.unselColor,r.style.width="100%",r.style.backgroundColor=t.background,r.style.color=t.color,r.innerHTML="",r.classList.add("main"),o.appendChild(l),t.parts))l.appendChild(await this.renderMenuItem(i,t,r));const a=e.createElement("SPAN");return o.style.display="inline-block",o.style.textAlign=t.position,l.style.textAlign=t.position,a.appendChild(o),a.appendChild(r),a}async renderMenuItem(e,t,n){if(e.menu&&e.menu.type&&"SparqlQuery"===e.menu.type){let t=await solidUI.processComponent(null,null,e.menu);"object"==typeof t&&(e.parts=t)}const o=document.createElement("LI"),l=document.createElement("SPAN");if(l.innerHTML=e.label,o.appendChild(l),o.style.cursor="pointer",o.style.display="inline-block",o.style.backgroundColor=t.unselBackground,o.style.color=t.unselColor,o.onmouseover=()=>{o.style.backgroundColor=t.selBackground,o.style.color=t.selColor},o.onmouseout=()=>{o.style.backgroundColor=t.unselBackground,o.style.color=t.unselColor},e.popout||!e.parts)o.classList.add("item"),o.addEventListener("click",(t=>{window.displayLink(t,e,n)}));else{o.classList.add("caret");let l=document.createElement("UL");for(var r in o.appendChild(l),l.classList.add("nested"),e.parts){let o=e.parts[r];"object"==typeof o&&(o.target=t.target),l.appendChild(await this.renderMenuItem(o,t,n))}}return o}}class b{async render(e,t){const n=document.createElement("SPAN"),o=`\n      background-color:${(a=t).unselBackground};\n      color:${a.unselColor};\n      padding:1rem;\n      cursor:pointer;\n    `,l="\n      display: none; /* Hidden by default */\n      position: fixed; /* Stay in place */\n      z-index: 1; /* Sit on top */\n      left: 0;\n      top: 0;\n      width: 100%; /* Full width */\n      height: 100%; /* Full height */\n      overflow: auto; /* Enable scroll if needed */\n      background-color: rgb(0,0,0); /* Fallback color */\n      background-color: rgba(0,0,0,0.2); /* Black w/ opacity */\n    ",r=`\n      background-color: #fefefe;\n      margin: 15% auto; /* 15% from the top and centered */\n      padding: 1rem;\n      border: 1px solid #888;\n      border-radius:0.5rem;\n      width: ${a.width};\n    `,i="\n      color:red;\n      text-align:right;\n      margin-bottom: 0.25rem;\n      font-size: 2rem;\n      font-weight: bold;\n      cursor:pointer;\n    ";var a;return n.innerHTML=`\n      <button style="${o}" onclick="window.openModal(this)">\n        ${t.label}\n      </button>\n      <div style="${l}">\n        <div style="${r}">\n          <div style="${i}" onclick="window.closeModal(this)">\n            &times;\n          </div>\n          ${t.content}\n        </div>\n      </div>\n    `,await e.initInternal(n)}}var k=n(157);class C{render(e){const t=e.parts;if(!t||!t.length)return console.log("No results!"),document.createElement("SPAN");let n=document.createElement("TABLE"),o=Object.keys(t[0]),l=document.createElement("TR");for(let t of o){let n=document.createElement("TH");n.innerHTML=t,n.style.border="1px solid black",n.style.padding="0.5em",n.style.background=e.unselBackground,n.style.color=e.unselColor,l.appendChild(n)}n.appendChild(l);for(let l of t){let t=document.createElement("TR");for(let n of o){let o=document.createElement("TD");o.innerHTML=l[n],o.style.border="1px solid black",o.style.padding="0.5em",o.style.backgroundColor=e.background,o.style.color=e.color,t.appendChild(o)}n.appendChild(t)}return n.style.borderCollapse="collapse",n}}class v{async render(e,t){const n=t.parts,o=e.createElement("DIV","solid-uic-tabs");t.style&&(o.style=t.style);const l=e.createElement("NAV");"vertical"===t.orientation?l.style.textAlign="right":l.style.textAlign=t.position;let r=e.createElement("DIV");r.style.backgroundColor=t.background,r.style.color=t.color;let i=0;for(let a of n){i++;let n=e.createElement("BUTTON",i,a.label);n.style.backgroundColor=t.unselBackground,n.style.color=t.unselColor,n.style.padding="0.75em",n.style.border="1px solid grey",n.style.cursor="pointer";let s=e.createElement("DIV",i,a.content);if(s.style.padding="0.75em","horizontal"===t.orientation&&(s.style.border="1px solid grey"),s.style.display="none","SolidOSLink"===a.type){let e=`tab-${i}-outline`;s.innerHTML=`\n          <div class="TabulatorOutline" id="${e}-tabulator" role="main">\n            <table id="${e}"></table>\n            <div id="GlobalDashboard"></div>\n          </div>\n        `;let t=window.kb.sym(a.href),n=s.querySelector("#"+e);n.style="display:table-row;background-color:c0c0c0",window.outliner.GotoSubject(t,!0,void 0,!0,void 0,n)}n.onclick=e=>{e.preventDefault();let r=o.querySelector("DIV").children;for(let e of r)e.style.display="none";for(let e of l.children)e.style.backgroundColor=t.unselBackground,e.style.color=t.unselColor;n.style.backgroundColor=t.selBackground,n.style.color=t.selColor,s.style.display="block"},l.appendChild(n),r.appendChild(s),"vertical"===t.orientation?(n.style.display="block",n.style.marginBottom="0.5em",n.style.width="100%",o.style.width="100%",o.style.height="100%",o.style.display="table-row",l.style.display="table-cell",r.style.display="table-cell",r.style.display="block",r.style.height="100%",s.style.height="100%"):(n.style.marginRight="0.5em",n.style.borderBottom="none")}o.appendChild(l);const a=document.createElement("SPAN");return a.style="\n        color:red;\n        text-align:right;\n        position:absolute;\n        top:0.25rem;\n        right:0.25rem;\n        font-size: 2rem;\n        font-weight: bold;\n        cursor:pointer\n      ",a.addEventListener("click",(e=>{e.preventDefault(),e.target.parentElement.style.display="none"})),a.innerHTML="&times",o.appendChild(a),o.appendChild(r),e.simulateClick(o.querySelector("BUTTON")),await e.initInternal(o)}}const x=new class{async rdflibQuery(e,t,n,o,l){await e.loadUnlessLoaded(n);try{const e=await $rdf.SPARQLToQuery(o,!1,t);let n=e.vars.map((e=>e.label)),l=[],r=t.querySync(e);for(let e of r){let t={};for(let o of n){let n=e["?"+o];t[o]=n?n.value:""}l.push(t)}return l=l.sort(((e,t)=>e.label>t.label?1:-1)),l}catch(e){console.log(e)}}async comunicaQuery(e,t){try{let n=Comunica.newEngine();function o(e){return e?e.replace(/^"/,"").replace(/"[^"]*$/,""):""}let l=await n.query(t,{sources:[e]}),r=l.variables;l=await l.bindings();let i=[];for(let e of l.entries()){if(!e[1]||!e[1]._root||!e[1]._root.entries)continue;e=e[1]._root.entries;let t={};for(let n in e){let l=o(e[n][0].replace(/^\?/,""));t[l]=t[l]||"";let r=o(e[n][1].id);"ARRAY"!=typeof t[l]&&(t[l]=[t[l]]),"ARRAY"==typeof t[l]?t[l].push(r):t[l]=r}for(let e of r)e=e.replace(/^\?/,""),t[e]=t[e]||"";i.push(t)}return i.length||console.log("No results!"),i}catch(e){console.log(e)}}flatten(e,t){const n={};for(let o of e){let e=o[t];n[e]||(n[e]={});for(let t of Object.keys(o))n[e][t]?n[e][t].includes(o[t])||("object"!=typeof n[e][t]&&(n[e][t]=[n[e][t]]),n[e][t].push(o[t])):n[e][t]=o[t]}e=[];for(let t of Object.keys(n))e.push(n[t]);return e}},S=panes.UI.rdf,L=window.kb=S.graph();let A;window.outliner=panes.getOutliner(document),S.Namespace("http://www.w3.org/2004/02/skos/core#");const M=S.Namespace("http://www.w3.org/ns/ui#"),T=S.Namespace("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),E=new class{constructor(){}async init(){const e=document.querySelectorAll("[data-solid_ui_component]");for(let t of e){const e=await this.processComponent(t);e&&t.appendChild(e)}}async initInternal(e){const t=e.querySelectorAll("[data-solid_ui_component]");for(let e of t){const t=await this.processComponent(e);e.appendChild(t)}return e}async processComponent(e,t,n){if(!n){if(!t&&e&&e.dataset&&(t=await this.loadUnlessLoaded(e.dataset.solid_ui_component)),!t)return null;n=await this.getComponentHash(t)}if(n||=t,!n)return void console.log("No ComponentHASH ",t);let o="string"==typeof(n=this.getDefaults(n)).dataSource?await this.getComponentHash(n.dataSource):n.dataSource;if(o&&"SparqlQuery"===o.type){let e=o.endpoint,t=o.query;if(n.parts=await this.sparqlQuery(e,t,n),"SparqlQuery"===n.type)return n.parts}if("SparqlQuery"===n.type&&(n.parts=await this.sparqlQuery(n.endpoint,n.query,n),"SparqlQuery"===n.type))return n.parts;if("AnchorList"===n.type)for(let e of n.content.split(/\n/));if(n.parts&&n.groupOn&&(n.parts=x.flatten(n.parts,n.groupOn),console.log(n.groupOn,n.parts)),"Component"!=n.type&&this.log(`Parts for ${n.type} `,n.parts),"App"===n.type)return await(new f).render(this,n);if(n.type&&n.type.match(/Link/))return await window.displayLink(e,n,e);if("Menu"===n.type)return await(new w).render(this,n,e);if("Feed"===n.type&&(n.href||n.link))return await(new h).render(this,n);if("SelectorPanel"===n.type){let e=new k.SelectorPanel;return this.setDefaults(n),await e.render(n)}if("ModalButton"===n.type)return await(new b).render(this,n);if("Accordion"===n.type)return await(new m).render(this,n);if("FormComponent"===n.type)return await(new g).render(this,n);if("Tabset"===n.type)return await(new v).render(this,n);let l,r,i,a,s,d=document.createElement("DIV");"Record"===n.type&&(s=this.getValue(o,M("label")),a=this.getValue(o,M("content")),l={label:s,content:a}),l=l||n.parts,this.log("Parts for Component",l);let c,p=n.template;if(!p)return l;if(p.groupOn&&(l=x.flatten(l,p.groupOn)),"AccordionMenu"==p){let e=await this.runBuiltIn(p,l);return e&&d.appendChild(e),d}if("Table"==p){let e=await(new C).render(n);return e&&d.appendChild(e),d}if("ModalButton"==p){let e=await this.makeMmodal(n.label,n.content);return e&&d.appendChild(e),d}"string"==typeof p&&(p=await this.getComponentHash(p)),c=p.recurring,r=p.before,i=p.after;let u=this.fillTemplate(c,l);return d.innerHTML=(r||"")+u+(i||""),d}async getComponentHash(e,t){if(!(e=await this.loadUnlessLoaded(e)))return null;let n=L.match(e);t=t||{};for(let e of n){let n=e.predicate.value.replace(/http:\/\/www.w3.org\/1999\/02\/22-rdf-syntax-ns#/,"").replace(/http:\/\/www.w3.org\/ns\/ui#/,""),o=e.object;if("BlankNode"===o.termType)o=await this.getComponentHash(o),t[n]?"ARRAY"!=typeof t[n]?t[n]=[o]:t[n].push(o):t[n]=o;else if("Collection"===o.termType){o=o.elements;for(let e of o){let o=await this.getComponentHash(e,{});t[n]?t[n].push(o):t[n]=[o]}}else o=o.value.replace(/^http:\/\/www.w3.org\/ns\/ui#/,""),t[n]?"ARRAY"!=typeof t[n]?t[n]=[o]:t[n].push(o):t[n]=o;1==t[n].length&&(t[n]=t[n][0])}return t}log(...e){"undefined"!=typeof DEBUG&&console.log(e)}setStyle(e,t){for(let n of Object.keys(t))e.style[n]=t[n]}async sparqlQuery(e,t,n){return"undefined"!=typeof Comunica?await x.comunicaQuery(e,t,n):await x.rdflibQuery(E,L,e,t,n)}getDefaults(e){return"string"==typeof e&&(e=this.processComponent("",e)),e.height||=this.height,e.width||=this.width,e.proxy||=this.proxy||"https://solidcommunity.net/proxy?uri=",e.background||=this.background||"#fff",e.color||=this.color||"#000",e.selBackground||=this.selBackground||"#559",e.selColor||=this.selColor||"#fff",e.unselBackground||=this.unselBackground||"#99d",e.unselColor||=this.unselColor||"#000",e.orientation||=this.orientation||"horizontal",e.position||=this.position||"left",this.proxy=e.proxy,e}setDefaults(e){return"string"==typeof e&&(e=this.processComponent("",e)),this.background=e.background,this.color=e.color,this.selBackground=e.selBackground,this.selColor=e.selColor,this.unselBackground=e.unselBackground,this.unselColor=e.unselColor,this.orientation=e.orientation,this.position=e.position,this.proxy=e.proxy,this.getDefaults(e)}fillTemplate(e,t){function n(e,t){for(let n of Object.keys(t)){let o=t[n]||" ";"object"==typeof o&&o.length>1&&(o=o.join(", "));let l=new RegExp(`\\$\\{${n}\\}`,"gi");e=e.replace(l,o)}return e}let o="";for(let l of t)o+=n(e,l)+"\n";return o}runBuiltIn(e,t,n){return t.match(/Table/)?this.results2table(e,n):t.match(/Modal/)?this.results2modal(n):t.match(/Accordion/)?tabset(n):t.match(/DescriptionList/)?this.results2descriptionList(n):void 0}simulateClick(e){if(e.fireEvent)e.fireEvent("onclick");else{var t=document.createEvent("Events");t.initEvent("click",!0,!1),e.dispatchEvent(t)}}createElement(e,t,n,o){let l=document.createElement(e);if(t&&l.classList.add(t),n&&(l.innerHTML=n),o)for(let e of o.split(/;/)){let t=e.split(/:/);2==t.length&&(l.style[t[0].trim()]=t[1].trim())}return l}getComponentType(e){return e?L.each(e,T("type")).map((e=>{if((e=e.value).match(/ns\/ui#/))return e.replace(/.*\#/,"")}))[0]||"":null}async clearInline(){for(let e of L.match())e.graph.value.startsWith("inline:")&&L.remove(e)}loadFromMemory(e){let t=e;if(L.any(null,null,null,S.sym(t)))return S.sym(t);let[n,o]=t.split(/#/),l=document.getElementById(n),r=l.innerText||l.value;r=r.trim(),r.startsWith("<![CDATA[")&&(r=r.replace(/^\<\!\[CDATA\[/,"").replace(/\]\]$/,"").replace(/~~/g,"#"));try{return S.parse(r,L,t,"text/turtle"),S.sym(t)}catch(e){console.log(e)}}async loadUnlessLoaded(e){try{if(e.termType&&"BlankNode"===e.termType)return e;if(!(e="object"==typeof e?e.uri:e))return;if(e.startsWith("inline"))return this.loadFromMemory(e);e.startsWith("http")||e.startsWith("ls")||(e=window.location.href.replace(/\/[^\/]*$/,"/")+e);const t=e.replace(/\#[^#]*$/,"");let n=S.sym(t);return L.any(null,null,null,n)||(console.log("loading "+n.uri+" ..."),A=A||S.fetcher(L),await A.load(n.uri),L.any(null,null,null,n)&&console.log("Resource loaded!")),S.sym(e)}catch(e){return console.log(e),null}}getValue(e,t,n,o){let l=L.any(e,t,n,o);return l?l.value:""}valuesContain(e,t,n,o,l){let r=L.each(e,t,n,o);for(let e of r)if(e=e?e.value:"",e===l)return e}};document.addEventListener("DOMContentLoaded",(()=>{E.init()}));const I=E})(),o.default})()}));
//# sourceMappingURL=solid-ui-components.bundle.js.map