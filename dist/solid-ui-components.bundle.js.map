{"version":3,"file":"solid-ui-components.bundle.js","mappings":"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","sources":["webpack://solidUI/webpack/universalModuleDefinition","webpack://solidUI/webpack/bootstrap","webpack://solidUI/webpack/runtime/define property getters","webpack://solidUI/webpack/runtime/hasOwnProperty shorthand","webpack://solidUI/webpack/runtime/make namespace object","webpack://solidUI/./src/model/profile.js","webpack://solidUI/./src/databrowser.js","webpack://solidUI/./src/model/rss.js","webpack://solidUI/./src/user.js","webpack://solidUI/./src/model/sparql.js","webpack://solidUI/./src/view/table.js","webpack://solidUI/./src/view/form.js","webpack://solidUI/./src/utils.js","webpack://solidUI/./src/model/feed.js","webpack://solidUI/./src/view/accordion.js","webpack://solidUI/./src/view/app.js","webpack://solidUI/./src/view/menu.js","webpack://solidUI/./src/view/modal.js","webpack://solidUI/./src/view/selectorPanel.js","webpack://solidUI/./src/view/tabs.js","webpack://solidUI/./src/view/bookmarkTree.js","webpack://solidUI/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"solidUI\"] = factory();\n\telse\n\t\troot[\"solidUI\"] = factory();\n})(self, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const $rdf = UI.rdf;\n\nconst RDFS = $rdf.Namespace('http://www.w3.org/2000/01/rdf-schema#');\nconst FOAF = $rdf.Namespace('http://xmlns.com/foaf/0.1/');\nconst SOLID = $rdf.Namespace('http://www.w3.org/ns/solid/terms#');\nconst PIM = $rdf.Namespace('http://www.w3.org/ns/pim/space#');\nconst LDP = $rdf.Namespace('http://www.w3.org/ns/ldp#');\nconst VCARD = $rdf.Namespace('http://www.w3.org/2006/vcard/ns#');\n\n/* loadProfile()\n*/\nexport async function loadProfile(webId) {\n  const kb = window.kb;\n  const fetcher = $rdf.fetcher(kb);\n  const node = $rdf.sym(webId);\n  try {\n    await fetcher.load(webId);\n  }\n  catch(e){\n    console.log(\"Couldn't load profile : \"+e);\n    return {};\n  }\n  let extendedDocs = kb.each( webId, RDFS('seeAlso') );\n  extendedDocs = extendedDocs.concat( kb.each( node, FOAF('primaryTopicOf') ) );\n  for(let doc of extendedDocs){\n    await fetcher.load(doc);\n  }\n  let me = {\n    webId,\n    name  : getObject(kb,webId,FOAF('name')) || getObject(kb,webId,VCARD('fn')) || getObject(kb,webId,FOAF('nick')) || webId,\n    nick  : getObject(kb,webId,FOAF('nick')) || \"\",\n    image : getObject(kb,webId,VCARD('hasPhoto')) || \"\",\n    inbox : getObject(kb,webId,LDP('inbox')) || \"\",\n    preferences : getObject(kb,webId,PIM('preferencesFile')) || \"\",\n    privateTypeIndex : getObject(kb,webId,SOLID('privateTypeIndex')) || \"\",\n    publicTypeIndex : getObject(kb,webId,SOLID('publicTypeIndex')) || \"\",\n    storages : getObjects(kb,webId,PIM('storage')) || \"\",\n    issuers : getObjects(kb,webId,SOLID('oidcIssuer')) || \"\",\n  }\n  return me; // I'm defective, get your money back ;-)\n}\n\nfunction getObject(kb,subject,predicate){\n  subject = kb.sym(subject);\n  let value = kb.any(subject,predicate);\n  return value ?value.value :\"\";\n}\nfunction getObjects(kb,subject,predicate){\n  subject = kb.sym(subject);\n  let value = kb.each(subject,predicate);\n  let results = [];\n  for(let v of value){\n    results.push(v ?v.value :\"\");\n  }\n  return results;\n}\n","import {loadProfile} from './model/profile.js';\n\nexport async function applyProfile(domElement,me,type) {\n  domElement  ||= document;\n  let origin = window.origin;\n  me ||= `${origin}/profile/card#me`;\n  me = await loadProfile( me );\n  const storage = me.storages ?me.storages[0] :null ; // TBD MULTIPLE STORAGES\n  me.name = me.name || me.nick || me.webId;\n  let logo = domElement.querySelector('#currentPodLogo')\n  if(logo) logo.src = me.image;\n  let title = domElement.querySelector('#currentPodTitle');\n  if(title) title.innerHTML=`${me.name}'s Pod`;\n  solidUI.vars = {\n    podRoot   : storage,\n    podName   : me.name,\n    podNick   : me.nick,\n    podWebID  : me.webId,\n    podImage  : me.image,\n    podInbox  : me.inbox,\n    podProfile : me.webId,\n  };\n  return me;\n}\n \n    export function setHistory(uri){\n      const params = new URLSearchParams(location.search)\n      params.set('uri', (uri||\"\"));\n      window.history.replaceState({}, '', `${location.origin}${location.pathname}?${params}`);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    }\n\nexport async function createLoginBox(domElement){\n    const loginButtonArea = domElement.querySelector(\"#loginArea\");\n    const UI = panes.UI;\n    let tabulator = domElement.querySelector('#suicTabulator')\n/*\n      tabulator.style= `\n        display: none; \n        position: fixed;\n        z-index: 1;\n        left: 0;\n        top: 10vh;\n        width: 100%;\n        overflow: auto;\n        background-color: rgb(0,0,0);\n        background-color: rgba(0,0,0,0.2);\n      `; \n*/\n    async function mungeLoginArea(uri){\n      await initAuth();\n      loginButtonArea.innerHTML=\"\";\n      loginButtonArea.appendChild(UI.authn.loginStatusBox(document, null, {}))\n      let loginButtons = loginButtonArea.querySelectorAll('input');\n/*\n      for(let button of loginButtons){\n        button.style = `\n          border:none;\n          background:transparent;\n          font-size:1rem;\n          position: absolute;\n          top:3.5rem;\n          right:7.2rem;\n          cursor:pointer;\n        `;\n      }\n*/\n      loginButtons[0].value = loginButtons[0].value.replace(/WebID\\s*/,'');\n      if(loginButtons[1]) loginButtons[1].style.display=\"none\";\n    }      \n    async function initAuth(){\n      if( !UI.authn.currentUser() ) {\n        await UI.authn.checkUser();\n      }\n    }\n    if( UI.authn.authSession ) {\n      UI.authn.authSession.onLogin(() => {\n        mungeLoginArea();\n      })\n      UI.authn.authSession.onLogout(() => {\n        mungeLoginArea();\n      })\n      UI.authn.authSession.onSessionRestore((url) => {\n        mungeLoginArea();\n\n      })\n    }    \n//    document.addEventListener('DOMContentLoaded',()=>{mungeLoginArea();});\n    mungeLoginArea();\n} // ENDS\n","/*\n *  myFeed = new Feed(solidUI,feedUri)\n *  \n\nproxy\nhref || link\ndisplayType\nstandAlone\nlabel\n  selBackground\n  selColor\n  height\n  width\n\n */\n\nexport class Feed {\n\n  async fetchAndParse(feedUri,proxy){\n\n    // fetch feed URI & parse into a Dom structure\n    //\n    feedUri = (proxy||\"\")+encodeURI( feedUri );\n\n    let response = await fetch( feedUri )\n    let feedContent = await response.text();\n    const domParser = new window.DOMParser();\n    let feedDom = domParser.parseFromString(feedContent, \"text/xml\")\n\n    // find items (RSS) or entries (Atom)\n    //\n    let items = feedDom.querySelectorAll(\"item\") || null;\n    items = items.length<1 ?feedDom.querySelectorAll(\"entry\") :items;\n\n    // parse items\n    //\n    let parsedItems=[];\n    items.forEach( el => {\n\n      // find item link, account for specific kinds of quirks\n      //\n      let link = el.querySelector(\"link\").innerHTML;\n      // vox\n      if(!link) link = el.querySelector('link').getAttribute('href');\n      // reddit\n      if(!link || link.match(/ /)){\n        link = el.querySelector('content').innerHTML.replace(/.*\\[link\\]/ ,'').replace(/a href=\"/,'').replace(/\"&gt;.*/,'').replace(/.*&lt;/,'');\n      }\n      // engadget\n      if(!link.match(/^http/)) link = link.replace(/.*\\[CDATA\\[/,'');\n\n      // always use https, not http\n      link = link.replace(/^http:/,'https:');\n\n      // get the title\n      let title = el.querySelector(\"title\").innerHTML;\n      title = title.replace(/^\\<\\!\\[CDATA\\[/,'');\n      title = title.replace(/\\]\\].*\\>/,'').trim();\n\n      parsedItems.push({title,link});\n    });\n    return parsedItems;\n  }  // END OF fetchAndParse()\n\n\n  async render(solidUI,json){\n    let items = \"\";\n    let externalLinkIcon = UI.icons.iconBase+`/noun_189137.svg`;\n    externalLinkIcon = `<img src=\"${externalLinkIcon}\" style=\"width:1em;height:1em;display:inline-block; padding-left:0.4em;opacity:0.5\">`;\n    for(let i of await this.fetchAndParse((json.href||json.link),json.proxy)){\n      if(json.displayTarget===\"window\"){\n/*\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\">\n            <a href=\"${i.link}\" target=\"_BLANK\" property=\"rss:title\">\n              ${i.title}\n            </a>\n          </li>\n        `;\n*/\n      }\n      else {\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\" style=\"display:none;background:green;border:1px solid grey;\">\n            <a href=\"${json.proxy+i.link}\" property=\"rss:title\" style=\"background:#999;display:inline-block\">\n               ${i.title}\n            </a>\n            <a href=\"${i.link}\" class=\"skipMunge\" target=\"_BLANK\" class=\"external\">${externalLinkIcon}</a>\n          </li>\n        `;\n      }\n    }\n    const wrapper = document.createElement('DIV');\n    wrapper.property = \"xmlns:rss\";\n    wrapper.content = \"http://purl.org/rss/1.0/\";\n    if(json.standAlone) {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n          <b property=\"rss:title\">${json.label}</b>\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n\n    wrapper.querySelector('B').style=`padding:1em;padding-right:0;background:${json.selBackground};color:${json.selColor};border:1px solid grey;width:100%;display:inline-block`;\n    }\n    else {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n<!--          <div property=\"title\" style=\"background:#d0d0d0;padding:1em;\">${json.label}</div>-->\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n    wrapper.querySelector('UL').style=`padding:0;padding-left:0;list-style:none;margin-top:0;width:100%;`;\n    }\n    wrapper.querySelector('UL').style=`padding:0;border:1px solid grey;list-style:none;margin-top:0;width:100%;height:${json.height};overflow-y:auto;`;\n    let anchors = wrapper.querySelectorAll('A');\n    for(let anchor of anchors){\n      anchor.style=\"text-decoration:none;\"\n    }\n    let listItems = wrapper.querySelectorAll('LI');\n    for(let li of listItems){\n      li.style=\"padding:0.5em;border-bottom:1px solid grey\";\n    }\n    if(json.width) wrapper.style.width = json.width;\n    return wrapper;\n  }\n}\n","import {setHistory,applyProfile} from './databrowser.js';\nimport {Feed} from './model/rss.js';\n\n/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  USER CALLABLE ACTIONS\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n\n  // https://stackoverflow.com/a/41015840/15781258\n  //\n  String.prototype.interpolate = function(params) {\n    const names = Object.keys(params);\n    const vals = Object.values(params);\n    return new Function(...names, `return \\`${this}\\`;`)(...vals);\n  }\n\n  window.toggleMenu=()=>{\n    const column2 = document.getElementById('column-2');\n    column2.style.display ||= \"block\"; \n    if(column2.style.display===\"block\"){\n      column2.style.display=\"none\"\n    }\n    else {\n      column2.style.display=\"block\"\n    }\n  }\n  window.toggleDarkMode=()=>{\n     const container = document.getElementById('zContainer');\n     let currentMode = container.classList.contains('darkMode');\n     if(currentMode){\n        container.classList.remove('darkMode');\n     }\n     else {\n        container.classList.add('darkMode');\n     }\n  }\n  window.toggleFontSize=()=>{\n     let currentSize = document.body.style.fontSize || \"100%\";\n     if(currentSize===\"100%\"){\n        document.body.style.fontSize = \"120%\";\n     }\n     else if(currentSize===\"120%\"){\n        document.body.style.fontSize = \"140%\";\n     }\n     else if(currentSize===\"140%\"){\n        document.body.style.fontSize = \"90%\";\n     }                                                                                                   else {\n        document.body.style.fontSize = \"100%\";\n     }\n  }                                                                                                 \n\n  async function showIframe(uri,displayArea){\n    if( uri.match(/localhost/) ) {\n      displayArea.src = uri;\n      return  ;\n    }\n    const r = await fetch(uri);\n    const content = await r.text();\n    const contentElement = this.createElement('SPAN','',content);\n    displayArea.contentWindow.document.body.innerHTML = \"\";\n    displayArea.contentWindow.document.body.appendChild(contentElement);\n  }\n  function showByClass(event){\n    let wanted = event.target.dataset.link;\n    let main = event.target.closest('.solid-uic-app').querySelector('.main');\n    let elements = main.querySelectorAll('[typeof]');\n    for(let element of elements){\n      if(wanted===\"all\") {\n        element.style.display=\"block\";\n        continue;\n      }\n      if( (element.getAttribute('value')).indexOf(wanted)>-1 ) element.style.display=\"block\";\n    //  if(element.classList.contains(wanted)) element.style.display=\"block\";\n      else element.style.display=\"none\";\n    }\n    highlightMenuSelection(event)\n  }\n  function highlightMenuSelection (e) {\n    let wanted = e.target.dataset.link;\n    let siblings = e.target.parentElement.children;\n    for(let sib of siblings){\n      if(sib.dataset.link===wanted)  sib.classList.add('selected');\n      else sib.classList.remove('selected');\n    }\n  }\n  function toggleAccordion (e) {\n    let wanted = e ?e.target.dataset.link :null;\n    let siblings = e.target.closest('UL').children;\n\n    // HIDE ALL ACCORDION DROPDOWNS\n    let navs = e.target.closest('UL').querySelectorAll('NAV');\n    for(let n of navs) {n.style.display=\"none\"}\n\n    // SHOW SELECTED ACCORDION DROPDOWNS\n    for(let sib of siblings){\n      let button = sib.querySelector('BUTTON');\n      let links = sib.querySelectorAll('NAV DIV');\n      for(l of links) { l.classList.remove('selected')}\n      let box = sib.querySelector('NAV');\n      if(button.dataset.link===wanted)  {\n        box.style.display=\"block\";\n      }  \n    } \n  }\n  window.displayLink = async function( e, item, element ){\n    if(typeof item==='string') item = { href:item }\n    item.href = item.href || item.link;\n    item.type = item.type || 'Link';\n    item.type = item.type.replace(/http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n\n\n    // IF POPOUT, DISPLAY IN ITS OWN OVERLAY AND RETURN\n    if(item.popout) {\n      let newElement = await solidUI.processComponent('',item.href)\n      newElement.style.display=\"block\";\n      document.body.appendChild(newElement);\n      return newElement;\n    }\n\n    // IF SOLIDOS LINK, DISPLAY WITH GOTOSUBJECT, RETURN\n    if(item.type.startsWith(\"SolidOS\")) {\n      document.getElementById('mainMain').style.display=\"none\";\n      const targetElement = document.getElementById('suicTabulator')\n      targetElement.style.display=\"block\";\n      const targetOutline = targetElement.querySelector('#outline');\n      let wantedPane;\n      item.href = (!item.href && item.variable) ?solidUI.vars[item.variable] :item.href;\nconsole.log(solidUI.vars);\n      let subject = item.href;\n      if( item.pane ) {\n         wantedPane = panes.byName(item.pane);\n      }\n      else if( item.pod ) {\n        let me = await applyProfile(null,item.pod,'podLoad');\n        subject = me.storages[0];\n      }\n      subject = window.kb.sym(subject);\n      setHistory(subject.uri);\n      window.outliner.GotoSubject(subject,true,wantedPane,true,null,targetOutline);\n      return;\n    }\n\n    let main = document.getElementById('mainMain')\n    let tabulator = document.getElementById('suicTabulator')\n    if(main) main.style.display=\"block\";\n    if(tabulator) tabulator.style.display=\"none\";\n\n    // FIND CONTAINING ELEMENT\n    let containingEl;\n    if(element && !e){\n      containingEl = element;\n    }\n    // let wrapper =e.target.closest('.solid-ui-component')\n    let wrapper = e && e.target ?e.target.closest('.solid-uic-app') :null;\n    if(wrapper && wrapper.classList.contains('solid-main-app')) {\n      containingEl = wrapper.querySelector('#mainMain');\n    }\n    else if(wrapper) {\n      containingEl = wrapper.querySelector('.main');\n    } \n    containingEl=containingEl||document.body.querySelector('.main')||document.body;\n    if(containingEl) containingEl.innerHTML=\"\";\n    let content = item.content;\n    if(content){\n      let span = document.createElement('SPAN')\n      content = content.interpolate(solidUI.vars);\n      span.innerHTML = content;\n//      span = mungeAnchors(span);\n      containingEl.innerHTML=\"\"\n      containingEl.appendChild(span);\n      return await solidUI.initInternal(containingEl);  \n    }\n    // SolidOsLink\n    if(item.type===\"SolidOSLink\") {\n        return;\n    }\n    // FEED \n    if(item.type===\"Feed\"||item.linkType===\"Feed\") {\n      let content = await (new Feed()).render(solidUI,item);\n/*\n      let newItem = {\n        type:\"App\",\n        orientation:\"vertical\",\n        menu:item\n      }\n      let content = await solidUI.processComponent('','',newItem)\n*/\n      content = mungeAnchors(content,\"noStyle\");\n      containingEl.innerHTML=\"\"\n      containingEl.appendChild(content);\n      return containingEl;\n    }\n    // MARKDOWN\n    else if(item.type==='TransformLink'){\n      if(item.href && item.format && item.format.match(/markdown/)){\n        return showMarkdown(item,containingEl);\n      }\n    }\n    else if(item.type===\"Link\") {\n      if(content){\n          containingEl.innerHTML = content;\n        return await this.initInternal(containingEl);  \n      }\n      else if(item.script){\n        let content = await Function('\"use strict\";return (' + item.script + ')')();\n        content = mungeAnchors(content) ;\n//        containingEl.innerHTML=\"\"\n        return(content);\n      }\n      else if(item.href){\n        let content = await getIframe(item,containingEl,item.nativeIframe);\n//        containingEl.innerHTML=\"\"\n        containingEl.appendChild(content);\n        return containingEl;\n      }\n    }\n    else {\n      content = await solidUI.processComponent('',item) ;\n      if(!item.format) content = mungeAnchors(content);\n      containingEl.innerHTML=\"\"\n      if(typeof content === 'string'){\n        let div = document.createElement('DIV');\n        div.innerHTML = content;\n        containingEl.appendChild(div);\n      }\n      else containingEl.appendChild(content);\n      return containingEl;\n    }\n  }\n  async function showMarkdown(item,containingEl){\n    let content = await fetch(item.href);\n    content = await content.text();\n    containingEl.innerHTML=\"\"\n    let style =`\n<style>\n  h1 {display:none;}\n//  a{text-decoration:none; padding-top:0.25em;display:inline-block;padding-left:1em;}\n  ul {list-style:none;padding-left:0;margin-top:0;}\n</style>`;\n    let wrapper = document.createElement('SPAN');\n    wrapper.innerHTML = style + marked.parse( content );\n    wrapper = mungeAnchors(wrapper,\"noStyle\");\n    return wrapper;\n  }\n\n  function mungeAnchors(element,noStyle){\n    if(!element) return;\n    const anchors = element.querySelectorAll('A');\n    for(var anchor of anchors){\n      if(!anchor.innerHTML) alert(anchor)\n      if(anchor.classList.contains('skipMunge')) continue;\n      anchor.addEventListener('click',async(event)=>{\n        event.preventDefault();\n        let displayArea = element.dataset.target;\n        let display = event.target.closest('.solid-uic-app')\n        if(display && !displayArea) displayArea = display.querySelector('.main');\n        let href = event.target.href || event.target.parentElement.href\n        displayLink(null,{href,needsIframe:true},displayArea);\n      });\n      if(noStyle) continue;\n      anchor.style=\"display:block;text-decoration:none;padding:0.5em; border-bottom:1px solid grey;color:#017698 !important;\";\n    }\n    return element;\n  }\n  async function getIframe(item,containingEl,nativeIframe){\n    let uri = item.href;\n    const iframe = document.createElement(\"IFRAME\");\n    iframe.style=\"width:100%;height:90vh;border:none;margin:0;padding:0;\";\n    iframe.src = \"\";\n    if(nativeIframe) {\n      iframe.src=uri;\n    }\n    else {\n      try{\n        let content = await fetch(uri);\n        if(content){\n          content = await content.text()\n//        if(!content.match(/^\\s*</)) return await goto(uri,containingEl);\n          containingEl.innerHTML=\"\";\n          uri = uri.replace(/^.*proxy\\?uri=/,'');\n          uri = new URL(uri);\n          const b = `<base href=\"${uri.origin}/\"><base target=\"_BLANK\">`;\n          iframe.srcdoc = `<body>${b}${content}</body>`\n          iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n        }\n        else {\n          console.log(\"Fetched but no content!\");\n        }\n      }\n      catch(e){console.log(\"Couldn't fetch!\",e)}\n    }\n    return iframe;\n  }\n\n  async function goto(uri,domElement){\n    var kb = UI.store;\n    var outliner = panes.getOutliner(window.document)\n    var subject = kb.sym(uri);\n    const pane = panes.byName('dataContents');\n    outliner.GotoSubject(subject, true, pane, true, undefined);\n  }\n\n  function gotoPane(uri,paneName,targetElement){\n    var subject = panes.UI.rdf.sym(uri);\n    var wantedPane = panes.byName(paneName);\n    outliner.GotoSubject(subject,true,wantedPane,true,null,targetElement);\n  }\n\n  function renderSolidOSpage(item){\n     const targetElement = document.getElementById('suicTabulator')\n     targetElement.style.display=\"block\";\n     window.outliner.GotoSubject(window.kb.sym(item.href),true,undefined,true);\n  }\n","export class Sparql {\n\n  async sparqlQuery(endpoint,queryString,forceReload){\n    if(typeof Comunica !=\"undefined\")\n      return await this.comunicaQuery(endpoint,queryString,forceReload);\n    else   \n      return await this.rdflibQuery(endpoint,queryString,forceReload);  \n  }\n\n/* REPLACED\n  async rdflibQuery(solidUI,kb,endpoint,queryString,json){\n    await solidUI.loadUnlessLoaded(endpoint);\n*/\n/* NEW */\n  async rdflibQuery(endpoint,queryString,forceReload){\n/*\n    kb = UI.store\n    const fetcher = UI.store.fetcher;\n*/\n    const kb = UI.rdf.graph();\n    const fetcher = UI.rdf.fetcher(kb);\n\n//    if(forceReload || !kb.any(null,null,null,UI.rdf.sym(endpoint)))\n      await kb.fetcher.load(endpoint);\n/* END-NEW */\n\n    try {\n      const preparedQuery=await UI.rdf.SPARQLToQuery(queryString,false,kb);\n      let wanted = preparedQuery.vars.map( stm=>stm.label );\n      let table = [];\n      let results = kb.querySync(preparedQuery);\n      for(let r of results){\n        let row = {};\n        for(let w of wanted){\n          let value = r['?'+w];\n          row[w] = value ?value.value :\"\";\n        }\n        table.push(row);\n      }\n      table = table.sort((a,b)=>a.label > b.label ?1 :-1);\n      return table\n    }\n    catch(e) { console.log(e); }\n  }\n\n  async  comunicaQuery(endpoint,sparqlStr,forceReload){\n   try {\n    let comunica = Comunica.newEngine() ;\n    if(forceReload) comunica.invalidateHttpCache();\n    function munge(x){\n       return x ? x.replace(/^\"/,'').replace(/\"[^\"]*$/,'') :\"\";\n    }\n    let result;\n    let r = await UI.store.fetcher.webOperation('GET',endpoint);\n    if(!r.ok) { alert(r.statusText); return; }\n    try { result = await comunica.query(sparqlStr,{sources:[endpoint]}) ; }\n    catch(e){alert(e); return};\n    let wanted = result.variables;\n    result = await result.bindings()\n    let table = [];\n    let hash = {};\n    for(let e of result.entries()) {\n      if( !e[1] ||  !e[1]._root || !e[1]._root.entries ) continue;\n      e = e[1]._root.entries\n      let row = {} ;\n      for(let i in e){\n        let key = munge( e[i][0].replace(/^\\?/,''))\n        row[key] = row[key] || \"\";\n        let value = munge(e[i][1].id)\n        if( typeof row[key] != 'ARRAY' ) row[key]= [row[key]]\n        if( typeof row[key] === \"ARRAY\" ) row[key].push(value)\n        else row[key] = value;\n      }\n      // include keys even for empty values\n      for(let key of wanted){\n        key = key.replace(/^\\?/,'');\n        row[key] = row[key] || \"\"\n      }\n      table.push(row);\n    }\n    if(!table.length) console.log('No results!');\n    return table;\n   }\n   catch(e){console.log(e)}\n  }\nflatten(results,groupOn){\n  const newResults = {};\n  for(let row of results) {\n    let key = row[groupOn];\n    if(!newResults[key]) newResults[key]={};\n    for(let k of Object.keys(row)){\n      if(!newResults[key][k]) {\n        newResults[key][k]=row[k];\n        continue;\n      }  \n      if(newResults[key][k].includes(row[k])) continue;\n      if(typeof newResults[key][k]!=\"object\") newResults[key][k]=[newResults[key][k]]\n      newResults[key][k].push(row[k])\n    }\n  }\n  results = [];\n  for(let n of Object.keys(newResults)){\n    results.push(newResults[n])\n  }\n  return results;\n} \n\n} // class Sparql  \n\n","export class Table {\n  render(options) {\n    let results = options.parts;\n    if(!results || !results.length) {\n      console.log(\"No results!\");\n      return document.createElement('SPAN');\n    }\n    if(options.sortOn) {\n//      results.sort((a,b)=> a[options.sortOn] - b[options.sortOn] )\n      results = results.reverse();\n    }\n    let table = document.createElement('TABLE');\n    let columnHeaders = Object.keys(results[0]);\n    let headerRow = document.createElement('TR');\n    for(let c of columnHeaders){\n      let cell = document.createElement('TH');\n      cell.innerHTML = c;\n      cell.style.border=\"1px solid black\";\n      cell.style.padding=\"0.5em\";\n      cell.style.background=options.unselBackground;\n      cell.style.color=options.unselColor;\n      headerRow.appendChild(cell);\n    }\n    table.appendChild(headerRow);\n    for(let row of results){\n      let rowElement = document.createElement('TR');\n      for(let col of columnHeaders){\n        if(options.cleanNodes){\n          row[col] = row[col].replace(/.*\\#/,'').replace(/.*\\//,'');\n        }\n        let cell = document.createElement('TD');\n        cell.innerHTML = row[col];\n        cell.style.border=\"1px solid black\";\n        cell.style.padding=\"0.5em\";\n        cell.style.backgroundColor=options.background;\n        cell.style.color=options.color;\n        rowElement.appendChild(cell);\n      }\n      table.appendChild(rowElement);\n    }\n    table.style.borderCollapse=\"collapse\";\n    return table;\n  }\n}\n// ENDS\n","import * as u from '../utils.js';\n/*\n  form.render()   // define options via Javascript parameters\n  form.fromUrl()  // define options via ui:Component file\n  form.fromMem()  // define options via a ui:Component string\n\n*/\nexport class Form {\n\n  /**\n   * @param {String}      form - the URL of the form definition document\n   * @param {String}      formSubject - the data for the form\n   * @param {String}      [formString] - a string form definition\n   * @param {HTMLElement} [dom=document] - DOM container to hold form\n   * @param {Boolean}     [forceReload] - empty store before loading\n   * @param {String}      [formResultDocument] - place to store form results\n   * @param {Function}    [script] - Javascript to execute on form change\n   * @returns an HTML DIV element containing the form\n   */\n  async fromURL(url){\n    let node = UI.rdf.sym(url);\n    await UI.fetcher.load(node);\n    return await this.render({\n                form : url,\n         formSubject : u.getProperty(node,'ui:formSubject'),\n              script : u.getProperty(node,'ui:script'),\n      resultDocument : u.getProperty(node,'ui:formResultDocument'),\n    });\n  }\n  async render(o){\n    const dom = o.dom || document;\n    const container = document.createElement(\"DIV\");\n    container.classList.add('uic-form');\n    let form = UI.rdf.sym(o.form);\n    let subject;\n    if(o.formSubject) subject = UI.rdf.sym(o.formSubject) ;\n    if(o.formString){\n      UI.rdf.parse(string,UI.store,o.form,'text/turtle');\n    }\n    else await UI.store.fetcher.load(o.form);\n    if(!subject){\n       let fSubj = UI.rdf.sym('http://www.w3.org/ns/ui#formSubject');\n       subject = UI.store.any(form,fSubj)\n    }\n    if(o.forceReload){ \n      if(subject && subject.doc) UI.store.removeDocument(subject.doc());\n    }\n    if(subject) await UI.store.fetcher.load(subject.doc());\n    else {\n      container.innerHTML=\"ERROR : Could not load form subject \"\n      return container;\n    }\n    const title = document.createElement(\"H2\");\n    let doc = o.formResultDocument;\n    if(subject && !doc && subject.doc) doc = subject.doc();\n    const script = o.script || function(){};\n    try {\n      UI.widgets.appendForm(dom, container, {}, subject, form, doc, script);\n    }\n    catch(e){\n       container.innerHTML = \"FORM ERROR:\"+e;\n    }  \n    return container;\n  }\n\n}\n\n/* OLD\n  async render(solidUI,options){\n    const container = document.createElement(\"DIV\",'uic-form');\n    const dom = window.document;\n    const form = await solidUI.loadUnlessLoaded(options.form);\n    await solidUI.loadUnlessLoaded(options.formSubject);\n    const subject = await solidUI.loadUnlessLoaded(options.formSubject);\n    if(!subject) return console.log(\"ERROR : Couldn not load form subject \",options.formSubject)\n    let doc = options.formResultDocument;\n    if(!doc && subject.doc) doc = subject.doc();\n    const script = options.script || function(){};\n    try {\n      UI.widgets.appendForm(dom, container, {}, subject, form, doc, script);\n    }\n    catch(e){return console.log(e)}  \n    if(options.onchange) {\n      const vals = container.querySelectorAll('.formFieldValue button');\n      for(let v of vals){\n        v.onclick = \"alert(3)\";\n      }\n    }\n    return container;\n  }\n\n*/\n","/*\n  show[rdf|markdown|graphviz](uri,string,targetSelector)\n  mungeLabel(label)\n  PUT(url,content,contentType)\n*/\nimport {Sparql} from './model/sparql.js';\nimport {Table} from './view/table.js';\nimport {Form} from './view/form.js';\n//import mime from \"https://cdn.skypack.dev/mime\";\n\nexport class CU {\n\n  UIO = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n  ISA = UI.rdf.sym(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\");\n  PIM = UI.rdf.Namespace(\"http://www.w3.org/ns/pim/space#\");\n\nnewElement(tag,id,classList,value){\n   let thing = document.createElement(tag);\n   if(id) thing.id = id;\n   if(classList) thing.classList = classList;\n   if(value) thing.value = value;\n   return thing;\n}\n\n  getProperty(subject,curie){\n    let [vocab,predicate] = curie.split(/:/);\n    return UI.store.any(subject,UI.ns[vocab](predicate)) || \"\";\n  }\n  getProperties(subject,curie){\n    let [vocab,predicate] = curie.split(/:/);\n    return UI.store.each(subject,UI.ns[vocab](predicate))  || [];\n  }\n  getValues(subject,curie){\n    let all = [];\n    let some = this.getProperties(subject,curie) || [];\n    for(let one of some){\n      all.push(one.value);\n    }\n    return all;\n  }\n\n  getObjects(subject,predicate){\n    return UI.store.each(subject,predicate).map((s)=>{return s.value});\n  }\n  getObject(subject,predicate){\n    let val = UI.store.any(subject,predicate);\n    return val && val.value ?val.value :\"\";\n  }\n\n  /*\n  displays rendered component in targetSelector if it is not null\n  returns rendereed component as an HTML-element\n\n  renderFromURL(url,targetSelector,forceReload);\n   \n\n  load from URL - renderComponent({url:\"\"});\n  load from STRING - renderComponent({url:\"\",string:\"\"});\n  load from HTML-ELEMENT - renderComponent({element:\"\"});\n\n    1. loads from url, string, or html-element\n       * if string, parses it into store\n       * else if !url, gets url from element dataset, loads into store\n       * else if !string && !element loads url into store\n       * if forceReload, does store.removeDocument before loading\n    2. finds subject from url or #this\n       * if url contains #, use it as subject\n       * else use url+#this as subject\n    3. \n \n            loads uri into store\n\n   renderComponent({\n     url,\n     string,\n     element,\n     forceReload,\n   })\n     \n  async renderComponent(url,string,element){\n    url = url.value ?url.value :UI.rdf.sym(url)\n    let uiType = this.getUItype(url);\n    let mainSubject = UI.store.rdf.sym( url.match(/\\#/) ?url :url+\"#this\" );\n    let node = await this.crossLoad(url,string,forceReload);\n    let subjectType = this.getUItype(mainSubject);\n  }\n   */\n\n  menuize(buttonGroupElement){\n    buttonGroupElement = document.querySelector(buttonGroupElement);\n    if(!buttonGroupElement) return;\n    let buttons = buttonGroupElement.querySelectorAll('BUTTON');\n    for(let b of buttons){\n      b.addEventListener('click',(e)=>{\n        let clicked = e.target;\n        for(let b2 of buttons){ b2.classList.remove('selected') }\n        b.classList.add('selected');\n      });\n    }\n  }\n\n  findType(uri,string){\n    uri ||= sourceFile;\n    let type = uri.replace(/\\#.*/,'').replace(/\\?.*/,'').replace(/.*\\./,'');\n    if(type.match(/(md)|(markdown)/)) return \"markdown\";\n    if(type.match(/(dot)|(gv)/)) return \"graphviz\";\n    if(type.match(/(ttl)|(rdf)|(n3)/)) return \"rdf\";\n    if(type.match(/(html)|(css)|(js)/)) return type;\n    return \"unknown\";\n  }\n\n  async show(type,uri,string,targetSelector,forceReload){\n    if(type.match(/(turtle)|(rdf)|(n3)/)) type = \"rdf\";\n    if(type.match(/image/)) type = \"image\";\n    if(type.match(/video/)) type = \"video\";\n    if(type.match(/audio/)) type = \"audio\";\n    if(type.match(/graphviz/)) type = \"graphviz\";\n    type = type.replace(/.*\\//,'');\n    if(this._show[type])\n       return await this._show[type](uri,string,targetSelector,forceReload);\n  }\n\n  _show = {\n\n  image : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrc(uri,targetSelector);\n  },\n  pdf : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrc(uri,targetSelector);\n  },\n  video : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrcDoc(`<video controls=\"yes\" src=\"`+uri+`\" style=\"max-width:100vw;max-height:100vh\"></video>`,targetSelector);\n  },\n  audio : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrcDoc(`<audio controls=\"yes\" src=\"`+uri+`\" style=\"margin-top:2em;\"></audio>`,targetSelector);\n  },\n  html : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) return this.showIframeSrcDoc(string,targetSelector);\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = string;\n    return div;\n  },\n  graphviz : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) {\n      document.querySelector(targetSelector).innerHTML = \"\";\n      try {\n        d3.select(targetSelector).graphviz().renderDot(string, ()=>{} );\n      } catch(e){ alert(e); }\n    }\n    else {\n      let div = document.createElement(\"DIV\");\n      try {\n        d3.select(div).graphviz().renderDot(string, ()=>{} );\n      } catch(e){ alert(e); }\n      return div;\n    }\n  },\n  markdown : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    // string ||= await this.loadFile(uri);\n    let parsedString = marked.parse(string);\n    if(targetSelector){\n      return this.showIframeSrcDoc(parsedString,targetSelector);\n    }\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = parsedString;\n    return div; \n  },\n  Form : async(subject,targetSelector,forceReload)=>{\n    let uri = subject.doc ?subject.doc() :subject;\n    if(uri.value) uri = uri.value;\n    const form = await (await new Form()).render({ form:subject.value });\n    if(targetSelector){\n      document.querySelector(targetSelector).innerHTML = \"\";\n      document.querySelector(targetSelector).appendChild(form);\n      // return await this.showIframeSrcDoc( form.outerHTML, targetSelector );\n      // let src =  \"showForm.html?uri=\" + encodeURI(uri) ;\n      // return this.showIframeSrc( src, targetSelector );\n    }\n    return form;\n  },\n  SparqlQuery : async(subject,targetSelector,forceReload)=>{\n    let e = (UI.store.any(subject,this.UIO('endpoint'),null)||\"\").value;\n    let q = (UI.store.any(subject,this.UIO('query'),null)||\"\").value;\n    let table = (new Table()).render({\n      parts : await (new Sparql()).sparqlQuery(e,q,forceReload),\n      cleanNodes : true,\n      sortOn : 'term'\n    });\n    if(targetSelector) {\n      document.querySelector(targetSelector).innerHTML=\"\";\n      document.querySelector(targetSelector).appendChild(table);\n    }\n    return table;\n  },\n  DataTemplate : async(subject,targetSelector,store)=>{\n    store ||= UI.store;\n    let query =  this.getUIterm(subject,'query');\n    let endpoint =  this.getUIterm(subject,'endpoint');\n    let template = this.getUIterm(subject,'template');\n    let data = await (new Sparql()).sparqlQuery(endpoint,query,store);\n    let interpolated = \"\";\n    for(let row of data.reverse()){\n      interpolated += template.interpolate(row);\n    }\n    if(targetSelector) {\n      this.showIframeSrcDoc(interpolated,targetSelector);\n    }\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = interpolated;\n    return div;\n  },\n  PageDefinition : async(subject,targetSelector)=>{\n    subject = this.getMainSubject(subject);\n    let DM = new DOMParser();\n    let XS = new XMLSerializer();\n    let templateURL = this.getUIterm(subject,'pageTemplate');\n    let templateInfo = await this.loadFile(templateURL)\n    let dom = DM.parseFromString( templateInfo.body,\"text/html\");\n//alert( XS.serializeToString(dom) );\n    let parts =  UI.store.match(subject,this.UIO('component'));\n    for(let p of parts){\n      p=p.object;\n      let component = \"\";\n      let label, url;\n        label = this.getObject(p,this.UIO(\"label\"));\n        url = this.getObject(p,this.UIO(\"href\"));\n/*\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      for(let pstmt of p){\n        if(pstmt.predicate.value.match(\"label\")) label = pstmt.object.value;\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      }\n*/\n      let i = this.fileInfo(url);\n      if(i && label)\n        dom.querySelector('#'+label).appendChild( await this.show(i.contentType,url) );\n    }\n    dom = XS.serializeToString(dom);    \n    if(targetSelector) await this.showIframeSrcDoc(dom,targetSelector);\n    return dom;\n/*\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = this.getUIterm(subject,'template');\n    let x = this.getUIterm(subject,'template');\nalert(x)\n    let parts =  this.getUIterm(subject,'parts');\n    for(let p of parts){\n      let component = \"\";\n      let label, url;\n      for(let pstmt of p){\n        if(pstmt.predicate.value.match(\"label\")) label = pstmt.object.value;\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      }\n      let type = this.findType(url);\n      div.querySelector('#'+label).appendChild( await this.show(type,url) );\n    }\n    if(targetSelector) await this.showIframeSrcDoc(div.innerHTML,targetSelector);\n    return div;\n*/\n  },\n  rdf : async (uri,string,targetSelector,forceReload) => {\n    try {\n      let mainSubject = UI.rdf.sym( uri.match(/\\#/) ?uri :uri+\"#this\" );\n      let node = mainSubject;\n      await this.crossLoad(uri,string,forceReload);\n      let subjectType = this.getUItype(mainSubject);\n      if(subjectType && this._show[subjectType]) {\n        return await this._show[subjectType](mainSubject,targetSelector,forceReload);\n      }\n      let subjects = UI.store.each(null,null,null,node.doc());\n      let visitedSubject = {}\n      let str = \"\";\n      for(let subject of subjects){\n        if(visitedSubject[subject.value]===1) continue;\n        visitedSubject[subject.value]=1;\n        str += `<br><div style=\"font-weight:bold\">${this.mungeLabel(subject)}</div>`;\n        let stmts = UI.store.match(subject,null,null,node.doc());\n        for(let stmt of stmts){\n          let p = this.mungeLabel(stmt.predicate);\n          let o = stmt.object.value;\n          str += `&nbsp;&nbsp;&nbsp;<b>${p}</b> : ${o}<br />`\n        }\n      }\n      if(targetSelector) {\n        return this.showIframeSrcDoc(str,targetSelector);\n      }\n      let div = document.createElement(\"DIV\");\n      div.innerHTML = str;\n      div.style.width=\"640px;\";\n      return div;\n    } catch(e) { alert(e); return e; }\n  },\n}\n\nmungeHash(uri){\n  return UI.rdf.sym( uri.match(/\\#/) ?uri :uri+\"#this\" );\n}\nasync dataTemplate2Iframe(mainSubject,targetSelector){\n  let query =  this.getUIterm(mainSubject,'query');\n  let endpoint =  this.getUIterm(mainSubject,'endpoint');\n  let template = this.getUIterm(mainSubject,'template');\n  let data = await (new Sparql()).sparqlQuery(endpoint,query,UI.store);\n  let interpolated = \"\";\n  for(let row of data.reverse()){\n    interpolated += template.interpolate(row);\n  }\n  this.showIframeSrcDoc(interpolated,targetSelector);\n  return interpolated;\n}\nasync template2Iframe(mainSubject,targetSelector){\n       let queryURL =  this.getUIterm(mainSubject,'query');\n        await UI.store.fetcher.load(queryURL);\n        let querySubject = UI.rdf.sym(queryURL+\"#this\");\n        let endpoint =  this.getUIterm(querySubject,'endpoint');\n        let query =  this.getUIterm(querySubject,'query');\n        let before =  this.getUIterm(mainSubject,'before');\n        let beforeQueryURL =  this.getUIterm(mainSubject,'beforeQuery');\n        await UI.store.fetcher.load(beforeQueryURL)\n        let beforeQuerySubject = UI.rdf.sym(beforeQueryURL+\"#this\");\n        let beforeEndpoint=this.getUIterm(beforeQuerySubject,'endpoint');\n        let beforeQuery=this.getUIterm(beforeQuerySubject,'query');\n        let beforeData = await (new Sparql()).sparqlQuery(beforeEndpoint,beforeQuery,UI.store);\n        before = before.interpolate(beforeData[0])\n        let data = await (new Sparql()).sparqlQuery(endpoint,query,UI.store);\n        let recurring =  this.getUIterm(mainSubject,'recurring');\n        let after =  this.getUIterm(mainSubject,'after');\n        let middle = \"\";\n        for(let row of data.reverse()){\n          middle += recurring.interpolate(row);\n        }\n        let interpolated = before + middle + after;\n        this.showIframeSrcDoc(interpolated,targetSelector);\n        return interpolated;\n}\nmakeIframe(){\n  let iframe = document.createElement('IFRAME');\n  iframe.style = \"height:100%;width:100%;border:none\";\n  return iframe;\n}\nshow_iframe(iframe,targetSelector){\n  document.querySelector(targetSelector).innerHTML=\"\";\n  document.querySelector(targetSelector).appendChild(iframe);\n}\nshowIframeSrc(src,targetSelector){\n  let iframe = this.makeIframe();\n  iframe.src = src;\n  if(targetSelector) this.show_iframe(iframe,targetSelector);\n  else return iframe;\n}\nshowIframeSrcDoc(string,targetSelector){\n  let iframe = this.makeIframe();\n  iframe.srcdoc = string;\n  this.show_iframe(iframe,targetSelector);\n}\n\n  /* makeSelector(options,onchange,selected,targetSelector,size,)\n       options : array\n       onchange : function\n       selected : string,      // must be in options array\n       targetSelector : string // = a css selector e.g. \"#foo .bar\"\n     returns an HTML select element\n   */\n  makeSelector(options,onchange,selected,targetSelector,size){\n    let selectEl = document.createElement('SELECT');\n    for(let option of options){\n      let value,label;\n      if(typeof option===\"string\") value = label = option;\n      else {\n        value = option[0]\n        label = option[1]\n      }\n      label=(label||value).replace(/^http:\\/\\//,'').replace(/^https:\\/\\//,'');\n      if(!label.endsWith(\"/\"))\n         label = label.replace(/.*\\//,'')\n      if(!label || !option) continue;\n      label ||= \"/\";\n      let optionEl = document.createElement('OPTION');\n//      optionEl.innerHTML = option.replace(/http[s]*:\\/\\/[^\\/]*\\//,'') || option;\n      optionEl.value = optionEl.title = value;\n      optionEl.innerHTML = label;\n      selectEl.appendChild(optionEl);\n    }\n\n    /* HIGHLIGHT SELECTED */\n    if(selected) selectEl.value = selected;\n    selectEl.value ||= selectEl.childNodes[0].value;\n\n    selectEl.addEventListener('click',async(e)=>{\n      onchange(e.target.value)\n    })\n    selectEl.addEventListener('change',async(e)=>{\n      onchange(e.target.value)\n    })\n    if(size) selectEl.size=size;\n    if(targetSelector) {\n      let targetEl = document.querySelector(targetSelector)\n      targetEl.innerHTML = \"\"\n      targetEl.appendChild(selectEl);\n    }\n    return selectEl;\n  }\n  getParent(url){\n    let parent = url.replace(/\\/$/,'').replace(/\\/[^\\/]*$/,'/');\n    return parent;\n  }\n  fileInfo(url){\n    if(!url) return;\n    if(typeof url!=\"string\") url = url.url || url.uri;\n    let newu;\n    try{ newu = new URL(url); }\n    catch(e){console.log(77,url,e); return {} };\n    let file = newu.pathname.replace(/.*\\//,'').replace(/\\.[^\\.]*$/,'');;\n    file = file===newu ?\"\" :file;\n    let ext = newu.pathname.replace(/.*\\//,'').replace(/.*\\./,'');\n    ext = ext===file ?\"\" :ext;\n    /*\n     * type is  the Ace-Editor type e.g. turtle, html, markdown\n     * contentType is Iana media type e.g. text/turtle, etc.\n    */\n    let type,contentType;\n    if(ext.match(/(md)|(markdown)/)) type = \"markdown\";\n    if(ext.match(/(dot|gv)/)) type = \"graphviz\";\n    if(ext.match(/(ttl|rdf|n3)/)) type = \"rdf\";\n    if(ext.match(/txt/)) { type=\"text\"; contentType=\"text/plain\" }\n    if(ext.match(/(html)|(css)|(js)/)) type = ext;\n    if(ext.match(/(gif|jpg|jpeg)/)) type = ext;\n    type ||= \"unknown\";\n    let path = newu.pathname.replace(/[^\\/]*$/,'');\n    file = decodeURI(file);\n    let isContainer = !file && path.endsWith(\"/\");\n    contentType = \"unknown\";    \n    if(isContainer) contentType = \"text/turtle\";\n    else if(window.mime) contentType = window.mime.getType(url);\n    let editable = contentType && !contentType.match(/(image|video|audio|unknown)/);\n    return {\n      url,\n      file,\n      path,\n      ext,\n      label : (file||path) + (ext ?\".\"+ext :\"\"),\n      editable,\n      type,         // markdown, graphviz, html, rdf ...\n      contentType,  // text/vnd.graphviz, text/turtle ...\n      host : newu.origin + \"/\",\n      isHidden : url.match(/\\/\\./) ?true :false,\n      isContainer,\n    }\n  }\n\n\nasync crossLoad(uri,string,forceReload){\n  if(forceReload) {\n//     UI.store.removeDocument(UI.rdf.sym(uri));\n  }\n  if(string) UI.rdf.parse(string,UI.store,uri,'text/turtle');\n  else await UI.store.fetcher.load(uri);\n  let i = this.fileInfo(uri);\n  i.contentType = \"text/turtle\";\n  i.type = \"rdf\";\n  i.editable = true;\n  return i;\n} \nasync loadFile(uri){\n  let fileInfo = this.fileInfo(uri);\n  try {\n     let response = await UI.store.fetcher.webOperation(\"GET\",uri);\n     if(response.ok) {\n       fileInfo.contentType = response.headers.get(\"Content-Type\");\n       fileInfo.editable = !fileInfo.contentType.match(/(image|video|audio|pdf|unknown)/);\n       fileInfo.body = response.responseText;\n       fileInfo.ok=response.ok\n     }\n     else alert(response.status)\n     return fileInfo\n  }\n  catch(e) { alert(e); return fileInfo }\n}\n\ngetUItype(subject){\n  subject = this.getMainSubject(subject);\n  let types = UI.store.each(subject,this.ISA,null);\n  for(let type of types){\n    if(type.value.match(/ui\\#/)) return type.value.replace(/.*\\#/,'');\n  }\n}\ngetUIterm(subject,term){\n   subject = this.getMainSubject(subject);\n   let val = UI.store.each(subject,this.UIO(term));\n   let newval = [];\n   if(val && val[0] && val[0].termType===\"Collection\"){\n     for(let e of val[0].elements){\n        newval.push( UI.store.match(e) );\n     }\n     return newval;\n   }\n   return val[0] ?val[0].value :val;\n}\ngetMainSubject(uri){\n  uri = uri.uri ?uri.uri :uri;\n  uri = uri.match(/\\#/) ?uri :uri+\"#this\";\n  try { return UI.rdf.sym(uri) }\n  catch(e){console.log(e)}\n}\nmungeLabel = (label)=>{ \n if(!label)return \"\";\n if(label.termType===\"Literal\"){\n    return `\"${label}\"`;\n  }\n  label = label.value.replace(/.*\\#/,'').replace(/.*\\//,'');\n  if(label===\"type\") label = \"a\";\n  return label;\n}\nmungeURL = (url)=>{\n  let URL = document.getElementById(url).value;\n  if(!URL.startsWith('http')){\n    URL = window.location.href.replace('index.html','')+URL;\n  }\n  return URL;\n}\nPUT = async (url,content,cType)=>{\n  url = url.replace(/\\#[^\\#]*$/,'')\n  try {\n    let response = await UI.store.fetcher.webOperation('PUT',url,{\n      contentType : cType,\n      body: content,\n    });\n    return(response);\n  }\n  catch(e) {return e;}\n}\n}\n\n/* https://stackoverflow.com/a/41015840/15781258\n * usage :\n *   const template = 'Hello ${var1}!';\n *   const data     = { var1: 'world'};\n *   const interpolated = template.interpolate(data);\n */\nString.prototype.interpolate = function(params) {\n  const names = Object.keys(params);\n  const vals = Object.values(params);\n  return new Function(...names, `return \\`${this}\\`;`)(...vals);\n}\n","import {CU} from    '../utils.js';\n\n/*\n *  myFeed = new Feed(solidUI,feedUri)\n *\n *  feedSelector()\n *  htmlDiv = feed.items2list() which calls feed.fetchAndParse()\n\nproxy\nhref || link\ndisplayType\nstandAlone\nlabel\n  selBackground\n  selColor\n  height\n  width\n\n */\n\n/*\n\n      \n*/\n\nexport class Feed {\n\n\nasync makeFeedSelector(topTopic,targetSelector,displayArea){\n\n  self = this;\n  self.displayArea = displayArea;\n\n\n  const u = new CU();\n  const bookm = UI.rdf.Namespace(\"http://www.w3.org/2002/01/bookmark#\");\n  const rdfs = UI.rdf.Namespace(\"http://www.w3.org/2000/01/rdf-schema#\");\n  let targetElement = document.body;\n\n  await u.crossLoad(topTopic);\n  topTopic = UI.rdf.sym(topTopic);\n  let topicNodes = UI.store.each(null,bookm('subTopicOf'),topTopic)\n  let topics = [];\n  for(let n of topicNodes){\n     topics.push([n.value, UI.store.any(n,rdfs('label')).value]);\n  }\n  let onchange = async(e)=>{await collectionSelector(e)};\n  let topicSelector = u.makeSelector(topics,onchange);\n  topicSelector.id=\"topicSelector\";\n  if(targetSelector){\n    targetElement = document.querySelector(targetSelector);\n    targetElement.innerHTML=\"\";\n    targetElement.appendChild(topicSelector);\n    targetElement.appendChild( u.newElement('SPAN','collectionHolder') );\n    targetElement.appendChild( u.newElement('DIV','itemSelector') );\n    await collectionSelector(topics[0][0]);\n  }\n  let selectors = targetElement.querySelectorAll('#feedMenu select')\n  for(let s of selectors){\n    s.style=\"display:block; width:100%;  padding:0.5rem; margin-bottom:1rem; border-radious:0.02rem;\";\n  }\n  return topicSelector;\n\n  async function collectionSelector(topTopic){\n    if(typeof topTopic === \"string\") topTopic = UI.rdf.sym(topTopic);\n    await u.crossLoad(topTopic);\n    let topicNodes = UI.store.each(null,bookm('hasTopic'),topTopic)\n    let collections = [];\n    for(let n of topicNodes){\n       let href = UI.store.any(n,bookm('recalls')).value;\n       let label = UI.store.any(n,rdfs('label')).value;\n       collections.push([href,label]);\n    }\n    let onchange = async(e)=>{\n       await itemSelector(e)\n    };\n    let colSelector = await u.makeSelector(collections,onchange,null,null,7);\n    colSelector.id=\"collectionSelector\";\n    let el = targetElement.querySelector('#collectionHolder');\n    el.innerHTML=\"\";\n    el.appendChild(colSelector);\n    let selectors = el.querySelectorAll('#feedMenu select')\n    for(let s of selectors){\n      s.style=\"display:block; width:100%;  padding:0.5rem; margin-bottom:1rem; border-radious:0.02rem;\";\n  }\n   await itemSelector(collections[0][0]);\n  }\n\n  async function itemSelector(topTopic){\n    let elm = document.getElementById('itemSelector');\n    elm.innerHTML=\"\";\n    elm.appendChild( await self.items2list({href:topTopic})  );\n    return;\n    if(typeof topTopic === \"string\") topTopic = UI.rdf.sym(topTopic);\n    await u.crossLoad(topTopic);\n    let topicNodes = UI.store.each(null,bookm('hasTopic'),topTopic)\n    let collections = [];\n    for(let n of topicNodes){\n       let href = UI.store.any(n,bookm('recalls')).value;\n       let label = UI.store.any(n,rdfs('label')).value;\n       collections.push([href,label]);\n    }\n    let onchange = async(e)=>{await itemDisplay(e)};\n    let colSelector = await u.makeSelector(collections,onchange,wanted,targetSelector);\n    let el = document.querySelector(targetSelector);\n    el.appendChild(colSelector);\n    await itemSelector(collections[0][0],wanted,targetSelector);\n  }\n\n}\n\n  async fetchAndParse(feedUri,proxy){\n\n    // fetch feed URI & parse into a Dom structure\n    //\n    proxy = typeof proxy===\"undefined\" ?\"https://solidcommunity.net/proxy?uri=\" :proxy;\n    feedUri = proxy + encodeURI( feedUri );\n\n    let response = await fetch( feedUri )\n    let feedContent = await response.text();\n    const domParser = new window.DOMParser();\n    let feedDom = domParser.parseFromString(feedContent, \"text/xml\")\n\n    // find items (RSS) or entries (Atom)\n    //\n    let items = feedDom.querySelectorAll(\"item\") || null;\n    items = items.length<1 ?feedDom.querySelectorAll(\"entry\") :items;\n\n    // parse items\n    //\n    let parsedItems=[];\n    items.forEach( el => {\n\n      // find item link, account for specific kinds of quirks\n      //\n      let link = el.querySelector(\"link\").innerHTML;\n      // vox\n      if(!link) link = el.querySelector('link').getAttribute('href');\n      // reddit\n      if(!link || link.match(/ /)){\n        link = el.querySelector('content').innerHTML.replace(/.*\\[link\\]/ ,'').replace(/a href=\"/,'').replace(/\"&gt;.*/,'').replace(/.*&lt;/,'');\n      }\n      // engadget\n      if(!link.match(/^http/)) link = link.replace(/.*\\[CDATA\\[/,'');\n\n      // always use https, not http\n      link = link.replace(/^http:/,'https:');\n\n      // get the title\n      let title = el.querySelector(\"title\").innerHTML;\n      title = title.replace(/^\\<\\!\\[CDATA\\[/,'');\n      title = title.replace(/\\]\\].*\\>/,'').trim();\n\n      parsedItems.push({title,link});\n    });\n    return parsedItems;\n  }  // END OF fetchAndParse()\n\n\n  async items2list(json,solidUI){\n    json.proxy ||= \"https://solidcommunity.net/proxy?uri=\";\n    let items = \"\";\n    let externalLinkIcon = UI.icons.iconBase+`/noun_189137.svg`;\n    externalLinkIcon = `<img src=\"${externalLinkIcon}\" style=\"width:1em;height:1em;display:inline-block; padding-left:0.4em;opacity:0.5\">`;\n    for(let i of await this.fetchAndParse((json.href||json.link),json.proxy)){\n      if(json.displayTarget===\"window\"){\n/*\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\">\n            <a href=\"${i.link}\" target=\"_BLANK\" property=\"rss:title\">\n              ${i.title}\n            </a>\n          </li>\n        `;\n*/\n      }\n      else {\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\" style=\"display:none;background:green;border:1px solid grey;\">\n            <a href=\"${json.proxy+i.link}\" target=\"#display\" property=\"rss:title\" style=\"background:#999;display:inline-block\">\n               ${i.title}\n            </a>\n            <a href=\"${i.link}\" class=\"skipMunge\" target=\"_BLANK\" class=\"external\">${externalLinkIcon}</a>\n          </li>\n        `;\n      }\n    }\n    const wrapper = document.createElement('DIV');\n    wrapper.property = \"xmlns:rss\";\n    wrapper.content = \"http://purl.org/rss/1.0/\";\n    if(json.standAlone) {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n          <b property=\"rss:title\">${json.label}</b>\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n\n    wrapper.querySelector('B').style=`padding:1em;padding-right:0;background:${json.selBackground};color:${json.selColor};border:1px solid grey;width:100%;display:inline-block`;\n    }\n    else {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n<!--          <div property=\"title\" style=\"background:#d0d0d0;padding:1em;\">${json.label}</div>-->\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n    wrapper.querySelector('UL').style=`padding:0;padding-left:0;list-style:none;margin-top:0;width:100%;`;\n    }\n    wrapper.querySelector('UL').style=`padding:0;border:1px solid grey;list-style:none;margin-top:0;width:100%;height:${json.height};overflow-y:auto;`;\n    let anchors = wrapper.querySelectorAll('A');\n    for(let anchor of anchors){\n      anchor.style=\"text-decoration:none;\"\n      anchor.onclick = (e) => {\n        e.preventDefault();\n        let iframe = document.createElement('IFRAME');\n        iframe.src = e.target.href;\n        iframe.height=\"100%\";\n        iframe.width=\"100%\";\n        iframe.style.border=\"none\";\n        let area = document.querySelector(self.displayArea);\n        area.innerHTML = \"\";\n        area.appendChild(iframe);        \n      }\n    }\n    let listItems = wrapper.querySelectorAll('LI');\n    for(let li of listItems){\n      li.style=\"padding:0.5em;border-bottom:1px solid grey\";\n    }\n    if(json.width) wrapper.style.width = json.width;\n    return wrapper;\n  }\n}\n\n  async function initFeeds(){\n    let elms = document.querySelectorAll('[data-suicFeedMenu]');\n    for(let e of elms){\n      let topTopic = e.dataset.suicfeedmenu;\n      if(topTopic.startsWith('/')) topTopic = window.origin + topTopic;\n      let displayArea = e.dataset.display;\n      let menuArea = '#' + e.id;\n      const myFeed = new Feed();\n      await myFeed.makeFeedSelector(topTopic,menuArea,displayArea);\n    }\n  }\n  initFeeds();\n","export class Accordion {\n  async render(solidUI,json) {\n    const parts = json.parts;\n    const accordion = solidUI.createElement('DIV','accordion');\n    if(!parts || !parts.length) return accordion;\n    for(let row of parts){\n       let item = solidUI.createElement( 'DIV' );\n       let rowhead = solidUI.createElement( 'DIV','' );\n       let name = solidUI.createElement('SPAN','',row.label || row.topic) ;\n       name.style.display=\"table-cell\";\n       name.style.width=\"100%\";\n       rowhead.appendChild(name);\n       let caret = solidUI.createElement('SPAN','caret-down','\\u2304') ;       \n       caret.style.display=\"table-cell\";\n       caret.textAlign=\"right\";\n       rowhead.appendChild(caret);\n       rowhead.style.backgroundColor = json.unselBackground;\n       rowhead.style.color = json.unselColor;\n       rowhead.style.padding=\"0.75em\";\n       rowhead.style.border=\"1px solid grey\";\n       rowhead.style.cursor = \"pointer\";\n       let rowContent = solidUI.createElement( 'DIV');\n       if(row.content) rowContent.innerHTML = row.content;\n       else {\n        console.log(json)\n        for(let i=0;i<row.linkLabel.length;i++){\n          let label = row.linkLabel[i];\n          let link = row.linkUrl[i];\n          let button=solidUI.createElement('BUTTON','',label);\n          button.setAttribute('data-link',link) ;\n          button.style.width=\"100%\";\n          button.style.border=\"none\";\n          button.style.background=\"transparent\";\n          button.style.marginBottom=\"0.25em\";\n          button.style.cursor=\"pointer\";\n          button.onclick = (e) => {\n            showByClass(e);\n          }\n          rowContent.appendChild(button);\n        }\n       }\n       rowContent.style.padding=\"0.75em\";\n       rowContent.style.border=\"1px solid grey\";\n       rowContent.style.borderTop=\"none\"; \n       rowContent.style.display = \"none\";\n       rowhead.onclick = (e)=>{\n         let showing = rowContent.style.display === \"block\" ;\n         let items = accordion.children;\n         for(let i of items) {\n           i.children[1].style.display=\"none\";\n         }\n         rowContent.style.display = showing ?\"none\" :\"block\";\n       }\n       rowContent.style.backgroundColor = json.background;\n       rowContent.style.color = json.color;\n       item.appendChild(rowhead);\n       item.appendChild(rowContent);\n       item.style.marginBottom = \"1em\";\n       accordion.appendChild(item);\n    }\n    solidUI.simulateClick(accordion.querySelector('DIV DIV DIV'))\n    return await solidUI.initInternal(accordion);  \n  }\n}\n","import {createLoginBox,applyProfile} from '../databrowser.js';\n\nexport class App {\n  async render(solidUI,app){\n\n    // GET/SET DEFAULTS\n    //\n    app = solidUI.setDefaults(app);\n    if(app.fullPage){\n      window.addEventListener('resize',()=>{\n         app = mainHeight(app);\n         let mm = document.getElementById('mainMain')\n         let tab = document.getElementById('suicTabulator')\n         if(mm) mm.style.height = app.mainHeight;\n         if(tab) tab.style.height = app.mainHeight;\n      });\n      document.body.style.overflow=\"hidden\";\n    }\n\n    // FIND NUMBER OF PIXELS IN 1 REM - VARIES WITH BROWSER/USER SETTINGS\n    function rem2px(){\n      let el = document.createElement('DIV');\n      el.style=\"height:1rem\";\n      document.body.appendChild(el);\n      let remSize = el.clientHeight;\n      document.body.removeChild(el);\n      return(remSize);\n    }\n    // SET BODY HEIGHT TO WINDOW HIEGHT MINUS HEADER + MENU \n    function mainHeight(app){\n      let rem = rem2px();\n      app.menuHeight = 2*rem;\n      app.headerHeight = 6*rem;\n      window.SolidAppContext = { scroll : app.headerHeight }\n      app.mainHeight = ( window.innerHeight-app.headerHeight )\n      app.headerHeight = app.headerHeight.toString()+'px';\n      app.mainHeight = app.mainHeight.toString()+'px';\n      return app;\n    }\n    app = mainHeight(app);\n\n    // DISPLAY HEADER IF app.logo OR app.title\n    //\n    app.logo ||= \"\";\n    app.title ||= \"\";\n    app.headerHeight = ( app.logo || app.title || app.adminMenu ) ?app.headerHeight : \"0\";\n\n    // DISPLAY MENU AT TOP OR LEFT DEPENDING ON app.orientation\n    //\n    app.leftMenu = \"\" ;\n    app.siteMenu = \"\" ;\n    if(app.orientation===\"horizontal\"){\n      app.leftMenuStyle = \"display:none\";\n    }\n    else {\n      app.leftMenuStyle = `\n        display:block;\n        width:36vw !important;\n        height:${app.mainHeight};\n        overflow-y:scroll;\n        margin:0;\n        padding:0;\n      `;\n    }\n\n    let appString = await this.getHTML(app);\n    let element = solidUI.createElement('SPAN','',appString);\n    let solidLogo = element.querySelector('#solidLogo')\n    if(solidLogo) solidLogo.src = 'https://solidproject.org/assets/img/solid-emblem.svg';\n\n//    if(typeof app.currentPodMenu==='object')app.currentPodMenu.target = element.querySelector('.main');\n    let menuElement = element.querySelector(\"#currentPodMenu\");\n    if( app.orientation===\"vertical\"){\n      menuElement = element.querySelector(\"NAV\");\n    }\n    const menu = await solidUI.processComponent(menuElement,app.currentPodMenu);\n    if(menu && menuElement) menuElement.appendChild(menu);\n    if(app.userMenu) {\n      const amenu = await solidUI.processComponent(menuElement,app.userMenu);\n      let umenu = element.querySelector('#userMenu')\n      if( umenu) umenu.appendChild(amenu);\n    }\n    if(app.loginBox) await createLoginBox(element);\n    await applyProfile(element); // munge site menu\n    if(app.initialContent) {\n      let content = await solidUI.getComponentHash(app.initialContent);\n      content = content.content.interpolate(solidUI.vars)\n      let main = element.querySelector('#mainMain');\n      if(main) main.innerHTML = content;\n    }\n    return element;\n  }\n\nrem2vw(rem) {\n  const viewportWithoutScroll = document.body.clientWidth;\n  const pxPerVw = 100/viewportWithoutScroll;\n  return( rem * pxPerVw);  \n}\nrem2vh(rem) {\n  const viewportWithoutScroll = window.innerHeight;\n  const pxPerVw = 100/viewportWithoutScroll;\n  return( rem * 16 * pxPerVw);  \n}\n  async getHTML(app){ \n     app.leftColumnColumnStyle ||= \"display:none\";\n     app.leftColumnColumnMenu ||= \"\";\n     app.siteMenu ||= \"\";\n     app.leftColumnColumnStyle ||= \"\";\n     app.iframeSrc ||= \"\";\n     app.iframeContent ||= \"\";\n     app.logoStyle = `\n             height: 3rem;\n            display: inline-block;\n       padding-left: 0.5rem;\n     `;\n     app.titleStyle = `\n       display:inline-block;\n       vertical-align:top; align:left;\n       font-size: 2rem;\n       padding-top: 0.4rem;\n       padding-left:1rem;\"\n     `;\n     app.appStye = `\n              display: flex;\n       flex-direction: column;\n                width: 100%;\n               height: 100%;\n     `;\n      app.mainStyle = `\n        padding:0rem;\n        width:100%;\n        overflow:scroll;\n        position:absolute;\n        top:${app.headerHeight} !important;\n        left:0;\n        height:${app.mainHeight};\n     `;\n     if(app.theme) {\n        try {      \n//          let response = await panes.UI.store.fetcher.webOperation('GET',app.theme);\n          let response = await window.fetch(app.theme);\n          let content = await response.text();\n          content = solidUI.fillTemplate(content,[app]);\n          return await content;\n        }\n        catch(e){console.log(e)}\n     }\nreturn \"\";\n     return `\n<!--APP-->\n<div class=\"solid-uic-app solid-main-app\">\n\n    <!--BANNER-->\n    <div class=\"app-banner\">\n\n        <!--USER IMAGE & NAME-->  \n        <img id=\"currentPodLogo\" src=\"\">\n        <div id=\"currentPodTitle\"></div>\n\n\n        <!--ADMIN MENU, LOGIN, SOLID LOGO-->\n        <div style=\"background:${app.unselBackground};text-align:center;position:absolute;top:0.5rem;right:7rem;\"><span id=\"adminMenu\" style=\"white-space: nowrap;\"></span> </div>\n        <div id=\"loginArea\"></div>\n        <img src=\"${app.logo}\" style=\"height:7rem;position:absolute;top:-0.5rem;right:-0.5rem\">\n\n        <!--PUBLIC MENU-->\n        <div id=\"currentPodMenu\" style=\"white-space:nowrap;position:absolute;top:3rem;left:7.4rem;\">${app.siteMenu}</div>\n\n    </div><!--BANNER-->\n\n    <!--MAIN WRAPPER-->\n<!--    <div style=\"display:flex;flex-direction:row;width:100%;height:100%;\"> -->\n    <div style=\"width:100%;height:100%;min-height:0;\">\n\n        <!-- LEFT COLUMN MENU (IF EXISTS) -->\n        <div class=\"leftColumn\" style=\"${app.leftMenuStyle}\">${app.leftMenu}</div>\n\n        <!--MAIN MAIN-->\n        <div id=\"mainMain\" style=\"min-height:0;${app.mainStyle}\"></div>\n\n        <!--MAIN TABULATOR-->\n            <div class=\"TabulatorOutline\" role=\"main\" id=\"suicTabulator\" style=\"${app.mainStyle}\">\n                <table id=\"outline\"></table>\n                <div id=\"GlobalDashboard\"></div>\n            </div>\n\n    </div><!--MAIN WRAPPER-->\n\n</div><!--APP-->\n<style>\n  #suicTabulator{\n    top:${app.headerHeight} !important;\n    overflow:scroll !important;\n    min-height: 0; \n  }\n  #suicTabulator table {\n    background:#7e7e7e !important;\n    color:white !important;\n  }\n  .solid-main-app {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n  }\n  .solid-main-app .app-banner {\n     width:100%;\n     display:flex;\n     background:${app.unselBackground};\n     color:black;\n  }\n  .solid-main-app input[type=\"button\"]:hover {\n    background:${app.selBackground};\n    color:${app.selColor};\n  }\n  .solid-main-app #currentPodTitle {\n    left:8rem;\n    font-size:1.3rem;\n    position:absolute;\n    top:1rem;\n  }\n  .solid-main-app #currentPodLogo {\n    height:${app.headerHeight}\n  }\n</style>\n\n    `;\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","export class Menu {\n\n  async render( solidUI, json,element ){\n    if(typeof json==='string'){\n      json = await solidUI.processComponent(element,json);\n    }\n    let nav     = solidUI.createElement('NAV','solid-uic-dropdown-menu')\n    let topUL   = document.createElement('UL')\n    let mainDisplay = document.createElement('DIV')\n//    nav.style.width=\"100%\";\n    nav.style.background=json.unselBackground;\n    nav.style.color=json.unselColor;\n//    nav.style.paddingLeft=\"1rem\";\n//    nav.style.paddingRight=\"1em\";\n//    topUL.style.width=\"100%\";\n    mainDisplay.style.width=\"100%\";\n    mainDisplay.style.backgroundColor = json.background;\n    mainDisplay.style.color = json.color;\n    mainDisplay.innerHTML=\"\";\n    mainDisplay.classList.add('main');\n    nav.appendChild(topUL)\n    for(var i of json.parts){\n      topUL.appendChild( await this.renderMenuItem(i,json,mainDisplay) )\n    }\n    const wrapper = solidUI.createElement('SPAN');\n    nav.style.display=\"inline-block\";\n    nav.style.textAlign=json.position;\n    topUL.style.textAlign=json.position;\n    wrapper.appendChild(nav);\n    wrapper.appendChild(mainDisplay);\n    return(wrapper);\n  }\n\n  async renderMenuItem(i,json,mainDisplay){\n    if(i.menu && i.menu.type && i.menu.type === \"SparqlQuery\"){\n      let menu = await solidUI.processComponent(null,null,i.menu);\n      if(typeof menu===\"object\") i.parts = menu\n    }\n    const li = document.createElement('LI')\n    const sp =  document.createElement('SPAN')\n    sp.innerHTML = i.label\n    li.appendChild(sp)\n    li.style.cursor=\"pointer\"\n    li.style.display=\"inline-block\";\n    li.style.backgroundColor = json.unselBackground;\n    li.style.color = json.unselColor;\n    li.onmouseover = ()=>{\n      li.style.backgroundColor = json.selBackground;\n      li.style.color = json.selColor;\n    } \n    li.onmouseout = ()=>{\n      li.style.backgroundColor = json.unselBackground;\n      li.style.color = json.unselColor;\n    } \n    if(i.popout || !i.parts){\n// i.target=json.target;\n      /*\n       *  <li class=\"item\"><span>${i.label}</span></li>\n       */\n      li.classList.add('item')\n      li.name = i.href\n      const self = this\n/*\n      li.addEventListener('click',(e)=>{\n        window.displayLink(e,i,mainDisplay)\n      })\nWe can't easily override the eventListener later so use onclick instead.\n*/\n      li.onclick = (e)=>{\n        i.href = e.target.parentElement.name;\n        window.displayLink(e,i,mainDisplay)\n      }\n    }\n    else {\n      /*\n        <li class=\"caret\">\n          <span class=\"caret\" style=\"cursor:pointer;\">${i.title}</span>\n          <ul class=\"nested\">\n          </ul>\n        </li>\n      */\n      li.classList.add('caret')\n      let ul2 = document.createElement('UL')\n      li.appendChild(ul2)\n      ul2.classList.add('nested')     \n      for(var m in i.parts){\n        let newItem = i.parts[m]\n        if(typeof newItem==='object') newItem.target=json.target;\n        ul2.appendChild( await this.renderMenuItem(newItem,json,mainDisplay) )\n      }\n    }\n    return li\n  }\n}\n","export class Modal {\n\n/*\n<#MyModal>\n  a ui:Modal ;\n  ui:label           \"BUTTON_LABEL\" ;\n  ui:unselColor      \"BUTTON_COLOR\" ;\n  ui:unselBackground \"BUTTON_BACKGROUND_COLOR\" ;\n  ui:width           \"POPUP-BOX_WIDTH\" .\n\nModal.render({\n  label             // button label\n  unselColor        // button color\n  unselBackground   // button background color\n  width             // popup-box width\n  height            // popup-box height\n  content           // popup-box content string\n  iframe            // popup-box url for iframe\n});\n*/\n\n  async render (o,solidUI) {\n    let dom = o.dom || document;\n    let modal = document.createElement('SPAN');\n    if(o.targetSelector){\n      modal = dom.querySelector(o.targetSelector);\n    }\n    const s = _getCSS(o);\n    if(o.iframe){\n      let iframe = document.createElement(\"IFRAME\");\n      o.content = `<iframe src=\"${o.iframe}\" style=\"width:100%;height:90%;border:none\"></iframe>`;\n    }\n    modal.innerHTML = `\n      <button style=\"${s['button']}\" onclick=\"window.openModal(this)\">\n        ${o.label}\n      </button>\n      <div style=\"${s['.modal']}\">\n        <div style=\"${s['.modal-content']}\">\n          <div style=\"${s['.close']}\" onclick=\"window.closeModal(this)\">\n            &times;\n          </div>\n          ${o.content}\n        </div>\n      </div>\n    `;\n    if(solidUI) return await solidUI.initInternal(modal);  \n    else return modal;\n    return modal;\n  }\n}\n  window.openModal = function (element,action){\n    element.parentElement.children[1].style.display = \"block\" ;\n  }\n  window.closeModal = function (element,action){\n    element.parentElement.parentElement.style.display = \"none\" ;\n  }\n\n  function _getCSS(current){\n    return {\n    \"button\": `\n      background-color:${current.unselBackground};\n      color:${current.unselColor};\n      cursor:pointer;\n    `,\n    \".modal\": `\n      display: none; /* Hidden by default */\n      position: fixed; /* Stay in place */\n      left: 0;\n      top: 0;\n      width: 100%; /* Full width */\n      overflow: auto; /* Enable scroll if needed */\n      background-color: rgb(0,0,0); /* Fallback color */\n      background-color: rgba(0,0,0,0.8); /* Black w/ opacity */\n      height: 100%; /* Full height */\n      z-index:20000;\n    `,\n    \".modal-content\": `\n      background-color: #fefefe;\n      margin: 5% auto; /* 15% from the top and centered */\n      padding: 1rem;\n      border: 1px solid #888;\n      border-radius:0.5rem;\n      width: ${current.width};\n      height: ${current.height};\n    `,\n    \".close\": `\n      color:red;\n      text-align:right;\n      margin-bottom: 0.25rem;\n      font-size: 2rem;\n      font-weight: bold;\n      cursor:pointer;\n    `\n    }\n  }\n","export class SelectorPanel {\n\n  render(j){\n    const wrapper = document.createElement('SPAN');\n    wrapper.classList.add('solid-ui-component');\n     wrapper.style=\"display:flex;flex-direction:row;width:100%;height:${j.height}\"\n    const leftColumn = document.createElement('DIV');\n    leftColumn.style=\"margin-top:0; width:30vw;height:91vh;margin-top:0; min-height:min-content\";\n    const rightColumn = document.createElement('DIV');\n    rightColumn.style=`flex-grow:1;height:{j.height};max-height:100vh;`;\n    rightColumn.classList.add('main');\nrightColumn.style.background=\"ffe\";\n    let collectionSelector = document.createElement('DIV');\n    collectionSelector.style = `width:30vw;border:1px solid grey;border-bottom:none`;\n    collectionSelector.style.background=j.unselBackground;\n    collectionSelector.style.color=j.unselColor;\n    j.parts ||= j.dataSource.parts;\n    const firstOption = j.label || (j.parts[0]).label || j.parts[0];\n    collectionSelector.innerHTML = `\n       <div style=\"border-bottom:1px solid grey; padding:0.5em;cursor:pointer;\">\n        <span style=\"display:table-cell;width:100%\">${firstOption}</span><span style=\"display:table-cell;font-size:large;width:100%;text-align:right;\">⌄</span>\n       </div>\n    `;\n    let collectionsList = document.createElement('DIV');\n    collectionsList.style = `width:30vw;border:1px solid grey;border-top:none;display:none`;\n    collectionSelector.querySelector('div').onclick=()=>{\n      collectionsList.style.display||=\"block\";     \n      if(collectionsList.style.display===\"block\") collectionsList.style.display=\"none\";     \n      else collectionsList.style.display=\"block\";     \n    }\n    for(let p of j.parts){\n      collectionsList.innerHTML += `\n         <a href=\"${p.link}\" style=\"text-decoration:none;display:block;border-bottom:1px solid grey; padding:0.5em;\" data-link=\"${p.link}\" data-type=\"${p.type}\">\n          ${p.label}\n         </a>\n      `;\n    }\n    for(let anchor of collectionsList.querySelectorAll('A')){\n      anchor.onclick = (e)=>{\n         e.preventDefault();\n         let el = e.target;\n         let link = {href:el.href,type:el.dataset.type,target:rightColumn};\n         el.parentElement.style.display=\"none\";\n         collectionSelector.querySelector('DIV SPAN').innerHTML = el.innerHTML;\n         itemsList.style.display=\"block\";      \n         itemsList.style.width=\"30vw\";      \n         displayLink(null,link,itemsList);\n         return false;\n      }\n    }\n    let itemsList = document.createElement('DIV');\n    itemsList.style = `height:100%;border:1px solid grey;overflow-y:scroll;width:30vw;`;\n    leftColumn.appendChild(collectionSelector);\n    leftColumn.appendChild(collectionsList);\n    leftColumn.appendChild(itemsList);\n    wrapper.appendChild(leftColumn);\n    wrapper.appendChild(rightColumn);\n    return wrapper;\n  }\n\n}\n\n/*\nwrapper\n  leftColumn\n    collectionSelector\n    collectionsList\n    itemsList\n  rightColumn\n    displayArea\n*/\n\n  \n","export class Tabs {\n  async render(solidUI,json) {\n    const parts = json.parts\n    const tabs = solidUI.createElement('DIV','solid-uic-tabs');\n    if(json.style) tabs.style = json.style;\n    const nav = solidUI.createElement('NAV');\n    if(json.orientation===\"vertical\")\n      nav.style.textAlign = \"right\";\n    else\n      nav.style.textAlign = json.position;\n    let mainDisplay = solidUI.createElement( 'DIV' );\n    mainDisplay.style.backgroundColor = json.background;\n    mainDisplay.style.color = json.color;\n    let r = 0;    \n    for(let row of parts){\n      r++;\n      let rowhead = solidUI.createElement( 'BUTTON',r,row.label );\n      rowhead.style.backgroundColor = json.unselBackground;\n      rowhead.style.color = json.unselColor;\n      rowhead.style.padding=\"0.75em\";\n      rowhead.style.border=\"1px solid grey\";\n      rowhead.style.cursor = \"pointer\";\n      let rowContent = solidUI.createElement( 'DIV',r,row.content );\n      rowContent.style.padding=\"0.75em\";\n      if(json.orientation===\"horizontal\") rowContent.style.border=\"1px solid grey\";  \n      rowContent.style.display = \"none\";\n      if(row.type===\"SolidOSLink\"){\n        let id = `tab-${r}-outline`;\n        rowContent.innerHTML = `\n          <div class=\"TabulatorOutline\" id=\"${id}-tabulator\" role=\"main\">\n            <table id=\"${id}\"></table>\n            <div id=\"GlobalDashboard\"></div>\n          </div>\n        `;\n        let subject = window.kb.sym(row.href);\n        let targetArea = rowContent.querySelector('#'+id);\n        targetArea.style=\"display:table-row;background-color:c0c0c0\"\n        window.outliner.GotoSubject(subject,true,undefined,true,undefined,targetArea);\n      }\n      rowhead.onclick = (e)=>{\n        e.preventDefault();\n        let items = tabs.querySelector('DIV').children;\n        for(let i of items) {\n          i.style.display=\"none\";\n        }\n        for(let n of nav.children) {\n          n.style.backgroundColor=json.unselBackground;\n          n.style.color=json.unselColor;\n        }\n        rowhead.style.backgroundColor = json.selBackground;\n        rowhead.style.color = json.selColor;\n        rowContent.style.display = \"block\";\n      }\n      nav.appendChild(rowhead);\n      mainDisplay.appendChild(rowContent);\n    if(json.orientation===\"vertical\"){\n      rowhead.style.display=\"block\";\n      rowhead.style.marginBottom = \"0.5em\";\n      rowhead.style.width=\"100%\"\n      tabs.style.width=\"100%\";\n      tabs.style.height=\"100%\";\n      tabs.style.display = \"table-row\";\n      nav.style.display = \"table-cell\";\n      mainDisplay.style.display = \"table-cell\";\n      mainDisplay.style.display=\"block\"\n      mainDisplay.style.height = \"100%\";\n      rowContent.style.height = \"100%\";\n    }\n    else {\n      rowhead.style.marginRight = \"0.5em\";\n      rowhead.style.borderBottom = \"none\";\n    }\n  }\n    tabs.appendChild(nav);\n      const closeButton = document.createElement('SPAN');\n      closeButton.style = `\n        color:red;\n        text-align:right;\n        position:absolute;\n        top:0.25rem;\n        right:0.25rem;\n        font-size: 2rem;\n        font-weight: bold;\n        cursor:pointer\n      `;\n      closeButton.addEventListener('click',(e)=>{\n        e.preventDefault();\n        e.target.parentElement.style.display=\"none\";\n      });\n      closeButton.innerHTML = \"&times\";\n\n    tabs.appendChild(closeButton);\n    tabs.appendChild(mainDisplay);\n    solidUI.simulateClick(tabs.querySelector('BUTTON'))\n    return await solidUI.initInternal(tabs);  \n  }\n}\n","export class BookmarkTree {\n\n  constructor(){\n    this.store = UI.rdf.graph();\n    this.fetcher = UI.rdf.fetcher(this.store);\n  }\n  async init(){\n    for(let containerElm of document.getElementsByClassName('ocb')){\n      let subject = containerElm.dataset.component\n      this.bookmarksDisplay = containerElm.dataset.display\n      try {\n        subject = await this.loadUnlessLoaded(subject)\n        containerElm = containerElm.appendChild(document.createElement('UL') )\n        await this.getTopic(subject,containerElm,this.bookmarksDisplay,'start')\n        document.getElementById('ocbStart').click();\n      }\n      catch(e){ alert(e) }\n    }\n  }\n  async getTopic(topic,containingElement,bookmarksDisplay,start){\n    const self=this\n    if(typeof containingElement===\"string\") containingElement = document.querySelector(containingElement);\n    bookmarksDisplay ||= containingElement.dataset.display;\n    this.bookmarksDisplay ||= bookmarksDisplay;\n\n    let book = UI.rdf.Namespace(\"http://www.w3.org/2002/01/bookmark#\")\n    const rdf= UI.rdf.Namespace('http://www.w3.org/2000/01/rdf-schema#')\n    const rdfs=UI.rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#')\n    const ui=UI.rdf.Namespace('http://www.w3.org/ns/ui#');\n\n    topic = await this.loadUnlessLoaded(topic);\n    let topicTitle = this.store.any( topic, rdf('label'),null,topic.doc() )\n    topicTitle = (typeof topicTitle ===\"undefined\") ? \"???\" : topicTitle.value\n    let span = document.createElement('SPAN')\n    span.appendChild(document.createTextNode(topicTitle))\n    span.classList.add('caret')\n    span.addEventListener(\"click\", function() {\n      let elm = this.parentElement.querySelector(\".nested\")\n      if(elm) elm.classList.toggle(\"active\");\n      this.classList.toggle(\"caret-down\");\n    });\n    let li = document.createElement('LI')\n    if(start){\n      span.id = \"ocbStart\";\n//      containingElement.appendChild(span)\n    }\n//    else {\n      li.appendChild(span)\n      containingElement.appendChild(li)\n//    }\n    let subTopics  = this.store.each( null, book('subTopicOf'), topic )\n    if(subTopics.length>0){\n      let ul = document.createElement('UL')\n      ul.classList.add('nested')\n      li.appendChild(ul)\n      for(let t in subTopics){\n        this.getTopic(subTopics[t],ul)\n      }\n    }\n    else {\n      let bookmarks = this.store.each( null, book('hasTopic'), topic )\n      let ul2 = document.createElement('UL')\n      ul2.classList.add('nested')\n      for(let b in bookmarks){\n        let bookmark = bookmarks[b]\n        let  bookmarkTitle = this.store.any( bookmark, rdf('label'),null,topic.doc() )\n        let isFeed=(this.store.match(bookmark,rdfs('type'),ui('Feed'))).length;\n        bookmarkTitle = bookmarkTitle ? bookmarkTitle.value : \"???\"\n        let bookmarkLink  = this.store.any( bookmark, book('recalls'),null,topic.doc() )\n        let bookElement = document.createElement(\"LI\")\n        if(isFeed) bookElement.classList.add('caret')\n        else bookElement.classList.add('item')\n        if(isFeed){\n          bookElement.addEventListener(\"click\", async function() {\n            alert(\"Feed Me!\");\n          });\n        }\n        else {\n          bookElement.addEventListener(\"click\", async function() {\n            document.querySelector(self.bookmarksDisplay).innerHTML=`<iframe src=\"${bookmarkLink.uri}\"></iframe>`;\n          });\n        }\n        bookElement.appendChild(document.createTextNode(bookmarkTitle))\n        let d = document.createElement('DIV')\n        d.classList.add('closed')\n        bookElement.appendChild(d)\n        ul2.appendChild(bookElement)\n      }\n      li.appendChild(ul2)\n    }\n  }\n  async loadUnlessLoaded(subject){\n    try {\n      const base = document.location.href.replace(/\\/[^\\/]*$/,'/')\n      subject  = (typeof subject===\"string\") ? subject : subject.uri\n      subject = subject.match('//') ? subject : base + subject\n      subject  = UI.rdf.sym(subject)\n      if(subject.termType==='BlankNode') return subject\n      if(!this.store.any(null,null,null,subject.doc())) \n        await this.fetcher.load(subject)\n    }\n    catch(e) { alert(e) }\n    return subject\n  }\n}\n\n/*\nwindow.addEventListener('DOMContentLoaded', async (event) => {\n  const ocb = new BookmarkTree()\n  ocb.init()\n})\n*/\n","import * as user from  './user.js';\n// DataSources\n//import {Feed} from './model/rss.js';\nimport {Feed} from './model/feed.js';\nimport {Sparql} from './model/sparql.js';\n// Templates\nimport {Accordion} from './view/accordion.js';\nimport {App} from './view/app.js';\nimport {Form} from './view/form.js';\nimport {Menu} from './view/menu.js';\nimport {Modal} from './view/modal.js';\nimport {SelectorPanel} from './view/selectorPanel.js';\nimport {Table} from './view/table.js';\nimport {Tabs} from './view/tabs.js';\nimport {BookmarkTree} from './view/bookmarkTree.js';\n\nconst sparql = new Sparql();\nconst proxy = \"https://solidcommunity.net/proxy?uri=\";\nconst $rdf = UI.rdf;\nconst kb = window.kb = $rdf.graph();\nif(typeof panes !=\"undefined\") window.outliner = panes.getOutliner(document);\nlet fetcher;\nconst skos = $rdf.Namespace('http://www.w3.org/2004/02/skos/core#');\nconst ui = $rdf.Namespace('http://www.w3.org/ns/ui#');\nconst rdf=$rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#');\n\nclass SolidUIcomponent {\n\n  constructor(){\n  }\n\n\n  // BREAKING : components marked as data-suic, not data-solid_ui_component\n  suic = \"[data-suic]\";\n\n  async init(){\n\n    // fetcher = this.makeLSfetcher(UI); // see drafts/in-browser-fetcher.js\n    let all = document.querySelectorAll(this.suic)\n//    all= all.length>0 ?all : document.querySelectorAll('[data-solid_ui_component]')\n    for(let element of all) {\n      const content = await this.processComponent(element);\n      if(content) element.appendChild( content );\n    }\n  }\n\n  async initInternal(containingElement){\n    let all = containingElement.querySelectorAll(this.suic)\n//    all= all.length>0 ?all : document.querySelectorAll('[data-suic]')\n    for(let element of all) {\n      const content = await this.processComponent(element);\n      element.appendChild( content );\n    }\n    return containingElement;\n  }\n\n  async processComponent(element,subject,json){\n    if(!json){    \n      if(!subject && element && element.dataset) subject = await this.loadUnlessLoaded(element.dataset.suic);\n      if(!subject) return null;\n      json = await this.getComponentHash(subject)\n      json.displayArea = element.dataset.display ;\n      json.contentArea = '#' + element.id ;\n      json.contentSource = subject.value ?subject.value :subject ;\n    }\n    json ||= subject;\n    if(!json) {console.log(\"No ComponentHASH \",subject); return;}\n    // default color,orientation,position\n    json = this.getDefaults(json);\n\n//    if(json.type.match(/Link/)){\n//      return displayLink(json)\n//    }\n\n    // DATASOURCE\n    let dataSource = typeof json.dataSource===\"string\" ?await this.getComponentHash(json.dataSource) : json.dataSource ;\n    if(dataSource && dataSource.type==='SparqlQuery') {\n      let endpoint = dataSource.endpoint;\n      let query = dataSource.query;\n      json.parts = await this.sparqlQuery(endpoint,query,json);\n      if(json.type==='SparqlQuery') return json.parts;\n    }\n    if(json.type==='SparqlQuery') {\n      json.parts = await this.sparqlQuery(json.endpoint,json.query,json);\n      if(json.type==='SparqlQuery') return json.parts;\n    }\n    if(json.type==='AnchorList') {\n      for(let l of json.content.split(/\\n/) ){\n\n      }\n    }\n    if(json.parts && json.groupOn){\n      json.parts = sparql.flatten(json.parts,json.groupOn)\n      console.log(json.groupOn,json.parts)\n    }\n    if(json.type==='App'){\n      return await (new App()).render(this,json);\n    }\n    else if(json.type && json.type.match(/Link/)){\n      return await window.displayLink(element,json,element);\n    }\n    else if(json.type==='Menu'){\n      return await (new Menu()).render(this,json,element);\n    }\n    else if(json.type==='FeedList'){\n      return await (new Feed()).makeFeedSelector(json.contentSource,json.contentArea,json.displayArea);\n    }\n    else if(json.type==='BookmarkTree'){\n      await (new BookmarkTree()).getTopic(json.contentSource,json.contentArea,json.displayArea,'start');\n      let elm = document.querySelector(json.contentArea);\n      elm.style = \"padding:0;margin:0;list-style:none;\"\n      document.getElementById('ocbStart').click();\n    }\n    else if(json.type==='SelectorPanel'){\n      let panel = new SelectorPanel();\n      let d = this.setDefaults(json);\n      return await panel.render(json);\n    }\n    else if(json.type==='ModalButton'){\n      // return await (new Modal()).render(this,json)\n         return await (new Modal()).render(json,this)\n    }\n    else if(json.type==='Accordion'){\n      return await (new Accordion()).render(this,json)\n    }\n    else if(json.type==='FormComponent'){\n      return await (new Form()).render(this,json)\n    }\n    else if(json.type==='Tabset'){\n      return await (new Tabs).render(this,json)\n    }\n    let contentWrapper = document.createElement('DIV');\n    let results,before,after,content,label;\n\n// RECORD\n    if(json.type==='Record') {\n      label = this.getValue( dataSource, ui('label') );\n      content = this.getValue( dataSource, ui('content') );\n      results = {label,content} ;\n    }\n\nresults = results || json.parts;  \nthis.log('Parts for Component',results);\n// TEMPLATE\n    let template = json.template;\n    if(!template){\n      return results;\n    }\n    if(template.groupOn) {\n      results = sparql.flatten(results,template.groupOn)\n    }   \n    \n      if(template==\"AccordionMenu\"){\n        let compo = await this.runBuiltIn(template,results);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      if(template==\"Table\"){\n        let compo = await (new Table()).render(json);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      if(template==\"ModalButton\"){\n        let compo = await this.makeMmodal(json.label,json.content);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      let recurring;\n// let template = json.template.value ?json.template.value :json.template ;\n\n/*\n      let isBuiltIn = template.match(/^https:\\/\\/www.w3.org\\/ns\\/ui#/) ;\n      if( isBuiltIn ) {\n        if(template.match(/ModalButton/)) {\n          results = await this.makeModalButton(label,content);\n        }\n        else if( template.match(/DropdownMenu/ || dataSourceType===\"App\") ){\n            let m = new Menu();\n            let results = await m.render(subject,contentWrapper)\n            // console.log(results)\n        }\n        else {\n          results = await this.runBuiltIn(template,results);\n        }\n        if(results) contentWrapper.appendChild(results);\n      }\n*/\n        if(typeof template==\"string\") {\n          template = await this.getComponentHash(template);\n        }\n        recurring = template.recurring;\n        before = template.before;\n        after = template.after;\n//        recurring = recurring || template;\n        let body = this.fillTemplate(recurring,results);\n        contentWrapper.innerHTML = (before||\"\") + body + (after||\"\");\n\n/*\n      if( dataSourceType.match(/Menu/) ) {\n        for(let menuItem of contentWrapper.children){\n          menuItem.addEventListener('click',(event)=>this.menu(event));\n        }\n      }\n*/\n      return contentWrapper ;\n    \n  }\n  async getComponentHash(subject,hash){\n    subject = await this.loadUnlessLoaded(subject);\n    if(!subject) return null;\n    let predicatePhrases = kb.match(subject,null,null);\n    if(subject.doc){\n      let thisdoc = kb.match(null,null,null,subject.doc())\n    }\n    hash = hash || {}\n    for(let p of predicatePhrases){\n      let pred = p.predicate.value.replace(/http:\\/\\/www.w3.org\\/1999\\/02\\/22-rdf-syntax-ns#/,'').replace(/http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n      let obj = p.object;\n\tif(obj.termType===\"BlankNode\"){\n        obj = await this.getComponentHash(obj);\n        if(!hash[pred])  hash[pred] = obj;\n        else if(typeof hash[pred] !='ARRAY') hash[pred] = [obj]\n        else hash[pred].push(obj);\n      }\n      else if(obj.termType===\"Collection\"){\n        obj = obj.elements;\n        for(let uri of obj){\n          let component = await this.getComponentHash(uri,{});\n          if(!hash[pred])  hash[pred] = [component];\n          else hash[pred].push(component);\n        }\n      }\n      else {\n        obj = obj.value.replace(/^http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n        if(!hash[pred])  hash[pred] = obj;\n        else if(typeof hash[pred] !='ARRAY') hash[pred] = [obj]\n        else hash[pred].push(obj);\n      }\n      if(hash[pred].length==1) hash[pred]=hash[pred][0];\n    }\n    return hash ;\n  }\n  log(...args){\n    if(typeof DEBUG!=\"undefined\") console.log(args);\n  }\n  setStyle(element,styles){\n    for(let s of Object.keys(styles)){\n      element.style[s]=styles[s];\n    }\n  }\n\n\n/*-----------\n  SPARQL\n----------*/\n  async sparqlQuery(endpoint,queryString,json){\n    if(typeof Comunica !=\"undefined\")\n      return await sparql.comunicaQuery(endpoint,queryString,json);\n    else   \n      return await sparql.rdflibQuery(endpoint,queryString,json);\n//    return await sparql.rdflibQuery(solidUI,kb,endpoint,queryString,json);  \n  }\n\n\n/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  DISPLAY METHODS\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n\ngetDefaults(json){\n  if(typeof json==\"string\") json = this.processComponent('',json)\n  json.height ||= this.height;\n  json.width ||= this.width;\n  json.proxy ||= this.proxy || proxy;\n  json.background ||= this.background || \"#f6f6f6\";\n  json.color ||= this.color || \"#000\";\n  json.selBackground ||= this.selBackground || \"#559\";\n  json.selColor ||= this.selColor || \"#fff\";\n  json.unselBackground ||= this.unselBackground || \"transparent\" // \"#e0e0e0\";\n  json.unselColor ||= this.unselColor || \"#000\";\n  json.orientation ||= this.orientation || \"horizontal\";\n  json.position ||= this.position || \"left\";\n  this.proxy = json.proxy\n  return(json);\n}\nsetDefaults(json){\n  if(typeof json==\"string\") json = this.processComponent('',json)\n  this.background = json.background;\n  this.color = json.color;\n  this.selBackground = json.selBackground;\n  this.selColor = json.selColor;\n  this.unselBackground = json.unselBackground;\n  this.unselColor = json.unselColor;\n  this.orientation = json.orientation;\n  this.position = json.position\n  this.proxy = json.proxy\n  return(this.getDefaults(json));\n}\n\n  fillTemplate(templateStr,object){\n    function fillOneTemplateRow(templateStr,object){\n      for(let o of Object.keys(object) ){\n        let newStuff=object[o]||\" \";\n        if(typeof newStuff==='object' && newStuff.length>1) newStuff = newStuff.join(\", \");\n        let re = new RegExp( `\\\\$\\\\{${o}\\\\}`, 'gi' );\n        templateStr  = templateStr.replace( re, newStuff );\n      }\n      return templateStr;\n    }\n    let string = \"\";\n    for(let r of object){\n       string += fillOneTemplateRow(templateStr,r)+\"\\n\";\n    }\n    return string;\n  }\n\n  runBuiltIn(json,template,results){\n    if(template.match(/Table/)) return this.results2table(json,results);\n    if(template.match(/Modal/)) return this.results2modal(results);\n    if(template.match(/Accordion/)) return tabset(results);\n    if(template.match(/DescriptionList/)) return this.results2descriptionList(results);\n  }\n\n  /* UTILITIES\n  */\n\n  diff(diffMe, diffBy){ diffMe.split(diffBy).join('') }\n\n  simulateClick(el){\n    if (el.fireEvent) {\n      el.fireEvent('on' + 'click');\n    } else {\n      var evObj = document.createEvent('Events');\n      evObj.initEvent('click', true, false);\n      el.dispatchEvent(evObj);\n    }\n  }\n\n  // CREATE HTML ELEMENT\n  createElement(elementType,className,html,styles){\n    let element = document.createElement(elementType);\n    if(className) element.classList.add(className);\n    if(html) element.innerHTML = html;\n    if(styles){\n      for(let s of styles.split(/;/)) {\n        let pair = s.split(/:/)\n        if(pair.length==2) \n          element.style[pair[0].trim()]=pair[1].trim();\n      }\n    }\n    return element;\n  }\n  getComponentType(subject){\n    if(!subject) return null;\n    let uiNamespace = 'http://www.w3.org/ns/ui#';\n    let type = kb.each( subject, rdf('type') ).map( (object) =>{\n      object = object.value;\n      if(object.match(/ns\\/ui#/)) return object.replace(/.*\\#/,'');\n    });\n    return type[0] || \"\";\n  }\n\n  async clearInline(){\n    for(let stm of kb.match()){\n      if(stm.graph.value.startsWith('inline:')) kb.remove(stm);\n    }\n  }\n\n  loadFromMemory(sentUri){\n    let uri = sentUri //.replace(/^inline:/,'');\n    if( kb.any(null,null,null,$rdf.sym(uri)) ) return $rdf.sym(uri);\n    let [eName,fragment] = uri.split(/#/);\n    let eDoc = document.getElementById(eName)\n    let uiString = eDoc.innerText || eDoc.value;\n    uiString = uiString.trim()\n    if(uiString.startsWith('\\<\\!\\[CDATA\\[')) uiString=uiString.replace(/^\\<\\!\\[CDATA\\[/,'').replace(/\\]\\]$/,'').replace(/~~/g,'#');\n    try {\n      $rdf.parse(  uiString, kb, uri, \"text/turtle\" ); \n      return($rdf.sym(uri));\n    }\n    catch(e) { console.log(e) }\n  }\n\n  async  loadUnlessLoaded(uri){\n    try {\n      if(!uri) return;\n      if(uri && uri.termType && uri.termType===\"BlankNode\") return uri;\n      uri = typeof uri===\"object\" ?uri.uri :uri;\n      if(uri.startsWith('inline')) return this.loadFromMemory(uri);\n      if(!uri.startsWith('http')&&!uri.startsWith('ls')) uri = window.location.href.replace(/\\/[^\\/]*$/,'/') + uri;\n    const mungedUri = uri.replace(/\\#[^#]*$/,'');\n      let graph = $rdf.sym(mungedUri);\n      if( !kb.any(null,null,null,graph) ){\n        console.log(\"loading \"+graph.uri+\" ...\");\n        fetcher = fetcher || $rdf.fetcher(kb);\n        let r = await fetcher.load(graph.uri);\n        if(kb.any(null,null,null,graph)) console.log(`<${graph.uri}> loaded!`);\n        else console.log(`<${graph.uri}> could not be loaded!`);\n//console.log(kb.match(null,null,null,graph));\n      }\n      else console.log(`<${graph.uri}> already loaded!`);\n      return $rdf.sym(uri);\n    }\n    catch(e) { console.log(e); return $rdf.sym(uri) }\n  }\n   getValue(s,p,o,g) {\n     let node = kb.any( s, p, o, g );\n     return node ?node.value :\"\" \n   }\n   valuesContain(s,p,o,g,wanted) {\n    let nodes = kb.each( s, p, o, g );\n    for(let n of nodes) {\n      n = n ?n.value :\"\";\n      if(n===wanted) return n;\n    }\n  }\n\n} // END OF CLASS SolidUIcomponent\n\nconst solidUI = new SolidUIcomponent();\ndocument.addEventListener('DOMContentLoaded',()=>{solidUI.init();});\nexport default solidUI;\n\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","$rdf","UI","rdf","RDFS","Namespace","FOAF","SOLID","PIM","LDP","VCARD","getObject","kb","subject","predicate","sym","any","getObjects","each","results","v","push","async","applyProfile","domElement","me","type","document","origin","window","webId","fetcher","node","load","e","console","log","extendedDocs","concat","doc","name","nick","image","inbox","preferences","privateTypeIndex","publicTypeIndex","storages","issuers","loadProfile","storage","logo","querySelector","src","title","innerHTML","solidUI","vars","podRoot","podName","podNick","podWebID","podImage","podInbox","podProfile","Feed","feedUri","proxy","encodeURI","response","fetch","feedContent","text","feedDom","DOMParser","parseFromString","items","querySelectorAll","length","parsedItems","forEach","el","link","getAttribute","match","replace","trim","json","externalLinkIcon","icons","iconBase","i","this","fetchAndParse","href","displayTarget","wrapper","createElement","property","content","standAlone","label","style","selBackground","selColor","height","anchors","anchor","listItems","li","width","mungeAnchors","element","noStyle","alert","classList","contains","addEventListener","event","preventDefault","displayArea","dataset","target","display","closest","parentElement","displayLink","needsIframe","String","interpolate","params","names","keys","vals","values","Function","toggleMenu","column2","getElementById","toggleDarkMode","container","remove","add","toggleFontSize","currentSize","body","fontSize","item","popout","newElement","processComponent","appendChild","startsWith","targetElement","targetOutline","wantedPane","variable","pane","panes","byName","pod","uri","URLSearchParams","location","search","set","history","replaceState","pathname","setHistory","outliner","GotoSubject","containingEl","main","tabulator","span","initInternal","linkType","render","format","marked","parse","showMarkdown","div","script","nativeIframe","iframe","URL","b","srcdoc","scrollTo","top","behavior","getIframe","Sparql","endpoint","queryString","forceReload","Comunica","comunicaQuery","rdflibQuery","graph","preparedQuery","SPARQLToQuery","wanted","map","stm","table","querySync","r","row","w","sort","a","sparqlStr","result","comunica","newEngine","munge","x","invalidateHttpCache","store","webOperation","ok","statusText","query","sources","variables","bindings","entries","_root","id","flatten","groupOn","newResults","k","includes","n","Table","options","parts","sortOn","reverse","columnHeaders","headerRow","c","cell","border","padding","background","unselBackground","color","unselColor","rowElement","col","cleanNodes","backgroundColor","borderCollapse","Form","url","form","formSubject","u","resultDocument","dom","formString","string","fSubj","removeDocument","formResultDocument","widgets","appendForm","CU","UIO","ISA","tag","thing","getProperty","curie","vocab","split","ns","getProperties","getValues","all","some","one","s","val","menuize","buttonGroupElement","buttons","b2","findType","sourceFile","targetSelector","_show","showIframeSrc","pdf","video","showIframeSrcDoc","audio","html","loadFile","graphviz","d3","select","renderDot","markdown","parsedString","SparqlQuery","q","sparqlQuery","DataTemplate","getUIterm","template","data","interpolated","PageDefinition","getMainSubject","DM","XS","XMLSerializer","templateURL","templateInfo","p","object","fileInfo","show","contentType","serializeToString","mainSubject","crossLoad","subjectType","getUItype","subjects","visitedSubject","str","mungeLabel","stmts","stmt","mungeHash","queryURL","querySubject","before","beforeQueryURL","beforeQuerySubject","beforeEndpoint","beforeQuery","beforeData","recurring","after","middle","makeIframe","show_iframe","makeSelector","onchange","selected","size","selectEl","option","endsWith","optionEl","childNodes","targetEl","getParent","newu","file","ext","path","decodeURI","isContainer","mime","getType","editable","host","isHidden","headers","responseText","status","types","term","newval","termType","elements","mungeURL","PUT","cType","topTopic","bookm","rdfs","topicNodes","topics","topicSelector","collectionSelector","selectors","collections","colSelector","itemSelector","elm","items2list","onclick","area","elms","suicfeedmenu","menuArea","myFeed","makeFeedSelector","initFeeds","Accordion","accordion","rowhead","topic","caret","textAlign","cursor","rowContent","linkLabel","linkUrl","button","setAttribute","marginBottom","showByClass","borderTop","showing","children","simulateClick","App","app","mainHeight","rem","remSize","clientHeight","removeChild","rem2px","menuHeight","headerHeight","SolidAppContext","scroll","innerHeight","toString","setDefaults","fullPage","mm","tab","overflow","adminMenu","leftMenu","siteMenu","orientation","leftMenuStyle","appString","getHTML","solidLogo","menuElement","menu","currentPodMenu","userMenu","amenu","umenu","loginBox","loginButtonArea","mungeLoginArea","authn","currentUser","checkUser","initAuth","loginStatusBox","loginButtons","authSession","onLogin","onLogout","onSessionRestore","createLoginBox","initialContent","getComponentHash","rem2vw","clientWidth","rem2vh","leftColumnColumnStyle","leftColumnColumnMenu","iframeSrc","iframeContent","logoStyle","titleStyle","appStye","mainStyle","theme","fillTemplate","Menu","nav","topUL","mainDisplay","renderMenuItem","position","sp","onmouseover","onmouseout","ul2","m","newItem","Modal","modal","current","openModal","action","closeModal","SelectorPanel","j","leftColumn","rightColumn","dataSource","firstOption","collectionsList","itemsList","Tabs","tabs","targetArea","undefined","marginRight","borderBottom","closeButton","BookmarkTree","constructor","containerElm","getElementsByClassName","component","bookmarksDisplay","loadUnlessLoaded","getTopic","click","containingElement","start","book","ui","topicTitle","createTextNode","toggle","subTopics","ul","t","bookmarks","bookmark","bookmarkTitle","isFeed","bookmarkLink","bookElement","d","base","sparql","getOutliner","suic","contentArea","contentSource","getDefaults","l","panel","contentWrapper","getValue","compo","runBuiltIn","makeMmodal","hash","predicatePhrases","pred","args","DEBUG","setStyle","styles","templateStr","fillOneTemplateRow","newStuff","join","re","RegExp","results2table","results2modal","tabset","results2descriptionList","diff","diffMe","diffBy","fireEvent","evObj","createEvent","initEvent","dispatchEvent","elementType","className","pair","getComponentType","loadFromMemory","sentUri","eName","fragment","eDoc","uiString","innerText","mungedUri","g","valuesContain","nodes","init"],"sourceRoot":""}