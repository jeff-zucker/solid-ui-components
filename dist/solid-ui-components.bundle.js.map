{"version":3,"file":"solid-ui-components.bundle.js","mappings":"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","sources":["webpack://solidUI/webpack/universalModuleDefinition","webpack://solidUI/webpack/bootstrap","webpack://solidUI/webpack/runtime/define property getters","webpack://solidUI/webpack/runtime/hasOwnProperty shorthand","webpack://solidUI/webpack/runtime/make namespace object","webpack://solidUI/./src/model/profile.js","webpack://solidUI/./src/databrowser.js","webpack://solidUI/./src/model/rss.js","webpack://solidUI/./src/user.js","webpack://solidUI/./src/default-templates.js","webpack://solidUI/./src/model/sparql.js","webpack://solidUI/./src/view/table.js","webpack://solidUI/./src/view/form.js","webpack://solidUI/./src/utils.js","webpack://solidUI/./src/view/optionSelector.js","webpack://solidUI/./src/model/feed.js","webpack://solidUI/./src/view/mediaList.js","webpack://solidUI/./src/view/accordion.js","webpack://solidUI/./src/view/app.js","webpack://solidUI/./src/view/menu.js","webpack://solidUI/./src/view/modal.js","webpack://solidUI/./src/view/bookmarkTree.js","webpack://solidUI/./src/view/selector.js","webpack://solidUI/./src/view/draggable.js","webpack://solidUI/./src/login.js","webpack://solidUI/./src/index.js","webpack://solidUI/./src/view/buttonListMenu.js","webpack://solidUI/./src/view/searchButton.js","webpack://solidUI/./src/view/menuMenu.js","webpack://solidUI/./src/view/componentButton.js","webpack://solidUI/./src/view/tabs.js","webpack://solidUI/./src/view/button.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"solidUI\"] = factory();\n\telse\n\t\troot[\"solidUI\"] = factory();\n})(self, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* loadProfile()\n*/\nexport async function loadProfile(webId) {\n\nconst $rdf = UI.rdf;\n\nconst RDFS = $rdf.Namespace('http://www.w3.org/2000/01/rdf-schema#');\nconst FOAF = $rdf.Namespace('http://xmlns.com/foaf/0.1/');\nconst SOLID = $rdf.Namespace('http://www.w3.org/ns/solid/terms#');\nconst PIM = $rdf.Namespace('http://www.w3.org/ns/pim/space#');\nconst LDP = $rdf.Namespace('http://www.w3.org/ns/ldp#');\nconst VCARD = $rdf.Namespace('http://www.w3.org/2006/vcard/ns#');\n\n  const kb = window.kb;\n  const fetcher = $rdf.fetcher(kb);\n  const node = $rdf.sym(webId);\n  try {\n    await fetcher.load(webId);\n  }\n  catch(e){\n    console.log(\"Couldn't load profile : \"+e);\n    return {};\n  }\n  let extendedDocs = kb.each( webId, RDFS('seeAlso') );\n  extendedDocs = extendedDocs.concat( kb.each( node, FOAF('primaryTopicOf') ) );\n  for(let doc of extendedDocs){\n    await fetcher.load(doc);\n  }\n  let me = {\n    webId,\n    name  : getObject(kb,webId,FOAF('name')) || getObject(kb,webId,VCARD('fn')) || getObject(kb,webId,FOAF('nick')) || webId,\n    nick  : getObject(kb,webId,FOAF('nick')) || \"\",\n    image : getObject(kb,webId,VCARD('hasPhoto')) || \"\",\n    inbox : getObject(kb,webId,LDP('inbox')) || \"\",\n    preferences : getObject(kb,webId,PIM('preferencesFile')) || \"\",\n    privateTypeIndex : getObject(kb,webId,SOLID('privateTypeIndex')) || \"\",\n    publicTypeIndex : getObject(kb,webId,SOLID('publicTypeIndex')) || \"\",\n    storages : getObjects(kb,webId,PIM('storage')) || \"\",\n    issuers : getObjects(kb,webId,SOLID('oidcIssuer')) || \"\",\n  }\n  return me; // I'm defective, get your money back ;-)\n}\n\nfunction getObject(kb,subject,predicate){\n  subject = kb.sym(subject);\n  let value = kb.any(subject,predicate);\n  return value ?value.value :\"\";\n}\nfunction getObjects(kb,subject,predicate){\n  subject = kb.sym(subject);\n  let value = kb.each(subject,predicate);\n  let results = [];\n  for(let v of value){\n    results.push(v ?v.value :\"\");\n  }\n  return results;\n}\n","import {loadProfile} from './model/profile.js';\n\nexport async function applyProfile(domElement,me,type) {\n  domElement  ||= document;\n  let origin = window.origin;\n  me ||= `${origin}/profile/card#me`;\n  me = await loadProfile( me );\n  const storage = me.storages ?me.storages[0] :null ; // TBD MULTIPLE STORAGES\n  me.name = me.name || me.nick || me.webId;\n  let logo = domElement.querySelector('#currentPodLogo')\n  if(logo) logo.src = me.image;\n  let title = domElement.querySelector('#currentPodTitle');\n  if(title) title.innerHTML=`${me.name}'s Pod`;\n  solidUI.vars = {\n    podRoot   : storage,\n    podName   : me.name,\n    podNick   : me.nick,\n    podWebID  : me.webId,\n    podImage  : me.image,\n    podInbox  : me.inbox,\n    podProfile : me.webId,\n  };\n  return me;\n}\n \n    export function setHistory(uri){\n      const params = new URLSearchParams(location.search)\n      params.set('uri', (uri||\"\"));\n      window.history.replaceState({}, '', `${location.origin}${location.pathname}?${params}`);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    }\n\nexport async function createLoginBox(domElement){\n    const loginButtonArea = domElement.querySelector(\"#loginArea\");\n    const UI = panes.UI;\n    let tabulator = domElement.querySelector('#suicTabulator')\n/*\n      tabulator.style= `\n        display: none; \n        position: fixed;\n        z-index: 1;\n        left: 0;\n        top: 10vh;\n        width: 100%;\n        overflow: auto;\n        background-color: rgb(0,0,0);\n        background-color: rgba(0,0,0,0.2);\n      `; \n*/\n    async function mungeLoginArea(uri){\n      await initAuth();\n      loginButtonArea.innerHTML=\"\";\n      loginButtonArea.appendChild(UI.authn.loginStatusBox(document, null, {}))\n      let loginButtons = loginButtonArea.querySelectorAll('input');\n/*\n      for(let button of loginButtons){\n        button.style = `\n          border:none;\n          background:transparent;\n          font-size:1rem;\n          position: absolute;\n          top:3.5rem;\n          right:7.2rem;\n          cursor:pointer;\n        `;\n      }\n*/\n      loginButtons[0].value = loginButtons[0].value.replace(/WebID\\s*/,'');\n      if(loginButtons[1]) loginButtons[1].style.display=\"none\";\n    }      \n    async function initAuth(){\n      if( !UI.authn.currentUser() ) {\n        await UI.authn.checkUser();\n      }\n    }\n    if( UI.authn.authSession ) {\n      UI.authn.authSession.onLogin(() => {\n        mungeLoginArea();\n      })\n      UI.authn.authSession.onLogout(() => {\n        mungeLoginArea();\n      })\n      UI.authn.authSession.onSessionRestore((url) => {\n        mungeLoginArea();\n\n      })\n    }    \n//    document.addEventListener('DOMContentLoaded',()=>{mungeLoginArea();});\n    mungeLoginArea();\n} // ENDS\n","/*\n *  myFeed = new Feed(solidUI,feedUri)\n *  \n\nproxy\nhref || link\ndisplayType\nstandAlone\nlabel\n  selBackground\n  selColor\n  height\n  width\n\n */\n\nexport class Feed {\n\n  async fetchAndParse(feedUri,proxy){\n\n    // fetch feed URI & parse into a Dom structure\n    //\n    feedUri = (proxy||\"\")+encodeURI( feedUri );\n\n    let response = await fetch( feedUri )\n    let feedContent = await response.text();\n    const domParser = new window.DOMParser();\n    let feedDom = domParser.parseFromString(feedContent, \"text/xml\")\n\n    // find items (RSS) or entries (Atom)\n    //\n    let items = feedDom.querySelectorAll(\"item\") || null;\n    items = items.length<1 ?feedDom.querySelectorAll(\"entry\") :items;\n\n    // parse items\n    //\n    let parsedItems=[];\n    items.forEach( el => {\n\n      // find item link, account for specific kinds of quirks\n      //\n      let link = el.querySelector(\"link\").innerHTML;\n      // vox\n      if(!link) link = el.querySelector('link').getAttribute('href');\n      // reddit\n      if(!link || link.match(/ /)){\n        link = el.querySelector('content').innerHTML.replace(/.*\\[link\\]/ ,'').replace(/a href=\"/,'').replace(/\"&gt;.*/,'').replace(/.*&lt;/,'');\n      }\n      // engadget\n      if(!link.match(/^http/)) link = link.replace(/.*\\[CDATA\\[/,'');\n\n      // always use https, not http\n      link = link.replace(/^http:/,'https:');\n\n      // get the title\n      let title = el.querySelector(\"title\").innerHTML;\n      title = title.replace(/^\\<\\!\\[CDATA\\[/,'');\n      title = title.replace(/\\]\\].*\\>/,'').trim();\n\n      parsedItems.push({title,link});\n    });\n    return parsedItems;\n  }  // END OF fetchAndParse()\n\n\n  async render(solidUI,json){\n    let items = \"\";\n    let externalLinkIcon = UI.icons.iconBase+`/noun_189137.svg`;\n    externalLinkIcon = `<img src=\"${externalLinkIcon}\" style=\"width:1em;height:1em;display:inline-block; padding-left:0.4em;opacity:0.5\">`;\n    for(let i of await this.fetchAndParse((json.href||json.link),json.proxy)){\n      if(json.displayTarget===\"window\"){\n/*\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\">\n            <a href=\"${i.link}\" target=\"_BLANK\" property=\"rss:title\">\n              ${i.title}\n            </a>\n          </li>\n        `;\n*/\n      }\n      else {\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\" style=\"display:none;background:green;border:1px solid grey;\">\n            <a href=\"${json.proxy+i.link}\" property=\"rss:title\" style=\"background:#999;display:inline-block\">\n               ${i.title}\n            </a>\n            <a href=\"${i.link}\" class=\"skipMunge\" target=\"_BLANK\" class=\"external\">${externalLinkIcon}</a>\n          </li>\n        `;\n      }\n    }\n    const wrapper = document.createElement('DIV');\n    wrapper.property = \"xmlns:rss\";\n    wrapper.content = \"http://purl.org/rss/1.0/\";\n    if(json.standAlone) {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n          <b property=\"rss:title\">${json.label}</b>\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n\n    wrapper.querySelector('B').style=`padding:1em;padding-right:0;background:${json.selBackground};color:${json.selColor};border:1px solid grey;width:100%;display:inline-block`;\n    }\n    else {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n<!--          <div property=\"title\" style=\"background:#d0d0d0;padding:1em;\">${json.label}</div>-->\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n    wrapper.querySelector('UL').style=`padding:0;padding-left:0;list-style:none;margin-top:0;width:100%;`;\n    }\n    wrapper.querySelector('UL').style=`padding:0;border:1px solid grey;list-style:none;margin-top:0;width:100%;height:${json.height};overflow-y:auto;`;\n    let anchors = wrapper.querySelectorAll('A');\n    for(let anchor of anchors){\n      anchor.style=\"text-decoration:none;\"\n    }\n    let listItems = wrapper.querySelectorAll('LI');\n    for(let li of listItems){\n      li.style=\"padding:0.5em;border-bottom:1px solid grey\";\n    }\n    if(json.width) wrapper.style.width = json.width;\n    return wrapper;\n  }\n}\n","import {setHistory,applyProfile} from './databrowser.js';\nimport {Feed} from './model/rss.js';\n\n/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  USER CALLABLE ACTIONS\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n\n  // https://stackoverflow.com/a/41015840/15781258\n  //\n  String.prototype.interpolate = function(params) {\n    const names = Object.keys(params);\n    const vals = Object.values(params);\n    return new Function(...names, `return \\`${this}\\`;`)(...vals);\n  }\n\n  window.toggleMenu=()=>{\n    const column2 = document.getElementById('column-2');\n    column2.style.display ||= \"block\"; \n    if(column2.style.display===\"block\"){\n      column2.style.display=\"none\"\n    }\n    else {\n      column2.style.display=\"block\"\n    }\n  }\n  window.toggleDarkMode=()=>{\n     const container = document.getElementById('zContainer');\n     let currentMode = container.classList.contains('darkMode');\n     if(currentMode){\n        container.classList.remove('darkMode');\n     }\n     else {\n        container.classList.add('darkMode');\n     }\n  }\n  window.toggleFontSize=()=>{\n     let currentSize = document.body.style.fontSize || \"100%\";\n     if(currentSize===\"100%\"){\n        document.body.style.fontSize = \"120%\";\n     }\n     else if(currentSize===\"120%\"){\n        document.body.style.fontSize = \"140%\";\n     }\n     else if(currentSize===\"140%\"){\n        document.body.style.fontSize = \"90%\";\n     }                                                                                                   else {\n        document.body.style.fontSize = \"100%\";\n     }\n  }                                                                                                 \n\n  async function showIframe(uri,displayArea){\n    if( uri.match(/localhost/) ) {\n      displayArea.src = uri;\n      return  ;\n    }\n    const r = await fetch(uri);\n    const content = await r.text();\n    const contentElement = this.createElement('SPAN','',content);\n    displayArea.contentWindow.document.body.innerHTML = \"\";\n    displayArea.contentWindow.document.body.appendChild(contentElement);\n  }\n  function showByClass(event){\n    let wanted = event.target.dataset.link;\n    let main = event.target.closest('.solid-uic-app').querySelector('.main');\n    let elements = main.querySelectorAll('[typeof]');\n    for(let element of elements){\n      if(wanted===\"all\") {\n        element.style.display=\"block\";\n        continue;\n      }\n      if( (element.getAttribute('value')).indexOf(wanted)>-1 ) element.style.display=\"block\";\n    //  if(element.classList.contains(wanted)) element.style.display=\"block\";\n      else element.style.display=\"none\";\n    }\n    highlightMenuSelection(event)\n  }\n  function highlightMenuSelection (e) {\n    let wanted = e.target.dataset.link;\n    let siblings = e.target.parentElement.children;\n    for(let sib of siblings){\n      if(sib.dataset.link===wanted)  sib.classList.add('selected');\n      else sib.classList.remove('selected');\n    }\n  }\n  function toggleAccordion (e) {\n    let wanted = e ?e.target.dataset.link :null;\n    let siblings = e.target.closest('UL').children;\n\n    // HIDE ALL ACCORDION DROPDOWNS\n    let navs = e.target.closest('UL').querySelectorAll('NAV');\n    for(let n of navs) {n.style.display=\"none\"}\n\n    // SHOW SELECTED ACCORDION DROPDOWNS\n    for(let sib of siblings){\n      let button = sib.querySelector('BUTTON');\n      let links = sib.querySelectorAll('NAV DIV');\n      for(l of links) { l.classList.remove('selected')}\n      let box = sib.querySelector('NAV');\n      if(button.dataset.link===wanted)  {\n        box.style.display=\"block\";\n      }  \n    } \n  }\n  window.displayLink = async function( e, item, element ){\n// alert('user.js DISPLAY LINK')\n    if(typeof item==='string') item = { href:item }\n    item.href = item.href || item.link;\n    item.type = item.type || 'Link';\n    item.type = item.type.replace(/http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n\n\n    // IF POPOUT, DISPLAY IN ITS OWN OVERLAY AND RETURN\n    if(item.popout) {\n      let newElement = await solidUI.processComponent('',item.href)\n      newElement.style.display=\"block\";\n      document.body.appendChild(newElement);\n      return newElement;\n    }\n\n    // IF SOLIDOS LINK, DISPLAY WITH GOTOSUBJECT, RETURN\n    if(item.type.startsWith(\"SolidOS\")) {\n      return solidUI.util.show('SolidOSLink',item.href)\n      document.getElementById('mainMain').style.display=\"none\";\n      const targetElement = document.getElementById('suicTabulator')\n      targetElement.style.display=\"block\";\n      const targetOutline = targetElement.querySelector('#outline');\n      let wantedPane;\n      item.href = (!item.href && item.variable) ?solidUI.vars[item.variable] :item.href;\nconsole.log(solidUI.vars);\n      let subject = item.href;\n      if( item.pane ) {\n         wantedPane = panes.byName(item.pane);\n      }\n      else if( item.pod ) {\n        let me = await applyProfile(null,item.pod,'podLoad');\n        subject = me.storages[0];\n      }\n      subject = window.kb.sym(subject);\n      setHistory(subject.uri);\n      window.outliner.GotoSubject(subject,true,wantedPane,true,null,targetOutline);\n      return;\n    }\n\n    let main = document.getElementById('mainMain')\n    let tabulator = document.getElementById('suicTabulator')\n    if(main) main.style.display=\"block\";\n    if(tabulator) tabulator.style.display=\"none\";\n\n    // FIND CONTAINING ELEMENT\n    let containingEl;\n    if(element && !e){\n      containingEl = element;\n    }\n    // let wrapper =e.target.closest('.solid-ui-component')\n    let wrapper = e && e.target ?e.target.closest('.solid-uic-app') :null;\n    if(wrapper && wrapper.classList.contains('solid-main-app')) {\n      containingEl = wrapper.querySelector('#mainMain');\n    }\n    else if(wrapper) {\n      containingEl = wrapper.querySelector('.main');\n    } \n    containingEl=containingEl||document.body.querySelector('.main')||document.body;\n    if(containingEl) containingEl.innerHTML=\"\";\n    let content = item.content;\n    if(content){\n      let span = document.createElement('SPAN')\n      content = content.interpolate(solidUI.vars);\n      span.innerHTML = content;\n//      span = mungeAnchors(span);\n      containingEl.innerHTML=\"\"\n      containingEl.appendChild(span);\n      return await solidUI.initInternal(containingEl);  \n    }\n    // SolidOsLink\n    if(item.type===\"SolidOSLink\") {\n        return;\n    }\n    // FEED \n    if(item.type===\"Feed\"||item.linkType===\"Feed\") {\n      let content = await (new Feed()).render(solidUI,item);\n/*\n      let newItem = {\n        type:\"App\",\n        orientation:\"vertical\",\n        menu:item\n      }\n      let content = await solidUI.processComponent('','',newItem)\n*/\n      content = mungeAnchors(content,\"noStyle\");\n      containingEl.innerHTML=\"\"\n      containingEl.appendChild(content);\n      return containingEl;\n    }\n    // MARKDOWN\n    else if(item.type==='TransformLink'){\n      if(item.href && item.format && item.format.match(/markdown/)){\n        return showMarkdown(item,containingEl);\n      }\n    }\n    else if(item.type===\"Link\") {\n      if(content){\n          containingEl.innerHTML = content;\n        return await this.initInternal(containingEl);  \n      }\n      else if(item.script){\n        let content = await Function('\"use strict\";return (' + item.script + ')')();\n        content = mungeAnchors(content) ;\n//        containingEl.innerHTML=\"\"\n        return(content);\n      }\n      else if(item.href){\n        let content = await getIframe(item,containingEl,item.nativeIframe);\n//        containingEl.innerHTML=\"\"\n        containingEl.appendChild(content);\n        return containingEl;\n      }\n    }\n    else {\n      content = await solidUI.processComponent('',item) ;\n      if(!item.format) content = mungeAnchors(content);\n      containingEl.innerHTML=\"\"\n      if(typeof content === 'string'){\n        let div = document.createElement('DIV');\n        div.innerHTML = content;\n        containingEl.appendChild(div);\n      }\n      else containingEl.appendChild(content);\n      return containingEl;\n    }\n  }\n  async function showMarkdown(item,containingEl){\n    let content = await fetch(item.href);\n    content = await content.text();\n    containingEl.innerHTML=\"\"\n    let style =`\n<style>\n  h1 {display:none;}\n//  a{text-decoration:none; padding-top:0.25em;display:inline-block;padding-left:1em;}\n  ul {list-style:none;padding-left:0;margin-top:0;}\n</style>`;\n    let wrapper = document.createElement('SPAN');\n    wrapper.innerHTML = style + marked.parse( content );\n    wrapper = mungeAnchors(wrapper,\"noStyle\");\n    return wrapper;\n  }\n\n  function mungeAnchors(element,noStyle){\n    if(!element) return;\n    const anchors = element.querySelectorAll('A');\n    for(var anchor of anchors){\n      if(!anchor.innerHTML) alert(anchor)\n      if(anchor.classList.contains('skipMunge')) continue;\n      anchor.addEventListener('click',async(event)=>{\n        event.preventDefault();\n        let displayArea = element.dataset.target;\n        let display = event.target.closest('.solid-uic-app')\n        if(display && !displayArea) displayArea = display.querySelector('.main');\n        let href = event.target.href || event.target.parentElement.href\n        displayLink(null,{href,needsIframe:true},displayArea);\n      });\n      if(noStyle) continue;\n      anchor.style=\"display:block;text-decoration:none;padding:0.5em; border-bottom:1px solid grey;color:#017698 !important;\";\n    }\n    return element;\n  }\n  async function getIframe(item,containingEl,nativeIframe){\n    let uri = item.href;\n    const iframe = document.createElement(\"IFRAME\");\n    iframe.style=\"width:100%;height:90vh;border:none;margin:0;padding:0;\";\n    iframe.src = \"\";\n    if(nativeIframe) {\n      iframe.src=uri;\n    }\n    else {\n      try{\n        let content = await fetch(uri);\n        if(content){\n          content = await content.text()\n//        if(!content.match(/^\\s*</)) return await goto(uri,containingEl);\n          containingEl.innerHTML=\"\";\n          uri = uri.replace(/^.*proxy\\?uri=/,'');\n          uri = new URL(uri);\n          const b = `<base href=\"${uri.origin}/\"><base target=\"_BLANK\">`;\n          iframe.srcdoc = `<body>${b}${content}</body>`\n          iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n        }\n        else {\n          console.log(\"Fetched but no content!\");\n        }\n      }\n      catch(e){console.log(\"Couldn't fetch!\",e)}\n    }\n    return iframe;\n  }\n\n  async function goto(uri,domElement){\n    var kb = UI.store;\n    var outliner = panes.getOutliner(window.document)\n    var subject = kb.sym(uri);\n    const pane = panes.byName('dataContents');\n    outliner.GotoSubject(subject, true, pane, true, undefined);\n  }\n\n  function gotoPane(uri,paneName,targetElement){\n    var subject = panes.UI.rdf.sym(uri);\n    var wantedPane = panes.byName(paneName);\n    outliner.GotoSubject(subject,true,wantedPane,true,null,targetElement);\n  }\n\n  function renderSolidOSpage(item){\n     const targetElement = document.getElementById('suicTabulator')\n     targetElement.style.display=\"block\";\n     window.outliner.GotoSubject(window.kb.sym(item.href),true,undefined,true);\n  }\n","export const suicTemplate = {\n\nRolodex: `\n  <div style=\"overflow:auto;height:12rem;border:1px solid black;margin:1rem;padding:1rem;\">\n    [~LOOP~]\n      <div style=\"display:table-row;\">\n        <div style=\"display:table-cell;text-align:right;\"><b>[~key~]</b></div>\n        <div style=\"display:table-cell;padding-left:1rem;\">[~val~]</div>\n      </div>\n    [~LOOP~]\n  </div>\n`,\n\nRecordsList: `\n  <div style=\"border:1px solid black;margin:1rem;padding:1rem;\">\n    [~LOOP~]\n      <div style=\"display:table-row;\">\n        <div style=\"display:table-cell;text-align:right;\"><b>[~key~]</b></div>\n        <div style=\"display:table-cell;padding-left:1rem;\">[~val~]</div>\n      </div>\n    [~LOOP~]\n  </div>\n`,\n\n};\n\n\n","  /*\n     const results = runQuery({\n       ?template : String|Null,\n       ?displayArea : String|Null,\n       endpoint : String,\n       query : String\n     });\n\n     Note : If template is provided, results will be an HTMLElement, else an array.\n     Note : If template and displayArea are provided, the displayArea will be populated\n     with the template interpolated with the results.\n     \n  */\n\nexport async function runQuery(options){\n   const sparql = new Sparql();\n   let results = await sparql.sparqlQuery(options.endpoint,options.query);\n   options.template ||= 'ui:Table';\n   results = await solidUI.processTemplate(options.template,results);\n   if(options.displayArea){\n     const d = (typeof options.displayArea===\"string\") ?document.querySelector(options.displayArea) :options.displayArea;\n     d.innerHTML=\"\";\n     d.appendChild(results);\n   }\n   return results;\n}\n\nexport class Sparql {\n\n  async sparqlQuery(endpoint,queryString,forceReload){\n    if( endpoint.startsWith('/') ){\n      endpoint = window.origin + endpoint;\n    }\n    else if( endpoint.startsWith('./') ){\n      let loc = window.location.href;\n      endpoint = loc.replace(/\\/[^\\/]*$/,'') + endpoint.replace(/^\\./,'');\n    }\n    if(typeof Comunica !=\"undefined\")\n      return await this.comunicaQuery(endpoint,queryString,forceReload);\n    else   \n      return await this.rdflibQuery(endpoint,queryString,forceReload);  \n  }\n\n  async rdflibQuery(endpoint,queryString,forceReload){\n/*\n    kb = UI.store\n    const fetcher = UI.store.fetcher;\n*/\n    const kb = UI.rdf.graph();\n    const fetcher = UI.rdf.fetcher(kb);\n    await kb.fetcher.load(endpoint);\n    try {\n      const preparedQuery=await UI.rdf.SPARQLToQuery(queryString,false,kb);\n      let wanted = preparedQuery.vars.map( stm=>stm.label );\n      let table = [];\n      let results = kb.querySync(preparedQuery);\n      for(let r of results){\n        let row = {};\n        for(let w of wanted){\n          let value = r['?'+w];\n          row[w] = value ?value.value :\"\";\n        }\n        table.push(row);\n      }\n      table = table.sort((a,b)=>a.label > b.label ?1 :-1);\n      return table\n    }\n    catch(e) { console.log(e); }\n  }\n\n  async  comunicaQuery(endpoint,sparqlStr,forceReload){\n   try {\n    let comunica = Comunica.newEngine() ;\n    if(forceReload) comunica.invalidateHttpCache();\n    function munge(x){\n       return x ? x.replace(/^\"/,'').replace(/\"[^\"]*$/,'') :\"\";\n    }\n    let result;\n    let r = await UI.store.fetcher.webOperation('GET',endpoint);\n    if(!r.ok) { alert(r.statusText); return; }\n    try { result = await comunica.query(sparqlStr,{sources:[endpoint]}) ; }\n    catch(e){alert(e); return};\n    let wanted = result.variables;\n    result = await result.bindings()\n    let table = [];\n    let hash = {};\n    for(let e of result.entries()) {\n      if( !e[1] ||  !e[1]._root || !e[1]._root.entries ) continue;\n      e = e[1]._root.entries\n      let row = {} ;\n      for(let i in e.reverse()){\n        let key = munge( e[i][0].replace(/^\\?/,''))\n        row[key] = row[key] || \"\";\n        let value = munge(e[i][1].id)\n        if( typeof row[key] != 'ARRAY' ) row[key]= [row[key]]\n        if( typeof row[key] === \"ARRAY\" ) row[key].push(value)\n        else row[key] = value;\n      }\n      // include keys even for empty values\n      for(let key of wanted){\n        key = key.replace(/^\\?/,'');\n        row[key] = row[key] || \"\"\n      }\n      table.push(row);\n    }\n    if(!table.length) console.log('No results!');\n    return table;\n   }\n   catch(e){console.log(e)}\n  }\nflatten(results,groupOn){\n  const newResults = {};\n  for(let row of results) {\n    let key = row[groupOn];\n    if(!newResults[key]) newResults[key]={};\n    for(let k of Object.keys(row)){\n      if(!newResults[key][k]) {\n        newResults[key][k]=row[k];\n        continue;\n      }  \n      if(newResults[key][k].includes(row[k])) continue;\n      if(typeof newResults[key][k]!=\"object\") newResults[key][k]=[newResults[key][k]]\n      newResults[key][k].push(row[k])\n    }\n  }\n  results = [];\n  for(let n of Object.keys(newResults)){\n    results.push(newResults[n])\n  }\n  return results;\n} \n\n} // class Sparql  \n\n","export class Table {\n  render(options) {\n    let results = options.parts;\n    if(!results || !results.length) {\n      console.log(\"No results!\");\n      return document.createElement('SPAN');\n    }\n    if(options.sortOn) {\n//      results.sort((a,b)=> a[options.sortOn] - b[options.sortOn] )\n      results = results.reverse();\n    }\n    let table = document.createElement('TABLE');\n    let columnHeaders = Object.keys(results[0]);\n    let headerRow = document.createElement('TR');\n    for(let c of columnHeaders){\n      let cell = document.createElement('TH');\n      cell.innerHTML = c;\n      cell.style.border=\"1px solid black\";\n      cell.style.padding=\"0.5em\";\n      cell.style.background=options.unselBackground;\n      cell.style.color=options.unselColor;\n      headerRow.appendChild(cell);\n    }\n    table.appendChild(headerRow);\n    for(let row of results){\n      let rowElement = document.createElement('TR');\n      for(let col of columnHeaders){\n        if(options.cleanNodes){\n          row[col] = row[col].replace(/.*\\#/,'').replace(/.*\\//,'');\n        }\n        let cell = document.createElement('TD');\n        cell.innerHTML = row[col];\n        cell.style.border=\"1px solid black\";\n        cell.style.padding=\"0.5em\";\n        cell.style.backgroundColor=options.background;\n        cell.style.color=options.color;\n        rowElement.appendChild(cell);\n      }\n      table.appendChild(rowElement);\n    }\n    table.style.borderCollapse=\"collapse\";\n    return table;\n  }\n}\n// ENDS\n","import * as u from '../utils.js';\n/*\n  form.render()   // define options via Javascript parameters\n  form.fromUrl()  // define options via ui:Component file\n  form.fromMem()  // define options via a ui:Component string\n\n*/\nexport class Form {\n\n  /**\n   * @param {String}      form - the URL of the form definition document\n   * @param {String}      formSubject - the data for the form\n   * @param {String}      [formString] - a string form definition\n   * @param {HTMLElement} [dom=document] - DOM container to hold form\n   * @param {Boolean}     [forceReload] - empty store before loading\n   * @param {String}      [formResultDocument] - place to store form results\n   * @param {Function}    [script] - Javascript to execute on form change\n   * @returns an HTML DIV element containing the form\n   */\n  async fromURL(url){\n    let node = UI.rdf.sym(url);\n    await UI.fetcher.load(node);\n    return await this.render({\n                form : url,\n         formSubject : u.getProperty(node,'ui:formSubject'),\n              script : u.getProperty(node,'ui:script'),\n      resultDocument : u.getProperty(node,'ui:formResultDocument'),\n    });\n  }\nasync render(o){\n    o.form ||= o.contentSource;\n    const dom = o.dom || document;\n    const container = document.createElement(\"DIV\");\n    container.classList.add('uic-form');\n    let form = UI.rdf.sym(o.form);\n    let subject;\n    if(o.formSubject) subject = UI.rdf.sym(o.formSubject) ;\n    if(o.formString){\n      UI.rdf.parse(string,UI.store,o.form,'text/turtle');\n    }\n    else await UI.store.fetcher.load(o.form);\n    if(!subject){\n       let fSubj = UI.rdf.sym('http://www.w3.org/ns/ui#formSubject');\n       subject = UI.store.any(form,fSubj)\n    }\n    if(o.forceReload){ \n      if(subject && subject.doc) UI.store.removeDocument(subject.doc());\n    }\n    if(subject) await UI.store.fetcher.load(subject.doc());\n    else {\n      container.innerHTML=\"ERROR : Could not load form subject \"\n      return container;\n    }\n    const title = document.createElement(\"H2\");\n    let doc = o.formResultDocument;\n    if(subject && !doc && subject.doc) doc = subject.doc();\n    const script = o.script || function (){\n      UI.store.fetcher.putBack(subject) // tempory work-around ui:ordered bug\n    };\n    try {\n      UI.widgets.appendForm(dom, container, {}, subject, form, doc, script);\n    }\n    catch(e){\n       // console.log(dom,container,subject,form,doc)\n       container.innerHTML = \"FORM ERROR:\"+e;\n    }  \n    return container;\n  }\n\n}\n\n/* OLD\n  async render(solidUI,options){\n    const container = document.createElement(\"DIV\",'uic-form');\n    const dom = window.document;\n    const form = await solidUI.loadUnlessLoaded(options.form);\n    await solidUI.loadUnlessLoaded(options.formSubject);\n    const subject = await solidUI.loadUnlessLoaded(options.formSubject);\n    if(!subject) return console.log(\"ERROR : Couldn not load form subject \",options.formSubject)\n    let doc = options.formResultDocument;\n    if(!doc && subject.doc) doc = subject.doc();\n    const script = options.script || function(){};\n    try {\n      UI.widgets.appendForm(dom, container, {}, subject, form, doc, script);\n    }\n    catch(e){return console.log(e)}  \n    if(options.onchange) {\n      const vals = container.querySelectorAll('.formFieldValue button');\n      for(let v of vals){\n        v.onclick = \"alert(3)\";\n      }\n    }\n    return container;\n  }\n\n*/\n","/*\n  NON-RDF \n   image pdf video audio text html graphviz markdown\n  RDF\n   SolidOSLink Form SparqlQuery DataTemplate PageDefinition \n*/\n\n\n/*\n  show[rdf|markdown|graphviz](uri,string,targetSelector)\n  mungeLabel(label)\n  PUT(url,content,contentType)\n*/\nimport {Sparql} from './model/sparql.js';\nimport {Table} from './view/table.js';\nimport {Form} from './view/form.js';\n//import mime from \"https://cdn.skypack.dev/mime\";\n\nexport class CU {\n\n  constructor(){\n    this.UIO = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n    this.ISA = UI.rdf.sym(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\");\n    this.PIM = UI.rdf.Namespace(\"http://www.w3.org/ns/pim/space#\");\n  }\n\n\nremoveClass(tag,cl){\n    document.querySelector(tag).classList.remove(cl);\n}\naddClass(tag,cl){\n    document.querySelector(tag).classList.add(cl);\n}\n\nnewElement(tag,id,classList,value){\n   let thing = document.createElement(tag);\n   if(id) thing.id = id;\n   if(classList) thing.classList = classList;\n   if(value) thing.value = value;\n   return thing;\n}\n\n  getProperty(subject,curie){\n    let [vocab,predicate] = curie.split(/:/);\n    return UI.store.any(subject,UI.ns[vocab](predicate)) || \"\";\n  }\n  getProperties(subject,curie){\n    let [vocab,predicate] = curie.split(/:/);\n    return UI.store.each(subject,UI.ns[vocab](predicate))  || [];\n  }\n  getValues(subject,curie){\n    let all = [];\n    let some = this.getProperties(subject,curie) || [];\n    for(let one of some){\n      all.push(one.value);\n    }\n    return all;\n  }\n\n  getObjects(subject,predicate){\n    return UI.store.each(subject,predicate).map((s)=>{return s.value});\n  }\n  getObject(subject,predicate){\n    let val = UI.store.any(subject,predicate);\n    return val && val.value ?val.value :\"\";\n  }\n\n  /*\n  displays rendered component in targetSelector if it is not null\n  returns rendereed component as an HTML-element\n\n  renderFromURL(url,targetSelector,forceReload);\n   \n\n  load from URL - renderComponent({url:\"\"});\n  load from STRING - renderComponent({url:\"\",string:\"\"});\n  load from HTML-ELEMENT - renderComponent({element:\"\"});\n\n    1. loads from url, string, or html-element\n       * if string, parses it into store\n       * else if !url, gets url from element dataset, loads into store\n       * else if !string && !element loads url into store\n       * if forceReload, does store.removeDocument before loading\n    2. finds subject from url or #this\n       * if url contains #, use it as subject\n       * else use url+#this as subject\n    3. \n \n            loads uri into store\n\n   renderComponent({\n     url,\n     string,\n     element,\n     forceReload,\n   })\n     \n  async renderComponent(url,string,element){\n    url = url.value ?url.value :UI.rdf.sym(url)\n    let uiType = this.getUItype(url);\n    let mainSubject = UI.store.rdf.sym( url.match(/\\#/) ?url :url+\"#this\" );\n    let node = await this.crossLoad(url,string,forceReload);\n    let subjectType = this.getUItype(mainSubject);\n  }\n   */\n\n  menuize(buttonGroupElement){\n    buttonGroupElement = document.querySelector(buttonGroupElement);\n    if(!buttonGroupElement) return;\n    let buttons = buttonGroupElement.querySelectorAll('BUTTON');\n    for(let b of buttons){\n      b.addEventListener('click',(e)=>{\n        let clicked = e.target;\n        for(let b2 of buttons){ b2.classList.remove('selected') }\n        b.classList.add('selected');\n      });\n    }\n  }\n\n  findType(uri,string){\n    if(!uri && typeof sourceFile != \"undefined\") uri = sourceFile;\n    if(!uri) return \"unknown\";\n    let type = uri.replace(/\\#.*/,'').replace(/\\?.*/,'').replace(/.*\\./,'');\n    if(!type) return \"unknown\";\n    if(type.match(/(md)|(markdown)/)) return \"markdown\";\n    if(type.match(/(dot)|(gv)/)) return \"graphviz\";\n    if(type.match(/(ttl)|(rdf)|(n3)/)) return \"rdf\";\n    if(type.match(/(html)|(css)|(js)/)) return type;\n    return \"unknown\";\n  }\n  async show(type,uri,string,targetSelector,forceReload,obj){\n    if(solidUI.hideTabulator) solidUI.hideTabulator();\n    type = type ?type.replace(/.*\\//,'') :this.findType(uri);\n    if(!type || !type.match(/(html|rss|markdown)/)) type = \"rdf\";\n    return await this._show[type](uri,string,targetSelector,forceReload,obj);\n\n    /*\n     OLD\n    */\n    if(type.match(/(turtle)|(rdf)|(n3)/)) type = \"rdf\";\n    if(type.match(/image/)) type = \"image\";\n    if(type.match(/video/)) type = \"video\";\n    if(type.match(/audio/)) type = \"audio\";\n    if(type.match(/graphviz/)) type = \"graphviz\";\n    if(type.match(/(javascript|json|text)/)) type = \"text\";\n    type = type.replace(/.*\\//,'');\n    if(this._show[type])\n       return await this._show[type](uri,string,targetSelector,forceReload,obj);\n  }\n\n  _show = {\n\n  image : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrc(uri,targetSelector);\n  },\n  pdf : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrc(uri,targetSelector);\n  },\n  video : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrcDoc(`<video controls=\"yes\" src=\"`+uri+`\" style=\"max-width:100vw;max-height:100vh\"></video>`,uri,targetSelector);\n  },\n  audio : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrcDoc(`<audio controls=\"yes\" src=\"`+uri+`\" style=\"margin-top:2em;\"></audio>`,uri,targetSelector);\n  },\n  text : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) return this.showIframeSrcDoc(string,uri,targetSelector);\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = string;\n    return div;\n  },\n  rss : async(uri,targetSelector) => {\n        let r = await window.fetch(uri);\n        let content = await r.text();        \n        content = content.replace(/X-Frame-Options/g,'');\n        uri = uri.replace(/^.*proxy\\?uri=/,'');\n        uri = new URL(uri);\n        return this.showIframeSrcDoc(content,uri,targetSelector);\n  },\n  html : async (uri,string,targetSelector) => {\n    if(uri.match(/\\.(md|markdown)$/)) return this._show['markdown'](uri,string,targetSelector);\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) return this.showIframeSrcDoc(string,uri,targetSelector);\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = string;\n    return div;\n  },\n  graphviz : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) {\n      document.querySelector(targetSelector).innerHTML = \"\";\n      try {\n        d3.select(targetSelector).graphviz().renderDot(string, ()=>{} );\n      } catch(e){ alert(e); }\n    }\n    else {\n      let div = document.createElement(\"DIV\");\n      try {\n        d3.select(div).graphviz().renderDot(string, ()=>{} );\n      } catch(e){ alert(e); }\n      return div;\n    }\n  },\n  markdown : async (uri,string,targetSelector,force,obj) => {\n    if(solidUI.hideTabulator) solidUI.hideTabulator();\n    string ||= (await this.loadFile(uri)).body;\n//    string = `<div class=\"markdown-content\" style=\"background:${solidUI.background};color:${solidUI.color}\">\\n\\n${string}\\n</div>`;\n    let parsedString = marked.parse(string);\n    if(obj && obj.styleSheet) \n      parsedString=`<link rel=\"stylesheet\" href=\"${obj.styleSheet}\">`+parsedString\n    const bodyStyle = `\n      <body class=\"markdown-content\" \n            style=\"background:${solidUI.pageBackground};color:${solidUI.pageColor}\"\n      >\n    `;\n    if(targetSelector){\n      let iframe = this.showIframeSrcDoc(parsedString,uri,targetSelector,bodyStyle);\n//      iframe.classList.add('markdown-content');\n      return iframe;\n    }\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = parsedString;\n    div.classList.add('markdown-content');\n    div.style.padding=\"4rem !important\";\n    return div; \n  },\n  Component : ()=>{\n    alert(\"utils.js Component\")\n  },\n  SolidOSLink : async (url,string,targetSelector,forceReload,obj)=>{\n    url ||= obj.href;\n    if(solidUI.showTabulator) solidUI.showTabulator();\n    let targetElement = document.getElementById('suicTabulator') || targetSelector\n    if(targetElement) targetElement.style.display=\"block\";\n    let targetOutline = targetElement ?targetElement.querySelector('#outline') || targetElement.querySelector('.outline') :null;\n      if(!targetOutline) {\n        targetElement=makeOutline();\n        targetOutline =  targetElement.querySelector('.outline') ;\n      }\n      let subject = UI.rdf.sym(url);\n      // let wantedPane = obj && obj.pane ?panes.byName(obj.pane) :null;\n      let wantedPane = obj && obj.pane ?obj.pane :null;\n      let plugin = obj ?obj.plugin :\"\";\n      plugin ||= \"\";\n      let displayTarget = obj ?obj.displayTarget :\"\";\n      if(plugin.match(/ProfileEditor/)) wantedPane = \"editProfile\";\n      if(plugin.match(/PreferencesEditor/)) wantedPane = \"basicPreferences\";\n//console.log(obj);\n      wantedPane = wantedPane ?panes.byName(wantedPane) :null;\n//      wantedPane ||= panes.byName('humanReadable');\n      const params = new URLSearchParams(location.search)\n      url = url.uri ?url.uri :url;\n      params.set('uri', url);\n      //setHistory(window.orgin+'/cm/?uri='+url);\n      let thisApp = '/cm/'\n      await window.outliner.GotoSubject(subject,true,wantedPane,true,null,targetOutline);\n      window.history.replaceState({}, '', `${thisApp}?${params}`);\n      return targetOutline;\n// REMOVE? ... needed for SolidOS Tools\n      let newTR = document.createElement('TR');\n      let firstTR=document.querySelector('table tr');\n      newTR.style['vertical-align']=\"top\";\n      newTR.innerHTML = firstTR.innerHTML;\n      let newOutline = document.createElement('TABLE');\n      newOutline.id = \"outline\";\n      newOutline.style.width=\"100%\";\n      newOutline.appendChild(newTR);\n      targetOutline.replaceWith(newOutline)\nconsole.log(22,targetOutline,newOutline)\n      targetOutline = newOutline\nconsole.log(23,targetOutline,newOutline)\n      return targetOutline;\n\n      function makeOutline(){\n        let div = document.createElement('DIV');\n        div.classList.add('TabulatorOutline');\n        let table = document.createElement('TABLE');\n        table.classList.add('outline');\n        div.appendChild(table);\n        return div;\n      }\n  },\n  Form : async(subject,targetSelector,forceReload)=>{\n    let uri = subject.doc ?subject.doc() :subject;\n    if(uri.value) uri = uri.value;\n    const form = await (await new Form()).render({ form:subject.value });\n    if(targetSelector){\nif(!targetSelector.startsWith('#')) targetSelector = '#'+targetSelector;\n      document.querySelector(targetSelector).innerHTML = \"\";\n      document.querySelector(targetSelector).appendChild(form);\n      // return await this.showIframeSrcDoc( form.outerHTML, targetSelector );\n      // let src =  \"showForm.html?uri=\" + encodeURI(uri) ;\n      // return this.showIframeSrc( src, targetSelector );\n    }\n    return form;\n  },\n  SparqlQuery : async(subject,targetSelector,forceReload)=>{\n    let e = (UI.store.any(subject,this.UIO('endpoint'),null)||\"\").value;\n    let q = (UI.store.any(subject,this.UIO('query'),null)||\"\").value;\n    q = q.replace(/\\$\\{[^\\}]*\\}/g,'');\n    let table = (new Table()).render({\n      parts : await (new Sparql()).sparqlQuery(e,q,forceReload),\n      cleanNodes : true,\n      sortOn : 'term'\n    });\n    if(targetSelector) {\n      document.querySelector(targetSelector).innerHTML=\"\";\n      document.querySelector(targetSelector).appendChild(table);\n    }\n    return table;\n  },\n  DataTemplate : async(subject,targetSelector,store)=>{\n    store ||= UI.store;\n    let query =  this.getUIterm(subject,'query');\n    let endpoint =  this.getUIterm(subject,'endpoint');\n    let template = this.getUIterm(subject,'template');\n    let data = await (new Sparql()).sparqlQuery(endpoint,query,store);\n    let interpolated = \"\";\n    for(let row of data.reverse()){\n      interpolated += template.interpolate(row);\n    }\n    if(targetSelector) {\n      this.showIframeSrcDoc(interpolated,subject,targetSelector);\n    }\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = interpolated;\n    return div;\n  },\n  PageDefinition : async(subject,targetSelector)=>{\n    subject = this.getMainSubject(subject);\n    let DM = new DOMParser();\n    let XS = new XMLSerializer();\n    let templateURL = this.getUIterm(subject,'pageTemplate');\n    let templateInfo = await this.loadFile(templateURL)\n    let dom = DM.parseFromString( templateInfo.body,\"text/html\");\n//alert( XS.serializeToString(dom) );\n    let parts =  UI.store.match(subject,this.UIO('component'));\n    for(let p of parts){\n      p=p.object;\n      let component = \"\";\n      let label, url;\n        label = this.getObject(p,this.UIO(\"label\"));\n        url = this.getObject(p,this.UIO(\"href\"));\n/*\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      for(let pstmt of p){\n        if(pstmt.predicate.value.match(\"label\")) label = pstmt.object.value;\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      }\n*/\n      let i = this.fileInfo(url);\n      if(i && label)\n        dom.querySelector('#'+label).appendChild( await this.show(i.contentType,url) );\n    }\n    dom = XS.serializeToString(dom);    \n    if(targetSelector) await this.showIframeSrcDoc(dom,url,targetSelector);\n    return dom;\n/*\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = this.getUIterm(subject,'template');\n    let x = this.getUIterm(subject,'template');\nalert(x)\n    let parts =  this.getUIterm(subject,'parts');\n    for(let p of parts){\n      let component = \"\";\n      let label, url;\n      for(let pstmt of p){\n        if(pstmt.predicate.value.match(\"label\")) label = pstmt.object.value;\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      }\n      let type = this.findType(url);\n      div.querySelector('#'+label).appendChild( await this.show(type,url) );\n    }\n    if(targetSelector) await this.showIframeSrcDoc(div.innerHTML,targetSelector);\n    return div;\n*/\n  },\n  rdf : async (uri,string,targetSelector,forceReload,obj) => {\n    obj ||= {};\nif(solidUI.showTabulator) solidUI.showTabulator();\n    if(obj.dataSourceType){\n        return await this._show[obj.dataSourceType](uri,string,targetSelector,forceReload,obj);\n    }\n    try {\n      let mainSubject = UI.rdf.sym( uri.match(/\\#/) ?uri :uri+\"#this\" );\n      let node = mainSubject;\n      await this.crossLoad(uri,string,forceReload);\n      let subjectType = this.getUItype(mainSubject);\n      if(subjectType && subjectType.match(/(Form)/)) {\n//OLD      if(subjectType && this._show[subjectType]) {\n        return await this._show[subjectType](mainSubject,targetSelector,forceReload);\n      }\n      else {\n        return await this._show.SolidOSLink(UI.rdf.sym(uri),targetSelector,forceReload,obj);\n      }\n      let subjects = UI.store.each(null,null,null,node.doc());\n      let visitedSubject = {}\n      let str = \"\";\n      for(let subject of subjects){\n        if(visitedSubject[subject.value]===1) continue;\n        visitedSubject[subject.value]=1;\n        str += `<br><div style=\"font-weight:bold\">${this.mungeLabel(subject)}</div>`;\n        let stmts = UI.store.match(subject,null,null,node.doc());\n        for(let stmt of stmts){\n          let p = this.mungeLabel(stmt.predicate);\n          let o = stmt.object.value;\n          str += `&nbsp;&nbsp;&nbsp;<b>${p}</b> : ${o}<br />`\n        }\n      }\n      if(targetSelector) {\n        return this.showIframeSrcDoc(str,uri,targetSelector);\n      }\n      let div = document.createElement(\"DIV\");\n      div.innerHTML = str;\n      div.style.width=\"640px;\";\n      return div;\n    } catch(e) { alert(e); return e; }\n  },\n}\n\nmungeHash(uri){\n  return UI.rdf.sym( uri.match(/\\#/) ?uri :uri+\"#this\" );\n}\nasync dataTemplate2Iframe(mainSubject,targetSelector){\n  let query =  this.getUIterm(mainSubject,'query');\n  let endpoint =  this.getUIterm(mainSubject,'endpoint');\n  let template = this.getUIterm(mainSubject,'template');\n  let data = await (new Sparql()).sparqlQuery(endpoint,query,UI.store);\n  let interpolated = \"\";\n  for(let row of data.reverse()){\n    interpolated += template.interpolate(row);\n  }\n  this.showIframeSrcDoc(interpolated,mainSubject,targetSelector);\n  return interpolated;\n}\nasync template2Iframe(mainSubject,targetSelector){\n       let queryURL =  this.getUIterm(mainSubject,'query');\n        await UI.store.fetcher.load(queryURL);\n        let querySubject = UI.rdf.sym(queryURL+\"#this\");\n        let endpoint =  this.getUIterm(querySubject,'endpoint');\n        let query =  this.getUIterm(querySubject,'query');\n        let before =  this.getUIterm(mainSubject,'before');\n        let beforeQueryURL =  this.getUIterm(mainSubject,'beforeQuery');\n        await UI.store.fetcher.load(beforeQueryURL)\n        let beforeQuerySubject = UI.rdf.sym(beforeQueryURL+\"#this\");\n        let beforeEndpoint=this.getUIterm(beforeQuerySubject,'endpoint');\n        let beforeQuery=this.getUIterm(beforeQuerySubject,'query');\n        let beforeData = await (new Sparql()).sparqlQuery(beforeEndpoint,beforeQuery,UI.store);\n        before = before.interpolate(beforeData[0])\n        let data = await (new Sparql()).sparqlQuery(endpoint,query,UI.store);\n        let recurring =  this.getUIterm(mainSubject,'recurring');\n        let after =  this.getUIterm(mainSubject,'after');\n        let middle = \"\";\n        for(let row of data.reverse()){\n          middle += recurring.interpolate(row);\n        }\n        let interpolated = before + middle + after;\n        this.showIframeSrcDoc(interpolated,targetSelector);\n        return interpolated;\n}\nmakeIframe(){\n  let iframe = document.createElement('IFRAME');\n  iframe.style = \"height:100%;width:100%;border:none\";\n  return iframe;\n}\nshow_iframe(iframe,targetSelector){\n  iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n  targetSelector = typeof targetSelector===\"string\" ? document.querySelector(targetSelector) :targetSelector;\n  targetSelector.innerHTML=\"\";\n  targetSelector.appendChild(iframe);\n  return iframe;\n}\nshowIframeSrc(src,targetSelector){\n  let iframe = this.makeIframe();\n  iframe.src = src;\n  if(targetSelector) this.show_iframe(iframe,targetSelector);\n  else return iframe;\n}\nshowIframeSrcDoc(content,uri,targetSelector,body){\n  body  ||= \"<body>\"\n  let iframe = this.makeIframe();\n  content = content.replace(/X-Frame-Options/g,'');\n  if(uri) {\n    uri = new URL(uri);\n  }\n   const b = uri ?`<base href=\"${uri.origin}${uri.pathname}\">` :\"\";\n   iframe.srcdoc = `${body}${b}${content}</body>`\n   iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n   return this.show_iframe(iframe,targetSelector);\n}\n\n  /* makeSelector(options,onchange,selected,targetSelector,size,)\n       options : array\n       onchange : function\n       selected : string,      // must be in options array\n       targetSelector : string // = a css selector e.g. \"#foo .bar\"\n     returns an HTML select element\n   */\n  makeSelector(options,onchange,selected,targetSelector,size,o){\n    let selectEl = document.createElement('SELECT');\n    selectEl.style.background = o.darkBackground;\n    selectEl.style.width = \"100%\";\n    selectEl.style[\"margin-top\"] = \"1rem\";\n    for(let option of options){\n      let value,label;\n      if(typeof option===\"string\") value = label = option;\n      else {\n        value = option[0]\n        label = option[1]\n      }\n      label=(label||value).replace(/^http:\\/\\//,'').replace(/^https:\\/\\//,'');\n      if(!label.endsWith(\"/\"))\n         label = label.replace(/.*\\//,'')\n      if(!label || !option) continue;\n      label ||= \"/\";\n      let optionEl = document.createElement('OPTION');\n      optionEl.style.color = o.lightBackground;\n//      optionEl.innerHTML = option.replace(/http[s]*:\\/\\/[^\\/]*\\//,'') || option;\n      optionEl.value = optionEl.title = value;\n      optionEl.style.fontSize = \"large\";\n      optionEl.style.color = o.color || solidUI.buttonColor;\n      optionEl.style.backgroundColor = o.background || solidUI.buttonBackground;\n      optionEl.innerHTML = label;\n      selectEl.appendChild(optionEl);\n    }\n\n    /* HIGHLIGHT SELECTED */\n    if(selected) selectEl.value = selected;\n    selectEl.value ||= selectEl.childNodes[0].value;\n\n//    selectEl.addEventListener('click',async(e)=>{\n//      onchange(e.target.value)\n//    })\n    selectEl.addEventListener('change',async(e)=>{\n      onchange(e.target.value)\n    })\n    if(size) selectEl.size=size;\n    if(targetSelector) {\n      let targetEl = document.querySelector(targetSelector)\n      targetEl.innerHTML = \"\"\n      targetEl.appendChild(selectEl);\n    }\n    return selectEl;\n  }\n  getParent(url){\n    let parent = url.replace(/\\/$/,'').replace(/\\/[^\\/]*$/,'/');\n    return parent;\n  }\n  fileInfo(url){\n    if(!url) return;\n    if(typeof url!=\"string\") url = url.url || url.uri;\n    let newu;\n    try{ newu = new URL(url); }\n    catch(e){console.log(77,url,e); return {} };\n    let file = newu.pathname.replace(/.*\\//,'').replace(/\\.[^\\.]*$/,'');;\n    file = file===newu ?\"\" :file;\n    let ext = newu.pathname.replace(/.*\\//,'').replace(/.*\\./,'');\n    ext = ext===file ?\"\" :ext;\n    /*\n     * type is  the Ace-Editor type e.g. turtle, html, markdown\n     * contentType is Iana media type e.g. text/turtle, etc.\n    */\n    let type,contentType;\n    if(ext.match(/(md)|(markdown)/)) type = \"markdown\";\n    if(ext.match(/(dot|gv)/)) type = \"graphviz\";\n    if(ext.match(/(ttl|rdf|n3)/)) type = \"rdf\";\n    if(ext.match(/txt/)) { type=\"text\"; contentType=\"text/plain\" }\n    if(ext.match(/(html)|(css)|(js)/)) type = ext;\n    if(ext.match(/(gif|jpg|jpeg)/)) type = ext;\n    type ||= \"unknown\";\n    let path = newu.pathname.replace(/[^\\/]*$/,'');\n    file = decodeURI(file);\n    let isContainer = !file && path.endsWith(\"/\");\n    contentType = \"unknown\";    \n    if(isContainer) contentType = \"text/turtle\";\n    else if(window.mime) contentType = window.mime.getType(url);\n    let editable = contentType && !contentType.match(/(image|video|audio|unknown)/);\n    return {\n      url,\n      file,\n      path,\n      ext,\n      label : (file||path) + (ext ?\".\"+ext :\"\"),\n      editable,\n      type,         // markdown, graphviz, html, rdf ...\n      contentType,  // text/vnd.graphviz, text/turtle ...\n      host : newu.origin + \"/\",\n      isHidden : url.match(/\\/\\./) ?true :false,\n      isContainer,\n    }\n  }\n\n\nasync crossLoad(uri,string,forceReload){\n  if(forceReload) {\n//     UI.store.removeDocument(UI.rdf.sym(uri));\n  }\n  if(string) UI.rdf.parse(string,UI.store,uri,'text/turtle');\n  else await UI.store.fetcher.load(uri);\n  let i = this.fileInfo(uri);\n  i.contentType = \"text/turtle\";\n  i.type = \"rdf\";\n  i.editable = true;\n  return i;\n} \nasync gitApiFetch(uri){\n  uri = uri.replace(/https:\\/\\/github.com/,'https://api.github.com/repos');\n  uri = uri.replace(/blob\\/main\\//,'contents');\n  const options = {Accept: \"application/vnd.github.v3+html\"};\n  let response = await fetch(uri,options);\nconsole.log(await response.text() );\n//  let json = await response.json();\n//  return atob(json.content);\n}     \n\nasync loadFile(uri,isRepeat){\n  let fileInfo = this.fileInfo(uri);\n  if(uri.match(/https:\\/\\/github.com/)) {\n    fileInfo.body = await this.gitApiFetch(uri);\n    fileInfo.editable = !fileInfo.contentType.match(/(image|video|audio|pdf|unknown)/);\n    fileInfo.ok=true;\n    return fileInfo;  \n  }\n  try {\n     // OMIT CREDENTIALS NEEDED FOR MOST FETCHES\n     let creds = isRepeat ?{mode:\"no-cors\"} :{credentials:\"omit\"}\n     let response;\n     try { \n       response = await UI.store.fetcher.webOperation(\"GET\",uri,creds);\n     }\n     catch(e) {\n       response = await UI.store.fetcher.webOperation(\"GET\",uri);\n     }\n//     let response = await UI.store.fetcher.webOperation(\"GET\",uri);\n     if(response.ok) {\n       fileInfo.contentType = response.headers.get(\"Content-Type\");\n       fileInfo.editable = !fileInfo.contentType.match(/(image|video|audio|pdf|unknown)/);\n       fileInfo.body = response.responseText;\n       fileInfo.ok=response.ok\n     }\n     else alert(\"utils.loadFile() \"+response.status)\n     return fileInfo\n  }\n  catch(e) {\n     console.log('failed load, trying proxy'+e)\n     if(!isRepeat) return this.loadFile(\"https://solidcommunity.net/proxy?uri=\"+encodeURI(uri),'repeat');\n     if(!isRepeat) return this.loadFile(\"https://solidcommunity.net/proxy?uri=\"+encodeURI(uri),'repeat');\n//     if(!isRepeat) return this.loadFile(\"https://solidcommunity.net/proxy?uri=\"+encodeURI(uri),'repeat');\n//     if(!isRepeat) return this.loadFile(\"https://solidcommunity.net/proxy?uri=\"+encodeURI(uri),'repeat');\n  }\n}\n\ngetUItype(subject){\n  subject = this.getMainSubject(subject);\n  let types = UI.store.each(subject,this.ISA,null);\n  for(let type of types){\n    if(type.value.match(/ui\\#/)) return type.value.replace(/.*\\#/,'');\n  }\n}\ngetUIterm(subject,term){\n   subject = this.getMainSubject(subject);\n   let val = UI.store.each(subject,this.UIO(term));\n   let newval = [];\n   if(val && val[0] && val[0].termType===\"Collection\"){\n     for(let e of val[0].elements){\n        newval.push( UI.store.match(e) );\n     }\n     return newval;\n   }\n   return val[0] ?val[0].value :val;\n}\ngetMainSubject(uri){\n  uri = uri.uri ?uri.uri :uri;\n  uri = uri.match(/\\#/) ?uri :uri+\"#this\";\n  try { return UI.rdf.sym(uri) }\n  catch(e){console.log(e)}\n}\nmungeLabel = (label)=>{ \n if(!label)return \"\";\n if(label.termType===\"Literal\"){\n    return `\"${label}\"`;\n  }\n  label = label.value.replace(/.*\\#/,'').replace(/.*\\//,'');\n  if(label===\"type\") label = \"a\";\n  return label;\n}\nmungeURL = (url)=>{\n  let URL = document.getElementById(url).value;\n  if(!URL.startsWith('http')){\n    URL = window.location.href.replace('index.html','')+URL;\n  }\n  return URL;\n}\nPUT = async (url,content,cType)=>{\n  url = url.replace(/\\#[^\\#]*$/,'')\n  try {\n    let response = await UI.store.fetcher.webOperation('PUT',url,{\n      contentType : cType,\n      body: content,\n    });\n    return(response);\n  }\n  catch(e) {return e;}\n}\n}\n\n/* https://stackoverflow.com/a/41015840/15781258\n * usage :\n *   const template = 'Hello ${var1}!';\n *   const data     = { var1: 'world'};\n *   const interpolated = template.interpolate(data);\n */\nString.prototype.interpolate = function(params) {\n  const names = Object.keys(params);\n  const vals = Object.values(params);\n  return new Function(...names, `return \\`${this}\\`;`)(...vals);\n}\n","/*\n  color       // a ui:Color for text of the selector\n  background  // a ui:Color for the background of the selector\n  highlight   // a ui:Color for the selector options background\n  size        // the number of options to show\n  parts       // an array of options\n  dataSource  // a component address that yields an array of options\n  onchange    // action to take on selection\n*/\nexport function optionSelector(j) {\n    const hasSuic = typeof solidUI !=\"undefined\";\n    j.color ||= hasSuic ?solidUI.menuColor :\"#000000\";\n    j.background ||= hasSuic ?solidUI.menuBackground : \"#c0c0c0\";\n    j.highlight ||= hasSuic ?solidUI.menuHighlight : \"#909090\";\n    j.size ||=  hasSuic ?solidUI.selectorSize :0;\n    const borderColor = j.color;\n    const wrapper = document.createElement('DIV');\n    let collectionSelector = document.createElement('DIV');\n    collectionSelector.style = `border:1px solid ${borderColor};border-bottom:none`;\n    collectionSelector.style.background=j.background;\n    collectionSelector.style.color= j.color;\n    j.parts ||= j.dataSource.parts;\n    const firstOption = j.label || j.parts[0] ?(j.parts[0]).label || j.parts[0]:\"\";\n    collectionSelector.innerHTML = `<div style=\"border-bottom:1px solid ${borderColor}; padding:0.5em;cursor:pointer;\"><span style=\"display:table-cell;width:100%\">${firstOption}</span><span style=\"display:table-cell;width:100%;text-align:right;\">⌄</span></div>`;\n    let collectionsList = document.createElement('DIV');\n    collectionSelector.querySelector('div').onclick=()=>{\n      collectionsList.style.display||=\"block\";     \n      if(collectionsList.style.display===\"block\") collectionsList.style.display=\"none\";     \n      else collectionsList.style.display=\"block\";     \n    }\n    for(let p of j.parts){\n      p.link ||= p.value;\n      p.type ||= p.contentType;\n      collectionsList.innerHTML += `<a href=\"${p.link}\" style=\"text-decoration:none;display:block;border-bottom:1px solid ${borderColor}; padding:0.5em; background-color:${j.highlight};color:${j.color}\" data-label=\"${p.label}\" data-link=\"${p.link}\" data-type=\"${p.type}\">${p.label}</a>`;\n    }\n    let anchorList = collectionsList.querySelectorAll('A');\n    for(let anchor of anchorList){\n      anchor.onclick = (e)=>{\n         e.preventDefault();\n         let el = e.target;\n         for(let a of anchorList){\n           if(a==el) a.style.background=j.background;\n           else  a.style.background=j.highlight;\n         }\n         if(!j.size) {\n            el.parentElement.style.display=\"none\";\n            collectionSelector.querySelector('DIV SPAN').innerHTML=el.innerHTML;\n         }\n         console.log(99,el.href,el.dataset.type,el.dataset.link)\n         return j.onchange(el.innerHTML,el.href,el.dataset.type);\n      }\n    }\n    if(j.size){\n       if(j.size>j.parts.length) j.size=j.parts.length;              \n       j.size = (j.size*2)+1+\"rem\";\n       collectionsList.style = `border:1px solid ${borderColor};border-top:none;height:${j.size}`;\n       collectionsList.style.overflow=\"auto\";\n       collectionsList.style[\"max-height\"]=j.size;\n//       collectionsList.style[\"border-radius\"]=\"0.4rem\";\n    }\n    else {\n      collectionsList.style=`border:1px solid ${borderColor};border-top:none;display:none`;\n//      collectionSelector.style[\"border-radius\"]=\"0.4rem\";\n      collectionSelector.style[\"margin-bottom\"]=\"0.4rem\";\n      wrapper.appendChild(collectionSelector);\n    }\n    collectionsList.style[\"margin-bottom\"]=\"0.4rem\";\n    wrapper.appendChild(collectionsList);\n    return wrapper;\n  }\n\n\n","import {CU} from    '../utils.js';\nimport {optionSelector} from    '../view/optionSelector.js';\n\n/*\n *  myFeed = new Feed(solidUI,feedUri)\n *\n *  feedSelector()\n *  htmlDiv = feed.items2list() which calls feed.fetchAndParse()\n\nproxy\nhref || link\ndisplayType\nstandAlone\nlabel\n  selBackground\n  selColor\n  height\n  width\n\n */\n\n/*\n\n      \n*/\n\nexport class Feed {\n\nasync makeFeedSelector(topTopic,targetSelector,displayArea,o){\n  self = this;\n  self.displayArea = displayArea;\n\n  const u = new CU();\n  const ui = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n  const skos = UI.rdf.Namespace(\"http://www.w3.org/2004/02/skos/core#\");\n  const rdf = UI.rdf.Namespace(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\");\n  let targetElement = document.body;\n\n  await u.crossLoad(topTopic);\n  topTopic = UI.rdf.sym(topTopic);\n//  let topicNodes = UI.store.each(null,bookm('subTopicOf'),topTopic)\n//  let topicNodes = UI.store.each(topTopic,skos('memberList'))\n//  let topicNodes = UI.store.each(topTopic,ui('feedTopicList'))\n  let topicNodes = UI.store.each(null,rdf('type'),ui('FeedTopic'))\n//  topicNodes = topicNodes[0].elements;\n  let topics = [];\n  let onchange = async(label,link,type)=>{\n     await collectionSelector(link,targetSelector,o);\n     document.querySelector('#collectionSelector A').style.backgroundColor=solidUI.menuBackground;\n  };\n\n//  for(let n of topicNodes){\n//     topics.push([n.value, UI.store.any(n,ui('label')).value]);\n//  }\n//  let topicSelector = u.makeSelector(topics,onchange,null,null,3,o);\n  for(let n of topicNodes){\n     topics.push({link:n.value, label:UI.store.any(n,ui('label')).value,linkType:'Feed'});\n  }\n  let topicSelector = optionSelector({\n    parts : topics,\n    onchange,\n    size:3,\n  });\n  topicSelector.id=\"topicSelector\";\n  if(targetSelector){\n    targetElement = typeof targetSelector===\"string\" ?document.querySelector(targetSelector) :targetSelector;\n    targetElement.innerHTML=\"\";\n    let c = u.newElement('DIV','collectionHolder') ;\n    let i = u.newElement('DIV','itemSelector') ;\n    targetElement.appendChild(topicSelector);\n    targetElement.appendChild(c);\n    targetElement.appendChild(i);\n//    await collectionSelector(topics[0][0],targetElement,o);\n    await collectionSelector(topics[0].link,targetElement,o);\n  }\n  let selectors = targetElement.querySelectorAll('#feedMenu select')\n  for(let s of selectors){\n    s.style=\"display:block; width:100%;  padding:0.5rem; margin-bottom:1rem; border-radious:0.02rem;\";\n  }\n  document.querySelector('#topicSelector A').style.backgroundColor=solidUI.menuBackground;\n  document.querySelector('#collectionSelector A').style.backgroundColor=solidUI.menuBackground;\n  document.querySelector('#itemSelector A').style.backgroundColor=solidUI.menuHighlight;\n    \n  // end of makeFeedSelector main function;\n\n  async function collectionSelector(topTopic,targetElement,o){\n    if(typeof topTopic === \"string\") topTopic = UI.rdf.sym(topTopic);\n    await u.crossLoad(topTopic);\n//    let topicNodes = UI.store.each(null,bookm('hasTopic'),topTopic)\n//    let topicNodes = UI.store.each(topTopic,skos('memberList'))\n    let topicNodes = UI.store.each(null,skos('broader'),topTopic)\n//    topicNodes = topicNodes[0].elements;\n    let collections = [];\n  let onchange = async(label,link,type)=>{await itemSelector(link,targetSelector,o)};\n/*\n    let onchange = async(e)=>{\n       await itemSelector(e,targetSelector,o)\n    };\n    for(let n of topicNodes){\n       let href = UI.store.any(n,ui('href')).value;\n       let label = UI.store.any(n,ui('label')).value;\n       collections.push([href,label]);\n    }\n    let colSelector = await makeSelector(collections,onchange,null,null,6,o);\n*/\n    for(let n of topicNodes){\n       let link = UI.store.any(n,ui('href')).value;\n       let label = UI.store.any(n,ui('label')).value;\n       let linkType = 'Feed-Article';\n       collections.push({link,label,linkType});\n    }\n  let colSelector = optionSelector({\n    parts : collections,\n    onchange,\n    size:5,\n  });\n    colSelector.id=\"collectionSelector\";\n    let el = (targetElement||document).querySelector('#collectionHolder');\n    el.innerHTML=\"\";\n    el.appendChild(colSelector);\n    let selectors = el.querySelectorAll('#feedMenu select')\n    for(let s of selectors){\n      s.style=\"display:block; width:100%;  padding:0.5rem; margin-bottom:1rem; border-radious:0.02rem;\";\n    }\n    let options = el.querySelectorAll('#feedMenu option')\n    for(let o of options){\n      o.style.fontSize = \"large\";\n      o.style.color = json.color || solidUI.buttonColor;\n      o.style.backgroundColor = json.background || solidUI.buttonBackground;\n    }\n//    await itemSelector(collections[0][0],o);\n    await itemSelector(collections[0].link,o);\n  }\n\n  async function itemSelector(topTopic,o){\n    let elm = document.getElementById('itemSelector');\n    elm.innerHTML=\"\";\n    elm.appendChild( await self.items2list({href:topTopic},o)  );\n  }\n\n}\n\n  async fetchAndParse(feedUri,proxy){\n\n    // fetch feed URI & parse into a Dom structure\n    //\n//    proxy = typeof proxy===\"undefined\" ?window.origin+\"/proxy?uri=\" :proxy;\nproxy = typeof proxy===\"undefined\" ?\"https://solidcommunity.net/proxy?uri=\" :proxy;\n    feedUri = proxy + encodeURI( feedUri );\n\n    let feedDom;\n    try {\n      let response = await fetch( feedUri );\n      let feedContent = await response.text();\n      const domParser = new window.DOMParser();\n      feedDom = domParser.parseFromString(feedContent, \"text/xml\")\n    }\n    catch(e) { alert(e) };\n    // find items (RSS) or entries (Atom)\n    //\n    let items = feedDom.querySelectorAll(\"item\") || null;\n    items = items.length<1 ?feedDom.querySelectorAll(\"entry\") :items;\n\n    // parse items\n    //\n    let parsedItems=[];\n    items.forEach( el => {\n\n      // find item link, account for specific kinds of quirks\n      //\n      let link = el.querySelector(\"link\").innerHTML;\n      // vox\n      if(!link) link = el.querySelector('link').getAttribute('href');\n      // reddit\n      if(!link || link.match(/ /)){\n        link = el.querySelector('content').innerHTML.replace(/.*\\[link\\]/ ,'').replace(/a href=\"/,'').replace(/\"&gt;.*/,'').replace(/.*&lt;/,'');\n      }\n      // engadget\n      if(!link.match(/^http/)) link = link.replace(/.*\\[CDATA\\[/,'').replace(/\\]\\]\\>$/,'');\n\n      // always use https, not http\n      link = link.replace(/^http:/,'https:');\n\n      // get the title\n      let title = el.querySelector(\"title\").innerHTML;\n      title = title.replace(/^\\<\\!\\[CDATA\\[/,'');\n      title = title.replace(/\\]\\].*\\>/,'').trim();\n\n      parsedItems.push({title,link});\n    });\n    return parsedItems;\n  }  // END OF fetchAndParse()\n\n\n  async items2list(json,o){\n\n    let elm = document.getElementById('itemSelector');\n    elm.style = `\n      margin-top:0.5rem;\n      margin-top:1rem;\n      border:1px solid gray;\n      border-radius:0.4rem;\n      height:50vh;\n      overflow-y:scroll;\n      overflow-x:hidden; \n    `;\n    elm.innerHTML=\"\";\n    json.proxy ||= \"https://solidcommunity.net/proxy?uri=\";\n//    json.proxy ||= window.origin + \"/proxy?uri=\";\n    let items = \"\";\n    let externalLinkIcon = UI.icons.iconBase+`/noun_189137.svg`;\n    externalLinkIcon = `<img src=\"${externalLinkIcon}\" style=\"width:1em;height:1em;display:inline-block; padding-left:0.4em;opacity:1\">`;\n    for(let i of await this.fetchAndParse((json.href||json.link),json.proxy)){\n      if(json.displayTarget===\"window\"){\n/*\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\" style=\"color:${json.color||solidUI.buttonColor};background-color:${json.background||solidUI.buttonBackground};border:none !important\">\n            <a href=\"${i.link}\" target=\"_BLANK\" property=\"rss:title\">\n              ${i.title}\n            </a>\n          </li>\n        `;\n*/\n      }\n      else {\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\" style=\"color:${json.color||solidUI.buttonColor};background-color:${json.background||solidUI.buttonBackground}\">\n            <a href=\"${json.proxy+i.link}\" target=\"#display\" property=\"rss:title\" style=\"display:inline-block;border:none !important\">\n               <span style=\"color:${o.color||solidUI.buttonColor} !important;background:${o.background||solidUI.buttonBackground};display:inline-block;font-size:large\">${i.title}</span>\n            </a>\n            <a href=\"${i.link}\" class=\"skipMunge\" target=\"_BLANK\" class=\"external\">${externalLinkIcon}</a>\n          </li>\n        `;\n      }\n    }\n    const wrapper = document.createElement('DIV');\n    wrapper.property = \"xmlns:rss\";\n    wrapper.content = \"http://purl.org/rss/1.0/\";\n    if(json.standAlone) {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\" style=\"color:${json.color||solidUI.buttonColor};background-color:${json.background||solidUI.buttonBackground}\">\n          <b property=\"rss:title\">${json.label}</b>\n          <ul typeof=\"rss:items\" style=\"display:table;backgroundColor:${json.background||solidUI.buttonBackground}\">\n            ${items}\n          </ul>\n        </div>\n    `;\n\n    wrapper.querySelector('B').style=`padding:1em;padding-right:0;background:${json.background||solidUI.buttonBackground};color:${json.color||solidUI.buttonColor};border:1px solid grey;width:100%;display:inline-block`;\n    }\n    else {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\" style=\"color:${json.color||solidUI.buttonColor};background-color:${json.background||solidUI.buttonBackground}\">\n<!--          <div property=\"title\" style=\"background:${json.background||solidUI.buttonBackground};padding:1em;\">${json.label}</div>-->\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n    wrapper.querySelector('UL').style=`padding:0;padding-left:0;list-style:none;margin-top:0;width:100%;`;\n    }\n    wrapper.querySelector('UL').style=`padding:0;border:1px solid grey;list-style:none;margin-top:0;width:100%;height:${json.height};overflow-y:auto;`;\n    let anchors = wrapper.querySelectorAll('A');\n    solidUI.simulateClick(anchors[0]);\n    for(let anchor of anchors){\n      anchor.style=\"text-decoration:none;\"\n      anchor.fontSize=\"large\";\n      anchor.color = json.color || solidUI.buttonColor + \" !important\";\n      anchor.onclick = async (e) => {\n        if(e.target.parentNode.classList.contains('skipMunge')) return;\n        e.preventDefault();\n        let href = e.target.parentNode.href\n        await solidUI.util.show('rss',href,self.displayArea);\n        for(let an of anchors){\n          if(an==anchor) an.style.backgroundColor = json.menuBackground;\n          else an.style.backgroundColor = json.menuHightlight;\n        }\n/*\n        let iframe = document.createElement('IFRAME');\n        iframe.style=\"height:100%;width:100%;border:none\";\n        let r = await window.fetch(uri);\n        let content = await r.text();        \n        content = content.replace(/X-Frame-Options/g,'');\n        uri = uri.replace(/^.*proxy\\?uri=/,'');\n        uri = new URL(uri);\n        const b = `<base href=\"${uri.origin}/\"><base target=\"_BLANK\"><style>body{background:white !important}</style>`;\n        iframe.srcdoc = `<body>${b}${content}</body>`\n        iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n        let area = document.querySelector(self.displayArea);\n        area.innerHTML = \"\";\n        area.appendChild(iframe);        \n*/\n      }\n    }\n    let listItems = wrapper.querySelectorAll('LI');\n    for(let li of listItems){\n      li.style=\"padding:0.5em;border-radius:0.4em;background:${json.background||solidUI.buttonBackground}\";\n    }\n    if(json.width) wrapper.style.width = json.width;\n    return wrapper;\n  }\n}\n\n  async function initFeeds(){\n    let elms = document.querySelectorAll('[data-suicFeedMenu]');\n    for(let e of elms){\n      let topTopic = e.dataset.suicfeedmenu;\n      if(topTopic.startsWith('/')) topTopic = window.origin + topTopic;\n      let displayArea = e.dataset.display;\n      let menuArea = '#' + e.id;\n      const myFeed = new Feed();\n      await myFeed.makeFeedSelector(topTopic,menuArea,displayArea,);\n    }\n  }\n  initFeeds();\n","/*\n  mediaList()\n  mediaItem()\n  _fillMediaTemplate()\n*/\n\nexport async function mediaList(options){\n  const elm = document.createElement('SPAN');\n  for(let track of options.parts){\n    options.id = track.id;\n    elm.appendChild( await mediaItem(options) );\n  }\n  return elm;\n}\n\nexport async function mediaItem(options){\n  options.orientation ||= options.contentArea.dataset.orientation;\n  options.compact ||= 1;\n  if(options.includeMetadata || options.contentArea.dataset.includemetadata){options.compact=0};\n  options.allowDownload ||= options.contentArea.dataset.allowdownload;\n  let subject = UI.rdf.sym(options.id);\n  await UI.store.fetcher.load(subject);\n  let item = _getItemFromStore(subject);\n  item. vertical = document.body.offsetWidth<750 || options.orientation==1;\n  item.isVideo = false;\n  let types = UI.store.match(subject,UI.ns.rdf('type'));\n  for(let t of types){\n    if(t.object.value.match(/video/i)) item.isVideo =true;\n  }\n  return(_fillMediaTemplate(item,options) );\n}\n\nfunction _getItemFromStore(subject){\n  return({\n    byArtist : (UI.store.any(subject,UI.ns.schema('byArtist'))||{}).value,\n    encoding : (UI.store.any(subject,UI.ns.schema('encoding'))||{}).value,\n    image : (UI.store.any(subject,UI.ns.schema('image'))||{}).value,\n    description : (UI.store.any(subject,UI.ns.schema('description'))||{}).value,\n   country : (UI.store.any(subject,UI.ns.schema('countryOfOrigin'))||{}).value,\n  });\n}\n\nfunction _fillMediaTemplate(i,options){\n  let table = document.createElement('DIV');\n  i.download = options.allowDownload ?\"\" :`controlslist=\"nodownload\"`;\n  if(i.vertical){\n    i.align =\"center\";\n    i.width=\"310px\";\n    i.audioWidth=\"272px !important\";\n    i.imageStyle = \"width:272px;margin-top:0.5rem;margin-bottom:0.4rem;\";\n  }\n  else {\n    i.audioWidth=\"272px !important\";\n    i.imageStyle = \"height:180px;float:left;margin-right:1rem;margin-top:0.5rem;\";\n    i.width = \"590px\";\n    i.align =\"left\";\n  }\n  if(i.isVideo){\n    i.audio = \"\";\n    i.visual = `<iframe height=\"200\" src=\"${i.encoding}\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"float:left;margin:1rem;margin-left:0;margin-bottom:0;\"></iframe>`;\n  }\n  else {\n   i.visual = `<img src=\"${i.image}\" style=\"${i.imageStyle}\">`;\n   i.audio = `<audio title=\"${i.byArtist}\" controls ${i.download} preload=\"metadata\" style=\"width:${i.audioWidth}\"><source src=\"${i.encoding}\" type=\"audio/mpeg\"></audio>`\n  }\n  if(options.compact) {\n    let wrapper = document.createElement('SPAN');\n    wrapper.innerHTML = i.isVideo ?i.visual :i.audio;\n    return wrapper;\n  }\n    table.style = `min-height:212px; margin:0.8rem;text-align:${i.align}; padding:0.5rem; border-radius:0.5rem; background:#bb99ff; color:black; width:${i.width}`;\n    table.innerHTML = `\n  <div>\n    <b>${i.byArtist}</b> - ${i.country}\n  </div>\n  ${i.visual}\n  <p>${i.description}</p>\n  ${i.audio}\n    `;\nreturn table;\n//  else {\n    table.innerHTML = `\n  <tr>\n    <td colspan=2>\n        <b>${i.byArtist}</b> - ${i.country}\n    </td>\n  </tr>\n  <tr>\n    <th>\n        <img src=\"${i.image}\">\n    </th>\n    <td>\n        <p>${i.description}</p>\n        <audio controls controlsList=\"nodownload\" preload=\"metadata\">\n         <source src=\"${i.encoding}\" type=\"audio/mpeg\">\n        </audio>\n    </td>\n  </tr>\n`;\n//  }\n  return table;\n}\n","export class Accordion {\n  async render(solidUI,json) {\n    const parts = json.parts;\n    const accordion = solidUI.createElement('DIV','accordion');\n    if(!parts || !parts.length) return accordion;\n    for(let row of parts){\n       let item = solidUI.createElement( 'DIV' );\n       let rowhead = solidUI.createElement( 'DIV','' );\n       let name = solidUI.createElement('SPAN','',row.label || row.topic) ;\n       name.style.display=\"table-cell\";\n       name.style.width=\"100%\";\n       rowhead.appendChild(name);\n       let caret = solidUI.createElement('SPAN','caret-down','\\u2304') ;       \n       caret.style.display=\"table-cell\";\n       caret.textAlign=\"right\";\n       rowhead.appendChild(caret);\n       rowhead.style.backgroundColor = json.unselBackground;\n       rowhead.style.color = json.unselColor;\n       rowhead.style.padding=\"0.75em\";\n       rowhead.style.border=\"1px solid grey\";\n       rowhead.style.cursor = \"pointer\";\n       let rowContent = solidUI.createElement( 'DIV');\n       if(row.content) rowContent.innerHTML = row.content;\n       else {\n        console.log(json)\n        for(let i=0;i<row.linkLabel.length;i++){\n          let label = row.linkLabel[i];\n          let link = row.linkUrl[i];\n          let button=solidUI.createElement('BUTTON','',label);\n          button.setAttribute('data-link',link) ;\n          button.style.width=\"100%\";\n          button.style.border=\"none\";\n          button.style.background=\"transparent\";\n          button.style.marginBottom=\"0.25em\";\n          button.style.cursor=\"pointer\";\n          button.onclick = (e) => {\n            showByClass(e);\n          }\n          rowContent.appendChild(button);\n        }\n       }\n       rowContent.style.padding=\"0.75em\";\n       rowContent.style.border=\"1px solid grey\";\n       rowContent.style.borderTop=\"none\"; \n       rowContent.style.display = \"none\";\n       rowhead.onclick = (e)=>{\n         let showing = rowContent.style.display === \"block\" ;\n         let items = accordion.children;\n         for(let i of items) {\n           i.children[1].style.display=\"none\";\n         }\n         rowContent.style.display = showing ?\"none\" :\"block\";\n       }\n       rowContent.style.backgroundColor = json.background;\n       rowContent.style.color = json.color;\n       item.appendChild(rowhead);\n       item.appendChild(rowContent);\n       item.style.marginBottom = \"1em\";\n       accordion.appendChild(item);\n    }\n    solidUI.simulateClick(accordion.querySelector('DIV DIV DIV'))\n    return await solidUI.initInternal(accordion);  \n  }\n}\n","import {createLoginBox,applyProfile} from '../databrowser.js';\n\nexport class App {\n  async render(solidUI,app){\n\n    // GET/SET DEFAULTS\n    //\n    app = solidUI.setDefaults(app);\n    if(app.fullPage){\n      window.addEventListener('resize',()=>{\n         app = mainHeight(app);\n         let mm = document.getElementById('mainMain')\n         let tab = document.getElementById('suicTabulator')\n         if(mm) mm.style.height = app.mainHeight;\n         if(tab) tab.style.height = app.mainHeight;\n      });\n      document.body.style.overflow=\"hidden\";\n    }\n\n    // FIND NUMBER OF PIXELS IN 1 REM - VARIES WITH BROWSER/USER SETTINGS\n    function rem2px(){\n      let el = document.createElement('DIV');\n      el.style=\"height:1rem\";\n      document.body.appendChild(el);\n      let remSize = el.clientHeight;\n      document.body.removeChild(el);\n      return(remSize);\n    }\n    // SET BODY HEIGHT TO WINDOW HIEGHT MINUS HEADER + MENU \n    function mainHeight(app){\n      let rem = rem2px();\n      app.menuHeight = 2*rem;\n      app.headerHeight = 6*rem;\n      window.SolidAppContext = { scroll : app.headerHeight }\n      app.mainHeight = ( window.innerHeight-app.headerHeight )\n      app.headerHeight = app.headerHeight.toString()+'px';\n      app.mainHeight = app.mainHeight.toString()+'px';\n      return app;\n    }\n    app = mainHeight(app);\n\n    // DISPLAY HEADER IF app.logo OR app.title\n    //\n    app.logo ||= \"\";\n    app.title ||= \"\";\n    app.headerHeight = ( app.logo || app.title || app.adminMenu ) ?app.headerHeight : \"0\";\n\n    // DISPLAY MENU AT TOP OR LEFT DEPENDING ON app.orientation\n    //\n    app.leftMenu = \"\" ;\n    app.siteMenu = \"\" ;\n    if(app.orientation===\"horizontal\"){\n      app.leftMenuStyle = \"display:none\";\n    }\n    else {\n      app.leftMenuStyle = `\n        display:block;\n        width:36vw !important;\n        height:${app.mainHeight};\n        overflow-y:scroll;\n        margin:0;\n        padding:0;\n      `;\n    }\n\n    let appString = await this.getHTML(app);\n    let element = solidUI.createElement('SPAN','',appString);\n    let solidLogo = element.querySelector('#solidLogo')\n    if(solidLogo) solidLogo.src = 'https://solidproject.org/assets/img/solid-emblem.svg';\n\n//    if(typeof app.currentPodMenu==='object')app.currentPodMenu.target = element.querySelector('.main');\n    let menuElement = element.querySelector(\"#currentPodMenu\");\n    if( app.orientation===\"vertical\"){\n      menuElement = element.querySelector(\"NAV\");\n    }\n    const menu = await solidUI.processComponent(menuElement,app.currentPodMenu);\n    if(menu && menuElement) menuElement.appendChild(menu);\n    if(app.userMenu) {\n      const amenu = await solidUI.processComponent(menuElement,app.userMenu);\n      let umenu = element.querySelector('#userMenu')\n      if( umenu) umenu.appendChild(amenu);\n    }\n    if(app.loginBox) await createLoginBox(element);\n    await applyProfile(element); // munge site menu\n    if(app.initialContent) {\n      let content = await solidUI.getComponentHash(app.initialContent);\n      content = content.content.interpolate(solidUI.vars)\n      let main = element.querySelector('#mainMain');\n      if(main) main.innerHTML = content;\n    }\n    return element;\n  }\n\nrem2vw(rem) {\n  const viewportWithoutScroll = document.body.clientWidth;\n  const pxPerVw = 100/viewportWithoutScroll;\n  return( rem * pxPerVw);  \n}\nrem2vh(rem) {\n  const viewportWithoutScroll = window.innerHeight;\n  const pxPerVw = 100/viewportWithoutScroll;\n  return( rem * 16 * pxPerVw);  \n}\n  async getHTML(app){ \n     app.leftColumnColumnStyle ||= \"display:none\";\n     app.leftColumnColumnMenu ||= \"\";\n     app.siteMenu ||= \"\";\n     app.leftColumnColumnStyle ||= \"\";\n     app.iframeSrc ||= \"\";\n     app.iframeContent ||= \"\";\n     app.logoStyle = `\n             height: 3rem;\n            display: inline-block;\n       padding-left: 0.5rem;\n     `;\n     app.titleStyle = `\n       display:inline-block;\n       vertical-align:top; align:left;\n       font-size: 2rem;\n       padding-top: 0.4rem;\n       padding-left:1rem;\"\n     `;\n     app.appStye = `\n              display: flex;\n       flex-direction: column;\n                width: 100%;\n               height: 100%;\n     `;\n      app.mainStyle = `\n        padding:0rem;\n        width:100%;\n        overflow:scroll;\n        position:absolute;\n        top:${app.headerHeight} !important;\n        left:0;\n        height:${app.mainHeight};\n     `;\n     if(app.theme) {\n        try {      \n//          let response = await panes.UI.store.fetcher.webOperation('GET',app.theme);\n          let response = await window.fetch(app.theme);\n          let content = await response.text();\n          content = solidUI.fillTemplate(content,[app]);\n          return await content;\n        }\n        catch(e){console.log(e)}\n     }\nreturn \"\";\n     return `\n<!--APP-->\n<div class=\"solid-uic-app solid-main-app\">\n\n    <!--BANNER-->\n    <div class=\"app-banner\">\n\n        <!--USER IMAGE & NAME-->  \n        <img id=\"currentPodLogo\" src=\"\">\n        <div id=\"currentPodTitle\"></div>\n\n\n        <!--ADMIN MENU, LOGIN, SOLID LOGO-->\n        <div style=\"background:${app.unselBackground};text-align:center;position:absolute;top:0.5rem;right:7rem;\"><span id=\"adminMenu\" style=\"white-space: nowrap;\"></span> </div>\n        <div id=\"loginArea\"></div>\n        <img src=\"${app.logo}\" style=\"height:7rem;position:absolute;top:-0.5rem;right:-0.5rem\">\n\n        <!--PUBLIC MENU-->\n        <div id=\"currentPodMenu\" style=\"white-space:nowrap;position:absolute;top:3rem;left:7.4rem;\">${app.siteMenu}</div>\n\n    </div><!--BANNER-->\n\n    <!--MAIN WRAPPER-->\n<!--    <div style=\"display:flex;flex-direction:row;width:100%;height:100%;\"> -->\n    <div style=\"width:100%;height:100%;min-height:0;\">\n\n        <!-- LEFT COLUMN MENU (IF EXISTS) -->\n        <div class=\"leftColumn\" style=\"${app.leftMenuStyle}\">${app.leftMenu}</div>\n\n        <!--MAIN MAIN-->\n        <div id=\"mainMain\" style=\"min-height:0;${app.mainStyle}\"></div>\n\n        <!--MAIN TABULATOR-->\n            <div class=\"TabulatorOutline\" role=\"main\" id=\"suicTabulator\" style=\"${app.mainStyle}\">\n                <table id=\"outline\"></table>\n                <div id=\"GlobalDashboard\"></div>\n            </div>\n\n    </div><!--MAIN WRAPPER-->\n\n</div><!--APP-->\n<style>\n  #suicTabulator{\n    top:${app.headerHeight} !important;\n    overflow:scroll !important;\n    min-height: 0; \n  }\n  #suicTabulator table {\n    background:#7e7e7e !important;\n    color:white !important;\n  }\n  .solid-main-app {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n  }\n  .solid-main-app .app-banner {\n     width:100%;\n     display:flex;\n     background:${app.unselBackground};\n     color:black;\n  }\n  .solid-main-app input[type=\"button\"]:hover {\n    background:${app.selBackground};\n    color:${app.selColor};\n  }\n  .solid-main-app #currentPodTitle {\n    left:8rem;\n    font-size:1.3rem;\n    position:absolute;\n    top:1rem;\n  }\n  .solid-main-app #currentPodLogo {\n    height:${app.headerHeight}\n  }\n</style>\n\n    `;\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","export class Menu {\n\n  async render( solidUI, json,element ){\n    if(typeof json==='string'){\n      json = await solidUI.processComponent(element,json);\n    }\n    if(json.displayArea && json.landingPage){\n      await solidUI.processComponentSubject(json.landingPage);\n    }\n    let nav = solidUI.createElement('NAV','solid-uic-dropdown-menu')\n    let topUL   = document.createElement('UL')\n    let mainDisplay = document.createElement('DIV')\n    this.pluginMenuArea = document.createElement('DIV');\n    this.pluginMenuArea.id = \"pluginMenuArea\";\n    this.pluginMenuArea.style.paddingTop = \"3rem\";\n    const wrapper = solidUI.createElement('DIV');\n    wrapper.style.width=\"100%\";\n    wrapper.style[\"overflow-x\"]=\"hidden\";\n    topUL = _styleUL(topUL,json);\n    wrapper.appendChild(nav);\n    wrapper.appendChild(mainDisplay);\n    wrapper.appendChild(this.pluginMenuArea);\n    nav = _styleNav(nav,json);\n    mainDisplay = _styleMain(mainDisplay,json);\n    mainDisplay.innerHTML=\"\";\n    mainDisplay.classList.add('main');\n    nav.appendChild(topUL)\n    for(var i of json.parts){\n      topUL.appendChild( await this.renderMenuItem(i,json,mainDisplay) )\n    }\n    return(wrapper);\n  }\n\n  async renderMenuItem(i,json,mainDisplay){\n    if(i.menu && i.menu.type && i.menu.type === \"SparqlQuery\"){\n      let menu = await solidUI.processComponent(null,null,i.menu);\n      if(typeof menu===\"object\") i.parts = menu\n    }\n    if(!i.parts && i.dataSource ){\n       if(!i.pluginType || i.pluginType!=\"resourceSelector\"){\n         let x = await solidUI.getComponentHash(i.dataSource);\n         i.parts = x && x.parts ?x.parts :null;\n       }\n    }\n    let li = document.createElement('LI')\n    const sp =  document.createElement('SPAN')\n    sp.innerHTML = i.label;\n    li.appendChild(sp)\n    li.onmouseover = ()=>{\n      li.style.color = solidUI.menuColor;\n      li.style.background = solidUI.menuHighlight;\n    } \n    li.onmouseout = ()=>{\n      li.style.color = solidUI.menuColor;\n      li.style.background = solidUI.menuBackground;\n    } \n    if(i.popout || !i.parts){\n      /*\n       *  <li class=\"item\"><span>${i.label}</span></li>\n       */\n      li.classList.add('item')\n//\n      li.name = i.href || i.dataSource && i.dataSource.dataSource ?i.dataSource.dataSource :i.dataSource;\n      li.pluginType = i.pluginType;\n      \n      li.dataset.link = li.name;\n      li.dataset.linktype = i.pluginType;\n      li.dataset.label = i.label;\n\n      const self = this\n      li.onclick = async (e)=>{\n        let pluginURI = li.dataset.link;\n        let pluginType = li.dataset.linktype || li.dataset.link || \"\";\n        let pluginLabel = li.dataset.label;\n        let pArea = this.pluginMenuArea;\n        if(pluginType===\"SolidOS\"){\n          pArea = document.getElementById('outline')\n        }\n        let newId = pluginLabel.replace(/\\s/g,\"_\");\n        let newArea = pArea.querySelector('#'+newId);\n        let processedPlugin = await solidUI.processComponentSubject(pluginURI);\n        // = Plugin JSON\n        processedPlugin ||= i;\n        if(processedPlugin.landingPage){\n          await solidUI.processComponentSubject(processedPlugin.landingPage);\n        }\n        processedPlugin.contentArea = '#' + newId;\n        for(let plugin of pArea.childNodes){\n          plugin.style.display=\"none\";\n        }\n        if(!newArea && pluginType != \"SolidOS\"){\n           newArea = document.createElement('DIV');\n           newArea.id = newId;\n           pArea.appendChild(newArea);\n           newArea.innerHTML=`<h3 style=\"margin:0;margin-bottom:0.5rem;\">${e.target.innerHTML}</h3>`;\n           if(processedPlugin.type){\n             processedPlugin = await solidUI.processComponentJson(processedPlugin);\n             newArea.appendChild(processedPlugin);\n           }\n           else if(!processedPlugin.dataSource || !pluginType===\"SolidOS\") {\n              newArea.appendChild(processedPlugin)\n           }\n           if(pluginType===\"resourceSelector\"){\n             newArea.appendChild(processedPlugin)\n           }\n        }\n        if(newArea) {\n          newArea.style.display=\"block\";\n          newArea.focus();\n        }\n      }\n      li = _styleLI(li,json);\n    }\n    else {\n      /*\n        <li class=\"caret\">\n          <span class=\"caret\" style=\"cursor:pointer;\">${i.title}</span>\n          <ul class=\"nested\">\n          </ul>\n        </li>\n      */\n      li.classList.add('caret')\n      let ul2 = document.createElement('UL')\n      ul2.style.background=\"white\";\n      ul2.style.width=\"100%\";\n      li.appendChild(ul2)\n      ul2.classList.add('nested')     \n      if(typeof i.parts.length===\"undefined\") i.parts = [i.parts];\n      for(var m in i.parts){\n        let newItem = i.parts[m]\n        if(typeof newItem==='object') newItem.target=json.target;\n        ul2.appendChild( await this.renderMenuItem(newItem,json,mainDisplay) )\n      }\n    }\n    return li\n  }\n}\n\n// MENU CONTAINER\nfunction _styleNav(nav,json){\n//    nav.style.width=\"100%\";\n    nav.style.padding=\"0 !impotant\";\n    nav.style.background=json.color || solidUI.menuBackground;\n    nav.style.color=json.background || solidUI.menuColor;\n    nav.style.display=\"inline-block\";\n    nav.style.textAlign=json.position;\n    return nav;\n}\n\n// INITIAL STATE OF MENU\n//\nfunction _styleUL(ul,json){\n//    ul.style.width=\"100%\";\n      ul.style.color = solidUI.menuColor;\n      ul.style.background = solidUI.menuBackground;\n\n    ul.style.padding=\"0 !impotant\";\n    ul.style.margin=\"0 !impotant\";\n    ul.style.textAlign=json.position;\n    ul.style['padding-inline-start']=\"0 !important\";\n    return ul;\n}\n// TOP MENU ITEM DISPLAY\nfunction  _styleLI(li,json){\n    li.style.cursor=\"pointer\"\n    li.style.display=\"inline-block\";\n    li.style.padding=\"0.5rem\";\n    li.style.margin=\"0.25rem\";\n    li.style.color = json.color || solidUI.menuColor;\n    li.style.background = json.background || solidUI.menuBackground;\n    return li;\n }\n// MENU DISPLAY\nfunction  _styleMain(mainDisplay,json){\n    mainDisplay.style.width=\"100%\";\n/*\n    mainDisplay.style.backgroundColor = 'red' || json.background || solidUI.menuBackground;\n    mainDisplay.style.color = 'blue' || json.color || solidUI.menuColor;\n*/\n    return mainDisplay;\n }\n\n","export class Modal {\n/*\n<#MyModal>\n  a ui:Modal ;\n  ui:label           \"BUTTON_LABEL\" ;\n  ui:unselColor      \"BUTTON_COLOR\" ;\n  ui:unselBackground \"BUTTON_BACKGROUND_COLOR\" ;\n  ui:width           \"POPUP-BOX_WIDTH\" .\n\nModal.render({\n  label             // button label\n  unselColor        // button color\n  unselBackground   // button background color\n  width             // popup-box width\n  height            // popup-box height\n  content           // popup-box content string\n  iframe            // popup-box url for iframe\n});\n*/\n\n  async render (o,solidUI) {\n    let dom = o.dom || document;\n    let modal = document.createElement('SPAN');\n    if(o.targetSelector){\n      modal = dom.querySelector(o.targetSelector);\n    }\n    const s = _getCSS(o);\n    if(o.iframe){\n      let iframe = document.createElement(\"IFRAME\");\n      o.content = `<iframe src=\"${o.iframe}\" style=\"width:100%;height:90%;border:none\"></iframe>`;\n    }\n    if(!o.content && o.dataSource){\n      o.content = (await solidUI.processComponentSubject(o.dataSource)).outerHTML;\n    }\n    modal.innerHTML = `\n      <button style=\"${o.style}\" title=\"${o.title}\" onclick=\"window.openModal(this)\">\n        ${o.label}\n      </button>\n      <div style=\"${s['.modal']}\">\n        <div class=\"suic-modal-content\" style=\"${s['.modal-content']}\">\n          <div style=\"${s['.close']}\" onclick=\"window.closeModal(this)\">\n            &times;\n          </div>\n          ${o.content}\n        </div>\n      </div>\n    `;\n    let button = modal.querySelector('button')\n    button = solidUI.styleButton(button,o);    \n    if(solidUI) modal = await solidUI.initInternal(modal);  \n    if(o.contentArea) o.contentArea.appendChild(modal)\n    return modal;\n  }\n}\n  window.openModal = function (element,action){\n    element.parentElement.children[1].style.display = \"block\" ;\n  }\n  window.closeModal = function (element,action){\n    element.parentElement.parentElement.style.display = \"none\" ;\n  }\n\n  function _getCSS(current){\n    return {\n    \"button\": `\n      background-color:${current.darkBackground};\n      color:${current.unselColor};\n      cursor:pointer;\n    `,\n    \".modal\": `\n      display: none; /* Hidden by default */\n      position: fixed; /* Stay in place */\n      left: 0;\n      top: 0;\n      overflow: auto; /* Enable scroll if needed */\n      background-color: rgb(0,0,0); /* Fallback color */\n      background-color: rgba(0,0,0,0.8); /* Black w/ opacity */\n      width: 100%; /* Full width */\n      height: 100%; /* Full height */\n      z-index:20000;\n      text-align:center;\n    `,\n    \".modal-content\": `\n//      background-color: #fefefe;\n      background-color: ${current.lightBackground};\n      margin: 5% auto; /* 15% from the top and centered */\n      width:80vw;\n      height:85vh;\n      padding: 1rem;\n      border: 1px solid #888;\n      border-radius:0.5rem;\n    `,\n    \".close\": `\n      color:red;\n      text-align:right;\n      margin-bottom: 0.25rem;\n      font-size: 2rem;\n      font-weight: bold;\n      cursor:pointer;\n    `\n    }\n  }\n","export class BookmarkTree {\n\n  constructor(){\n    this.store = UI.rdf.graph();\n    this.fetcher = UI.rdf.fetcher(this.store,{fetch:UI.store.fetcher._fetch});\n  }\n  async init(){\n    for(let containerElm of document.getElementsByClassName('ocb')){\n      let subject = containerElm.dataset.component\n      this.bookmarksDisplay = containerElm.dataset.display\n      try {\n        subject = await this.loadUnlessLoaded(subject)\n        containerElm = containerElm.appendChild(document.createElement('UL') )\n        await this.getTopic(subject,containerElm,this.bookmarksDisplay,'start')\n        document.getElementById('ocbStart').click();\n      }\n      catch(e){ alert(e) }\n    }\n  }\n  async getTopic(topic,containingElement,bookmarksDisplay,start){\n    const self=this\n    if(typeof containingElement===\"string\") containingElement = document.querySelector(containingElement);\n    bookmarksDisplay ||= containingElement.dataset.display;\n    this.bookmarksDisplay ||= bookmarksDisplay;\n\n    let book = UI.rdf.Namespace(\"http://www.w3.org/2002/01/bookmark#\")\n    const rdf= UI.rdf.Namespace('http://www.w3.org/2000/01/rdf-schema#')\n    const rdfs=UI.rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#')\n    const ui=UI.rdf.Namespace('http://www.w3.org/ns/ui#');\n\n    topic = await this.loadUnlessLoaded(topic);\n    let topicTitle = this.store.any( topic, rdf('label'),null,topic.doc() )\n    topicTitle = (typeof topicTitle ===\"undefined\") ? \"???\" : topicTitle.value\n    let span = document.createElement('SPAN')\n    span.appendChild(document.createTextNode(topicTitle))\n    span.classList.add('caret')\n    span.addEventListener(\"click\", function() {\n      let elm = this.parentElement.querySelector(\".nested\")\n      if(elm) elm.classList.toggle(\"active\");\n      this.classList.toggle(\"caret-down\");\n    });\n    let li = document.createElement('LI')\n    if(start){\n      span.id = \"ocbStart\";\n//      containingElement.appendChild(span)\n    }\n//    else {\n      li.appendChild(span)\n      containingElement.appendChild(li)\n//    }\n    let subTopics  = this.store.each( null, book('subTopicOf'), topic )\n    if(subTopics.length>0){\n      let ul = document.createElement('UL')\n      ul.classList.add('bookmarkTree')\n      ul.classList.add('nested')\n      li.appendChild(ul)\n      for(let t in subTopics){\n        this.getTopic(subTopics[t],ul)\n      }\n    }\n    else {\n      let bookmarks = this.store.each( null, book('hasTopic'), topic )\n      let ul2 = document.createElement('UL')\n      ul2.classList.add('nested')\n      for(let b in bookmarks){\n        let bookmark = bookmarks[b]\n        let  bookmarkTitle = this.store.any( bookmark, rdf('label'),null,topic.doc() )\n        let isFeed=(this.store.match(bookmark,rdfs('type'),ui('Feed'))).length;\n        bookmarkTitle = bookmarkTitle ? bookmarkTitle.value : \"???\"\n        let bookmarkLink  = this.store.any( bookmark, book('recalls'),null,topic.doc() )\n        let bookElement = document.createElement(\"LI\")\n        if(isFeed) bookElement.classList.add('caret')\n        else bookElement.classList.add('item')\n        if(isFeed){\n          bookElement.addEventListener(\"click\", async function() {\n            alert(\"Feed Me!\");\n          });\n        }\n        else {\n          bookElement.addEventListener(\"click\", async function() {\n            document.querySelector(self.bookmarksDisplay).innerHTML=`<iframe src=\"${bookmarkLink.uri}\"></iframe>`;\n          });\n        }\n        bookElement.appendChild(document.createTextNode(bookmarkTitle))\n        let d = document.createElement('DIV')\n        d.classList.add('closed')\n        bookElement.appendChild(d)\n        ul2.appendChild(bookElement)\n      }\n      li.appendChild(ul2)\n    }\n  }\n  async loadUnlessLoaded(subject){\n    try {\n      const base = document.location.href.replace(/\\/[^\\/]*$/,'/')\n      subject  = (typeof subject===\"string\") ? subject : subject.uri\n      subject = subject.match('//') ? subject : base + subject\n      subject  = UI.rdf.sym(subject)\n      if(subject.termType==='BlankNode') return subject\n      if(!this.store.any(null,null,null,subject.doc())) \n        await this.fetcher.load(subject)\n    }\n    catch(e) { alert(e) }\n    return subject\n  }\n}\n\n/*\nwindow.addEventListener('DOMContentLoaded', async (event) => {\n  const ocb = new BookmarkTree()\n  ocb.init()\n})\n*/\n","   import {optionSelector} from './optionSelector.js';\n\n  /*\n     containerSelector\n       url\n       targetSelector\n       resourceOnChange\n       collectionSize\n       resourceSize\n\npodSelector({\n           parts : [ {label,dataSource}, ... ],\n     contentArea : display target of resource-picker\n     displayArea : display target of resource \n  collectionSize : integer, max height of selector element for collections\n    resourceSize : integer, max height of selector element for resources\n        onchange : action to occur when resource is selected\n});\n\npodSelector({\n           parts : [ {label,dataSource}, ... ],\n     contentArea : display target of resource-picker\n     displayArea : display target of resource \n  collectionSize : integer, max height of selector element for collections\n    resourceSize : integer, max height of selector element for resources\n        onchange : action to occur when resource is selected\n});\n\n  */\nexport async function podSelector(component){\n  let pods = [];\n  for(let pod of component.parts){\n    pods.push({value:pod.dataSource,label:pod.label});\n  }\n  let podsOnchange = async (selectorElement)=>{\n     let newHost = selectorElement.target.value;\n     component.dataSource = newHost;\n     return await resourceSelector(component);\n  };\n  pods = await selector(pods,podsOnchange,null,null,6,component);\n//  pods.style.height=\"2rem\";\n  let container = pods[0] ?pods[0].value :pods;\n\n  let hostEl = document.createElement('DIV');\n    hostEl.style = \"width:100% !important;text-align:right\";\n    hostEl.innerHTML = `\n       <span style=\"color:white !important\">Pod Explorer</span>\n       <a href=\"${container}\" style=\"display:inline-block !important;color:gold !important;text-align:right !important;\"><img src=\"https://solidproject.org/assets/img/solid-emblem.svg\" style=\"height:2rem;width:2rem;margin-left:2rem;\" /></a>\n    `;\n    let targetArea = typeof component.contentArea===\"string\" ?document.querySelector(component.contentArea) :component.contentArea;\n  targetArea.innerHTML=\"\";\n  targetArea.appendChild(hostEl);\n  targetArea.appendChild(pods);\n  component.dataSource = pods[0] ?pods[0].value :pods;\n  let resources = await resourceSelector(component);\n}\n\nexport async function resourceSelector(json){\n    let url = json.dataSource || json.podLink;\n    let targetSelector = json.contentArea;\n    let collectionSize = json.collectionSize || 6;\n    let resourceSize = json.resourceSize || 10;\n    let resourceOnchange = json.onchange;\n    if(typeof solidUI !=\"undefined\") {\n      resourceOnchange ||= async (label,link,cType)=>{\n        await solidUI.showPage(null,null,{label,link,cType})\n      };\n    }\n    const ldp = UI.rdf.Namespace(\"http://www.w3.org/ns/ldp#\");\n    if(!url) return \"\";\n    let container = url.replace(/\\/[^\\/]*$/,'/'); // in case we get passed a resource\n    let host = _host(container);\n    const base = UI.rdf.sym(container);\n    try {\n      await UI.store.fetcher.load(base);\n    }\n    catch(e) {\n      alert(e)\n    }\n    let files = UI.store.each(base,ldp(\"contains\"),null,base);\n    let resources = [];\n    let containers=[];\n    containers.push({value:base.uri,label:_pathname(base.uri)});\n    for(let file of files.sort()){\n      let name = file.value\n      let contentType=_findContentType(file);\n      if( _isHidden(name) ) continue; \n      if(name.endsWith('/')) containers.push({value:name,label:_pathname(name),contentType:'text/turtle'});\n      else resources.push({value:name,label:_pathname(name),contentType});\n    }\n    let parent = base.uri.replace(/\\/$/,'').replace(/\\/[^\\/]*$/,'/');\n    if(parent) {\n      if(!parent.endsWith(\"//\")) {\n        containers.splice(1,0,{value:parent,label:\"../\"});\n      }\n    }\n    let x = ()=>{};\n    let containerOnchange = async (selectorElement,link)=>{\n       let newContainer = link ?link :selectorElement.target.value;\n       json.dataSource = newContainer;\n/*\n       let thisContainerArea = document.querySelector('#PodSelector .containerSelector');\n*/\n       let newC =  await resourceSelector(json);\n/*\n       thisContainerArea.replaceWith(newC);\n       return thisContainerArea;\n*/\n       let areaToWriteIn = document.querySelector('#PodSelector');\n       if(areaToWriteIn){\n         areaToWriteIn.innerHTML = \"\";\n         areaToWriteIn.appendChild(newC);\n       }\n       return newC;\n    };\n    containers = await selector(containers,containerOnchange,url,null,collectionSize,json)\n    resources =  await selector(resources,resourceOnchange,url,null,resourceSize,json)\n    containers.classList = [\"containerSelector\"];\n    if(resources) resources.classList = [\"resourceSelector\"];\n    if(targetSelector && typeof targetSelector===\"string\") targetSelector = document.querySelector(targetSelector);\n    if(!targetSelector){\n       let myid = json.label.replace(/\\s/g,\"_\");\n       targetSelector = document.getElementById(myid);\n    }\n//    if(targetSelector) div = targetSelector.querySelector(\"#PodSelector\");\n    let div=document.createElement('DIV');\n  let hostEl = document.createElement('DIV');\n    hostEl.style = \"width:100% !important;text-align:right\";\n    hostEl.innerHTML = `\n       <span style=\"color:white !important\">Pod Explorer</span>\n       <a href=\"${container}\" style=\"display:inline-block !important;color:gold !important;text-align:right !important;\"><img src=\"https://solidproject.org/assets/img/solid-emblem.svg\" style=\"height:2rem;width:2rem;margin-left:2rem;\" /></a>\n    `;\n    div.innerHTML = \"\";\n    div.appendChild(hostEl);\n    div.id = \"PodSelector\"\n    if(containers) div.appendChild(containers);    \n    if(resources) div.appendChild(resources);    \n/*\n    let anchor = targetSelector.querySelector('A')\n    if(anchor)anchor.addEventListener('click',(e)=>{\n        e.preventDefault();\n        solidUI.showPage(e,{link:container,displayArea:json.displayArea});\n    });\n*/\n    return div;\n  }\n\n  function _findContentType(fileNode){\n    const isa = UI.rdf.sym(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\");\n    let types = UI.store.each(fileNode,isa).map((s)=>{return s.value});\n    for(let type of types){\n       if(type.match(/http:\\/\\/www.w3.org\\/ns\\/iana\\/media-types/))\n       return type.replace(/http:\\/\\/www.w3.org\\/ns\\/iana\\/media-types\\//,'').replace(/\\#Resource/,'');\n    }\n  }\n\n  function _isHidden(path){\n    if(!path) return true;\n    let name = new URL(path);\n    name = name.pathname;\n    name= name.endsWith('/') ?name.replace(/^\\//,'') :name.replace(/.*\\//,'');\n    if(name.startsWith('.') ) return true;\n    if(name.match(/\\/\\./) ) return true;\n    if(name.endsWith('~') ) return true;\n  }\n  function _pathname(path){\n    try{ \n      let p = new URL(path); \n      return p.pathname\n    }\n    catch(e){console.log(path,e); return path }; \n  }\n  function _host(path){\n    try{ \n      let p = new URL(path); \n      return p.host\n    }\n    catch(e){console.log(path,e); return path }; \n  }\n  function _origin(path){\n    try{ \n      let p = new URL(path); \n      return p.origin\n    }\n    catch(e){console.log(path,e); return path }; \n  }\n\n\n  /*\n     @paramoptions : an array of arrays [ [value1,label1], [value2,label2] ]\n     onchange : callback function when item selected\n     selected : value to select (from options)\n     targetSelector :  an optional css selector e.g. \"#foo .bar\" where output should be placed\n     size : optional integer size of selector\n     returns an HTML select element\n   */\n  export function selector(options,onchange,selected,targetSelector,size,o){\n\n    function mungeLabel(label){\n      if(!label) return \"\";\n      label = decodeURI(label);\n      if(!label.endsWith(\"/\")) label = label.replace(/.*\\//,'')\n      return label || \"/\";\n    }\n//...\n   for(let o of options){\n     o.label = mungeLabel(o.label);\n   }\n   return optionSelector({\n     parts : options,\n     onchange,\n     size,\n   });\n//...\n\n    function addAttributes(option,optionEl){\n      if(Object.keys(option).length>2){\n        for(let k of Object.keys(option)){\n          if(k===\"value\"||k===\"label\")continue;\n          optionEl.dataset ||= {};\n          optionEl.dataset[k] = option[k];\n        }\n      }\n      return optionEl;\n    }\n\n    let computedSize = options.length;\n    size ||= 0;\n    size = computedSize <= size ?computedSize :size;\n    size ||=1;\n/*\n    if(size ===1) {\n      let button = document.createElement('BUTTON');\n      button.value = options[0].value;\n      button.innerHTML = mungeLabel(options[0].label);\n      button.addEventListener('click',(e)=>{\n        onchange(e)\n//        onchange(e.target)\n      })\n      return button;\n    }\n*/\n    let selectEl = document.createElement('SELECT');\n    let optgroupEl = document.createElement('OPTGROUP');\n    optgroupEl.style.margin=0;\n    optgroupEl.style.padding=0;\n//    selectEl.appendChild(optgroupEl);\n    selectEl.style.background = o.darkBackground;\n    selectEl.style[\"margin-top\"] = \"1rem\";\n    for(let option of options){\n      let value,label;\n      if(typeof option===\"string\") value = label = option;\n      else {\n        value = option.value\n        label = option.label || option.value\n      }\n      if(!label || !option) continue;\n      label=mungeLabel(label);\n//      label = decodeURI(label);\n//      if(!label.endsWith(\"/\"))\n//         label = label.replace(/.*\\//,'')\n//      label ||= \"/\";\n      let optionEl = document.createElement('OPTION');\n      optionEl.style[\"font-size\"]=\"large\";\n//      optionEl.style = \"padding:0.25em;\";\n      optionEl.style.background = o.background || solidUI.buttonBackground;\n      optionEl.style.color = o.color || solidUI.buttonColor;\n      optionEl.value = value;\n      optionEl.title = value+\"\\n\"+(option.contentType||\"\");\n      optionEl.dataset ||= {};\n      optionEl.dataset.contenttype=option.contentType||\"\";\n      optionEl.innerHTML = label;\n      optionEl = addAttributes(option,optionEl);\n/*\n      if(Object.keys(option).length>2){\n        for(let k of Object.keys(option)){\n          if(k===\"value\"||k===\"label\")continue;\n          optionEl.dataset ||= {};\n          optionEl.dataset[k] = option[k];\n        }\n      }\n*/\n      //optgroupEl.appendChild(optionEl);\n      selectEl.appendChild(optionEl);\n    }\n\n    /* HIGHLIGHT SELECTED */\n    if(selected) selectEl.value = selected;\n//    selectEl.value ||= selectEl.childNodes[0].value;\n\n//    selectEl.addEventListener('click',async(e)=>{\n//      onchange(e.target)\n//    })\n    selectEl.addEventListener('change',async(e)=>{\n      onchange(e)\n//      onchange(e.target)\n    })\n    selectEl.size = size\n    selectEl.style.width=\"100%\";\n    if(targetSelector) {\n      let targetEl = document.querySelector(targetSelector)\n      targetEl.innerHTML = \"\"\n      targetEl.appendChild(selectEl);\n    }\n    return selectEl;\n  }\n\n","\nexport async function draggable(thing){\n  let component = thing;\n  if(typeof thing!=\"object\") component = await getFloatComponent(thing);\n  let id = getDraggableId(component);\n  let draggableDomElement = document.getElementById(id);\n\n  /* If it already exists, show it and return\n  */\n  if(draggableDomElement){\n    draggableDomElement.style.display = \"block\";\n    return;   \n  }\n\n  let div = document.createElement('DIV');\n  let header =  document.createElement('DIV');\n  let close =  document.createElement('SPAN');\n  let content =  document.createElement('DIV');\n  let pageEl = document.getElementById('right-column-tabulator');\n  content.innerHTML = pageEl.innerHTML;\n  pageEl.innerHTML = \"\";\n//  pageEl.style.display=\"none\";\n//  content = await getDraggableContent(component,content);\n  div.id = id;\n\n  close.innerHTML=\" X \";\n  close.style.color = \"#ffeeee\";\n  close.style[\"font-weight\"] = \"bold\";\n  close.style[\"margin-left\"] = \"2em\";\n  close.style.background = \"#000000\";\n  close.style.padding = \"0.2em;\"\n  close.style[\"border-radius\"] ||= \"0.2em\";\n  close.addEventListener('click',(e)=>{\n     e.target.parentNode.parentNode.style.display = \"none\";\n  });\n\n\n  /* STYLE OF THE DRAGGABLE DIV */\n  div.style = component.style || {};\n  div.style.position ||= \"absolute\";\n  div.style[\"z-index\"] ||= 3;\n  div.style.background ||= \"#f1f1f1\";\n  div.style.border ||= \"1px solid #d3d3d3\";\n  div.style[\"text-align\"] ||= \":center\";\n//  div.style.height=\"80%\";\n//  div.style.width=\"80%\";\n\n  /* STYLE OF DRAGGABLE DIV'S HEADER */\n  header.style = component.headerStyle || {};\n  header.style.padding ||= \"10px\";\n  header.style.cursor ||= \"move\";\n  header.style[\"z-index\"] ||= 4;\n  header.style[\"text-align\"] ||= \"center\";\n  header.style.background ||= \"#2196F3\";\n  header.style.color ||= \"#ffffff\";\n\n  /* STYLE OF DRAGGABLE DIV'S CONTENT */\n  content.style = component.style || {};\n  content.style.padding ||= \"1em\";\n\n  /* MOUSE ACTIONS */ \n  let pos1,pos2,pos3,pos4;\n  div.onmousedown = (e)=>{          /* DRAG ELEMENT CLICK */\n    e = e || window.event;\n    e.preventDefault();\n    pos3 = e.clientX;\n    pos4 = e.clientY;\n    document.onmouseup = (e)=>{      /* DRAG ELEMNT DROP */\n      document.onmouseup = null;\n      document.onmousemove = null;\n    }\n    document.onmousemove = (e)=>{    /* DRAG ELEMENT DRAG */\n      e = e || window.event;\n      e.preventDefault();\n      pos1 = pos3 - e.clientX;\n      pos2 = pos4 - e.clientY;\n      pos3 = e.clientX;\n      pos4 = e.clientY;\n      div.style.top = (div.offsetTop - pos2) + \"px\";\n      div.style.left = (div.offsetLeft - pos1) + \"px\";\n    }\n  };\n\n  header.appendChild(close);\n  div.appendChild(header);\n  div.appendChild(content);\n  document.body.appendChild(div);\n  return div;\n\n  /* UTILITY FUNCTIONS */\n  function getDraggableId(component){\n    return component.label.replace(/\\s+/g,\"_\");\n  }\n  async function getDraggableContent(component,content){\n    let ds;\n    header.innerHTML = `<span>${component.label}</span>`;\n    if(component.content) {\n      content.innerHTML = component.content;\n    }\n    else if(component.dataSource) {\n      ds = await solidUI.processComponent(null,component.dataSource);\n      content.appendChild( ds );\n    }\n    else if(component.dataSourceType) {\n      ds=await solidUI.util.show(component.dataSourceType,null,null,null,null,component);\n      content.appendChild( ds );\n    }\n    return content;\n  }\n  async function getDraggableComponent(uri){\n    let ui = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n    let c = {};\n    uri = UI.rdf.sym(uri);\n    await UI.store.fetcher.load(uri);\n    c.label = (UI.store.any(uri,ui('label'))||{}).value;    \n    c.content = (UI.store.any(uri,ui('content'))||{}).value;\n    c.style =  (UI.store.any(uri,ui('style'))||{}).value;\n    c.headerstyle =  (UI.store.any(uri,ui('headerStyle'))||{}).value;\n    c.dataSource =  (UI.store.any(uri,ui('dataSource'))||{}).value;\n    return c;\n  }\n\n}\n\n","const authSession = UI.authn.authSession;\nconst loginButtonArea = document.querySelector(\"[data-suic=login]\");\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n    if (authSession && loginButtonArea) {\n        loginButtonArea.style.display=\"none\";\n        authSession.onLogin(mungeLoginArea);\n        authSession.onLogout(mungeLoginArea);\n        authSession.onSessionRestore(mungeLoginArea);\n    }    \n    mungeLoginArea();\n\n}); \n\nexport async function mungeLoginArea(appearanceOnly){\n    solidUI.initApp ||= async()=>{};\n    if(!loginButtonArea && !appearanceOnly) return await solidUI.initApp();\n    loginButtonArea.innerHTML=\"\";\n    loginButtonArea.appendChild(UI.login.loginStatusBox(document, null, {}));\n    const signupButton = loginButtonArea.querySelectorAll('input')[1];\n    if(signupButton) signupButton.style.display=\"none\";\n    let me = await UI.authn.checkUser();\n    let button = loginButtonArea.querySelector('input');         \n    let dataset = loginButtonArea.dataset;\n    let inLabel = dataset.inlabel;\n    let outLabel = dataset.outlabel;\n    let transparent = dataset.transparent;\n    if (me) {       \n        loginButtonArea.style.display=\"inline-block\";\n        button.value = outLabel || \"Log out!\";           \n        button.title = \"--- logged in as \" + me.value + \"\\n--- click to logout\";\n    }\n    else {\n        loginButtonArea.style.display=\"inline-block\";\n        button.value = inLabel || \"Log in!\";           \n        button.title = \"--- click to log in!\";\n    }\n    if(transparent) button.style.backgroundColor=\"transparent\";\n    button = solidUI.styleButton(button,{});\n    if(me) button.style.color=\"green\";\n    if(typeof solidUI !=\"undefined\" && !appearanceOnly) await solidUI.initApp();\n}      \n","import * as user from  './user.js';\nimport {suicTemplate} from './default-templates.js';\n// DataSources\n//import {Feed} from './model/rss.js';\nimport {Feed} from './model/feed.js';\nimport {Sparql,runQuery} from './model/sparql.js';\n// Templates\nimport {mediaList,mediaItem} from './view/mediaList.js';\nimport {Accordion} from './view/accordion.js';\nimport {App} from './view/app.js';\nimport {Form} from './view/form.js';\nimport {Menu} from './view/menu.js';\nimport {menuOfMenus} from './view/menuMenu.js';\nimport {Modal} from './view/modal.js';\nimport {optionSelector} from './view/optionSelector.js';\nimport {Table} from './view/table.js';\n//import {Tabs} from './view/tabs.js';\nimport {tabSet} from './view/tabs.js';\nimport {BookmarkTree} from './view/bookmarkTree.js';\nimport {podSelector,resourceSelector} from './view/selector.js';\nimport {draggable} from './view/draggable.js';\nimport {buttonListMenu} from './view/buttonListMenu.js';\nimport {componentButton} from './view/componentButton.js';\nimport {searchButton} from './view/searchButton.js';\nimport {button} from './view/button.js';\nimport {CU} from './utils.js';\nimport {mungeLoginArea} from './login.js';\nconst u = new CU();\nu.mungeLoginArea = mungeLoginArea;\n\nconst sparql = new Sparql();\nconst proxy = \"/proxy?uri=\"; //\"https://solidcommunity.net/proxy?uri=\";\n\nclass SolidUIcomponent {\n\nskos = UI.rdf.Namespace('http://www.w3.org/2004/02/skos/core#');\nui = UI.rdf.Namespace('http://www.w3.org/ns/ui#');\nrdf=UI.rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#');\n\n  constructor(){\n    if(typeof panes !=\"undefined\") {\n      window.outliner = panes.getOutliner(document);\n    }\n  }\n\n\n  // BREAKING : components marked as data-suic, not data-solid_ui_component\n  suic = \"[data-suic]\";\n\n  async init(){\n    // fetcher = this.makeLSfetcher(UI); // see drafts/in-browser-fetcher.js\n    let all = document.querySelectorAll(this.suic)\n//    all= all.length>0 ?all : document.querySelectorAll('[data-solid_ui_component]')\n    for(let element of all) {\n      const content = await this.processComponent(element);\n      if(content) element.appendChild( content );\n    }\n  }\n\n  async handleLinkClick(event,component){\n    let link = event.link;\n    let linkType = event.linktype;\n    if(event.preventDefault){\n      event.preventDefault();\n      let elementClicked = event.target;\n      link = elementClicked.dataset.link;\n      linkType = elementClicked.dataset.linktype || \"\";\n    }\n    let displayIn = document.querySelector(component.displayArea);\n    if(solidUI.hideTabulator) solidUI.hideTabulator();\n    if(linkType==='Replace'){\n      window.location.href=link;                   \n    }\n    else if(linkType==='External'){\n      return await u.showIframeSrc(link,component.displayArea);\n    }\n    else if(linkType==='SolidOS'){\n      let so = await u.show('SolidOSLink',link,null,null,null,component)\n    }\n    else if(linkType===\"resourceSelector\") {\n      return await resourceSelector(component);\n    }\n    else if(linkType==='Component' && !event.dataOnly) {  // FROM LINK\n      let newDiv = document.createElement('DIV');\n      newDiv.dataset[\"suic\"]=link;\n      displayIn.innerHTML = \"\";\n      displayIn.appendChild(newDiv);\n      await solidUI.initInternal(displayIn) ;\n    }\n    else if(linkType==='Component' && event.dataOnly) {  // FROM MENU\n       let newJson=await this.getComponentHash(component.dataSource,component);\n       newJson.contentSource = component.dataSource;\n       newJson.contentArea = component.contentArea;\n       newJson.displayArea = component.displayArea;\n       return newJson;\n     }\n     else {\n       let c = await u.show(linkType,link,null,component.displayArea,null,component);\n       document.querySelector(component.displayArea).innerHTML=\"\";\n       document.querySelector(component.displayArea).appendChild(c);\n     }\n  }\n\n  async initInternal(containingElement){\n    let all = containingElement.querySelectorAll(this.suic)\n    for(let element of all) {\n      const content = await this.processComponent(element);\n      if(content) element.appendChild( content );\n    }\n    return containingElement;\n  }\n\n  async activateComponent(selector,targetElement){\n    targetElement ||= document;\n    let elm = typeof selector===\"string\" ?document.querySelector(selector) :selector;\n    let c = await this.getComponentHash(elm.getAttribute('data-suic'));\n    if(c && c.plugin) elm.setAttribute('data-suicPlugin',c.plugin);\n    if(elm.innerHTML.replace(/\\s*/g,'').length === 0) {\n      const content = await this.processComponent(elm);\n      elm = content;\n      if(elm){\n        elm.style ||= {};\n        elm.style.display=\"block\";\n      }\n    }\n    return elm;\n  }\n\n  pluginType(plugin){\n    if(!plugin || plugin.match(/(PodBrowser|SolidOS|FeedList|ConceptTree)/)) return \"builtIn\";\n    return \"\";\n  }\n\n  async showPage(event,json,obj){\n     let content\n     if(obj && obj.link){\n       obj.cType = obj.dataSourceType ||= 'SolidOSLink';\n       if(solidUI.showTabulator) solidUI.showTabulator();\n       let displayArea = obj.displayArea || document.body.getAttribute('data-suicDisplay');\n       content =  await u.show(obj.cType,obj.link,\"\",displayArea,true,obj)\n       return content;\n     }\n/* REMOVE ?\nalert('showP HERE?')\n     if(event && event.preventDefault) event.preventDefault();\n     event ||= {target:{tagName:\"\"}};\n     if(event.target) event.target.dataset ||= {};\n     json ||= {};\n     obj ||= json;\n     let type;\n     let url = event.href || event.value || json.link || json['data'];\n     url ||= event.target ?event.target.value :event;\n     let plugin = event.target ?event.target.dataset.suicplugin :json.pluginType;\n     if(!plugin && event.target.parentElement){\n        event.target.parentElement.dataset ||= {};\n        plugin = event.target.parentElement.dataset.suicplugin;\n     }\n     if(plugin && this.pluginType(plugin) != \"builtIn\"){\n       let pFile = window.origin + `/cm/plugins/${plugin}.ttl`;\n       await UI.store.fetcher.load(pFile);\n       let node = UI.rdf.sym(pFile+\"#this\");\n       let x= UI.store.match(node,this.rdf('type'),this.ui('LinkHandler'));\n       if(x && x.length===1){\n         let converter = UI.store.any(node,this.ui('linkConvert'),null,node.doc())\n       url = converter.value.interpolate({href:url});\n         type=\"text/html\";\n       }\n     }\n     type ||= event.target.dataset.contenttype || u.findType(url);\n     if(solidUI.showFunction) return await solidUI.showFunction(type,url,json.displayArea,true,obj);\n// ignore draggables for now\n     if(0 && obj.displayTarget && obj.displayTarget.match(/#Draggable/)){\n       let outerContent = (await u.show(type,url,\"\",\"\",true,obj)).outerHTML;\n       await draggable({\n          label : obj.label,\n          content : outerContent,\n       });\n       return;\n     }\n     else {\n       if(obj.plugin) obj.dataSourceType ||= 'SolidOSLink';\n       if(solidUI.showTabulator) solidUI.showTabulator();\n       content =  await u.show(type,url,\"\",json.displayArea,true,obj)\n     }\n     return content;\n*/\n  }\n\n/* tools and manage menus come here */\n\n  styleButton (button,o) {\n    if(!button || !o) return button;\n    if(button.id===\"login\") button.style = o.style || {};\n    button.style.display ||= \"inline-block\";\n    button.style.padding ||= \"0.5rem\";\n    let transparent = (button.style.backgroundColor===\"transparent\");\n    if(transparent) {\n      button.style.color = this.buttonBackground || solidUI.buttonBackground;\n      button.style.border = \"none\";\n    }\n    if(!transparent) {\n      button.style.border||=\"1px solid \"+this.buttonBackground || o.background;\n      button.style[\"border-radius\"] = \"0.2rem\";\n      button.style.backgroundColor ||= this.buttonBackground || o.color;\n      button.style.color ||= this.buttonColor || o.background;\n    }\n    button.style[\"margin\"] = \"0.5rem\"; \n    button.style[\"margin-left\"] = \"0\";\n    button.style.cursor = \"pointer\";\n    button.style['font-size'] = \"100%\";\n    return button;\n  }\n\n  async processComponentJson(json){\n    return await this.processComponent(null,null,json);\n  }\n  async processComponentSubject(subject){\n    return await this.processComponent(null,subject);\n  }\n  async processComponent(element,subject,json){\n    if(!json){    \n      if(!subject && element && element.dataset){\n        let urlToLoad  = element.dataset.suic;\n        if(urlToLoad.startsWith('/')) urlToLoad = window.origin + urlToLoad;\n        subject = await this.loadUnlessLoaded(urlToLoad);\n      }\n      if(!subject) return null;\n      json = await this.getComponentHash(subject)\n      element ||= {}\n      element.dataset ||= {};\n      element.parentNode  ||= {};\n      element.parentNode.dataset  ||= {};\n      json ||= subject;\n      json.displayArea = element.dataset.display || element.parentNode.dataset.display;\n      json.displayArea ||= document.body.getAttribute('data-suicDisplay');\n      //if(element.id) json.contentArea = '#' + element.id ;\n      //contentArea was here\n      json.contentSource = subject.value ?subject.value :subject ; \n    }\n    json ||= subject;\n    // contentArea - the HTML element to put buttons/menus into\n    //\n      json.contentArea ||= element;\n      if(typeof json.contentArea===\"string\") json.contentArea = document.querySelector(json.contentArea);\n\n    // DEFAULTS\n    //\n    if(json.type===\"Default\") json = this.setDefaults(json);\n    else json = this.getDefaults(json);\n   if(!json.plugin && element && element.getAttribute) json.plugin = element.getAttribute('data-suicPlugin') || {};\n    if(json.type===\"Component\"){\n       if(json.plugin.match(/#ExternalApp/)){\n         window.open(json.dataSource)\n         return \"\";\n       }\n       if(json.plugin.match(/#PodBrowser/))\n         return await resourceSelector(json);\n       if(json.plugin.match(/#SolidOSLink/))\n         return u.show('SolidOSLink',json.href,null,null,null,json)\n       let newJson = await this.getComponentHash(json.dataSource,json);\n       newJson.contentSource = json.dataSource;\n       newJson.contentArea = json.contentArea;\n       newJson.displayArea = json.displayArea;\n       json = newJson;\n   }\n   if(json.type === \"Plugin\"){\n/*\n     if(solidUI.hideTabulator) solidUI.hideTabulator();\n     if(json.pluginType===\"Component\"){\n       let newJson = await this.getComponentHash(json.dataSource,json);\n       newJson.contentSource = json.dataSource;\n       newJson.contentArea = json.contentArea;\n       newJson.displayArea = json.displayArea;\n       return newJson;\n     }\n     else {\n*/\n       let link = {link:json.dataSource,linktype:json.pluginType,dataOnly:1};\n       return this.handleLinkClick(link,json);\n//     }\n   }\n\n\n    \n\n//    if(json.type.match(/Link/)){\n//      return displayLink(json)\n//    }\n\n    // DATASOURCE\n    let dataSource = (typeof json.dataSource===\"string\") ?await this.getComponentHash(json.dataSource) : json.dataSource ;\n    if(dataSource && typeof dataSource.dataSource===\"string\"){\n      dataSource = await this.getComponentHash(dataSource.dataSource);\n    }\n    let script = json.type===\"Script\" ?json.content :null;\n    if(script){\n    }\n    else if(dataSource && dataSource.type==='Script') {\n      script = dataSource.content\n      let as=await Function('\"use strict\";return('+script+')')();\n      let el = typeof json.contentArea===\"string\" ?document.querySelector(json.contentArea) :json.contentArea;\n      json.parts = json.dataSource = dataSource = as;\n/*\n      for(let anchor of as){\n        anchor.target = json.displayArea;\n        anchor = this.styleButton(anchor,json);\n        anchor.addEventListener('click',async (e)=>{\n          e.preventDefault();\n          anchor.setAttribute('data-contenttype','text/html');\n          await u.show('text/html',anchor.href,null,json.displayArea);\n        });\n        el.classList.add('suic-anchor-list');\n        el.appendChild(anchor);      \n      }\n*/\n    }\n    if(json.type==='SparqlComponent') {\n       if(element && element.dataset && element.dataset.template){\n         json.template = element.dataset.template;\n       }\n       if(element && element.dataset && element.dataset.endpoint){\n         json.endpoint = element.dataset.endpoint;\n       }\n       json.template = 'ui:' + json.template.replace(/^ui:/,'');\n       return await runQuery({\n         endpoint : json.endpoint,\n            query : json.query,\n         template : json.template,\n      displayArea : json.contentArea\n       });\n    }\n    if(dataSource && dataSource.type==='SparqlQuery') {\n      let endpoint = dataSource.endpoint;\n      let query = dataSource.query.replace(/\\$\\{[^\\}]*\\}/g,'');\n      json.parts = await this.sparqlQuery(endpoint,query,json);\n      if(json.type==='SparqlQuery') return json.parts;\n    }\n    if(json.type==='SparqlQuery') {\n      json.parts = await this.sparqlQuery(json.endpoint,json.query,json);\n      if(json.type==='SparqlQuery') return json.parts;\n    }\n    if(json.type==='SolidOSLink') {\n       return u.show('SolidOSLink',json.href,null,null,null,json)\n    }\n    if(json.type==='MediaList') {\n       return mediaList(json);       \n    }\n    if(json.type===UI.ns.schema('MusicRecording').value) {\n       return mediaItem(json);       \n    }\n    if(json.type==='PodSelector') {\n       return podSelector(json);\n    }\n    if(json.type==='PageElement') {\n      for(let ds of json.dataSource) {\n        ds.contentArea = element;\n        ds.targetArea = json.displayArea;\n        let x = await this.processComponentJson(ds);\n      }\n      return document.createElement('SPAN');\n    }\n    if(json.parts && json.groupOn){\n      json.parts = sparql.flatten(json.parts,json.groupOn)\n      console.log(json.groupOn,json.parts)\n    }\n\n    if(json.type==='App'){\n      return await (new App()).render(this,json);\n    }\n    else if(json.type==='MarkdownContent'){\n      return u.show('markdown',null,json.value,json.displayArea,null,json);\n    }\n    else if(json.type && json.type.match(/Link/)){\n      return await window.displayLink(element,json,element);\n    }\n    else if(json.type && json.type.match(/ButtonListMenu/)){\n      return await buttonListMenu(json);\n    }\n    else if(json.type && json.type.match(/searchButton/)){\n      return await searchButton(json);\n    }\n    else if(json.type==='Menu'){\n      return await (new Menu()).render(this,json,element);\n    }\n    else if(json.type==='CustomTemplate'){\n        let recurring = json.recurring\n        let before = json.before || \"\";\n        let after = json.after || \"\";\n        recurring = recurring || template;\n        let body = this.fillTemplate(recurring,json.parts);\n        let contentWrapper = document.createElement('DIV');\n        contentWrapper.innerHTML = before + body + after;\n        contentWrapper.style.overflow=\"hidden\";\n        let tabulator = document.getElementById('solidOSdatabrowser');\n        let mainDisplay = document.getElementById('display');\n        for(let anchor of contentWrapper.querySelectorAll('A')){\n           anchor.addEventListener('click',async(e)=>{\n             e.preventDefault();\n             if(anchor.dataset.format.match(/SolidOSLink/)){\n               tabulator.style.display=\"block\";\n               mainDisplay.style.display=\"none\";\n               json.dataSourceType ||= 'SolidOSLink';\n               return await u.show('rdf',anchor.href,\"\",null,true,json)\n             }\n             else {\n               tabulator.style.display=\"none\";\n               mainDisplay.style.display=\"block\";\n               u.showIframeSrc(anchor.href,'#display')\n             }\n           });\n           anchor.style.display=\"block\";\n           anchor.style['padding-left']=\"0.25rem\";\n           anchor.style.background=solidUI.buttonBackground;\n           anchor.style.color=solidUI.buttonColor;\n        }\n        return contentWrapper;\n    }\n    else if(json.type==='MenuOfMenus'){\n      return await menuOfMenus(json);\n    }\n    else if(json.type==='ComponentButton'){\n      return await componentButton(json);\n    }\n    else if(json.type==='Draggable'){\n      return await draggable(json);\n    }\n    else if(json.type==='ResourceSelector'){\n      return await resourceSelector(json);\n    }\n    else if(json.type==='FeedList'){\n      return await (new Feed()).makeFeedSelector(json.contentSource,json.contentArea,json.displayArea,json);\n    }\n    else if(json.type==='BookmarkTree'){\n      const ul = document.createElement('UL');\n      await (new BookmarkTree()).getTopic(json.contentSource,json.contentArea,json.displayArea,'start');\n      let elm = typeof json.contentArea===\"string\" ?document.querySelector(json.contentArea) :json.contentArea;\n      elm.style.listStyle=\"none\";\n      document.getElementById('ocbStart').click();\n    }\n    else if(json.type==='OptionSelector'){\n      let d = this.setDefaults(json);\n      return await optionSelector(json);\n    }\n    else if(json.type==='ModalButton'){\n      // return await (new Modal()).render(this,json)\n         return await (new Modal()).render(json,this)\n    }\n    else if(json.type==='Accordion'){\n      return await (new Accordion()).render(this,json)\n    }\n    else if(json.type==='Form'){\n      return await (new Form()).render(json)\n    }\n    else if(json.type==='Tabset'){\n      return await tabSet(json)\n//      return await (new Tabs).render(this,json)\n    }\n    if(json.type===\"Table\"){\n      return await (new builtIn.Table()).render(json);\n    }\n    else if(json.type && json.type.match(/Button/)){\n      return await button(json);\n    }\n    let contentWrapper = document.createElement('DIV');\n    let results,before,after,content,label;\n\n// RECORD\n    if(json.type==='Record') {\n      label = this.getValue( dataSource, ui('label') );\n      content = this.getValue( dataSource, ui('content') );\n      results = {label,content} ;\n    }\n\nresults = results || json.parts;  \nthis.log('Parts for Component',results);\n// TEMPLATE\n    let template = json.template;\n    if(!template){\n      return results;\n    }\n\n    if(template.groupOn) {\n      results = sparql.flatten(results,template.groupOn)\n    }   \n    \n      if(template==\"AccordionMenu\"){\n        let compo = await this.runBuiltIn(template,results);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      if(template==\"Table\"||json.type===\"Table\"){\n        let compo = await (new Table()).render(json);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      if(template==\"ModalButton\"){\n        let compo = await this.makeMmodal(json.label,json.content);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      let recurring;\n        if(typeof template==\"string\") {\n          template = await this.getComponentHash(template);\n        }\n        recurring = template.recurring;\n        before = template.before;\n        after = template.after;\n//        recurring = recurring || template;\n        let body = this.fillTemplate(recurring,results);\n        contentWrapper.innerHTML = (before||\"\") + body + (after||\"\");\n        return contentWrapper ;\n    \n  }\n\ngetObjects(store,s,p,g){\n  let list = store.each(s,p,null,g);\n  if(list.length===0) return list\n  let type = list[0].termType;\n  let isFirst = store.any(list[0],this.rdf('first'));\n  if(type===\"Collection\") return list[0].elements;\n  else {\n    if(!isFirst) return list;\n    else {\n      return this.getRdfsList(store,list[0]);\n    }\n  }\n}\ngetRdfsList(store,first,list){\n  list ||= [];\n  list.push( store.any(first,this.rdf('first')) );\n  let rest = store.any(first,this.rdf('rest'));\n  if(rest && rest.value===this.rdf('nil').value) {\n    return list;\n  }\n  else {\n   return this.getRdfsList(store,rest,list)\n  }\n}\n  \nasync getComponentHash(subject,hash){\n  if(!subject) return hash;\n  if(!subject.value && typeof subject === \"string\" && subject.startsWith('/'))\n    subject=window.origin+subject;\n  subject = await this.loadUnlessLoaded(subject);\n  if(!subject) return null;\n  let predicatePhrases = UI.store.match(subject,null,null);\n  hash = hash || {}\n  for(let p of predicatePhrases){\n    let pred = p.predicate.value.replace(/http:\\/\\/www.w3.org\\/1999\\/02\\/22-rdf-syntax-ns#/,'').replace(/http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n    let obj = p.object;\n    let doc = subject.doc ?subject.doc() :subject;\n    let items = this.getObjects(UI.store,subject,p.predicate,doc);\n    hash[pred] ||= [];\n    if(obj.termType===\"BlankNode\"){\n      obj = await this.getComponentHash(obj);\n      if(!hash[pred])  hash[pred] = obj;\n      else if(typeof hash[pred] !='ARRAY') hash[pred] = [obj]\n      else hash[pred].push(obj);\n    }\n    else if(obj.termType===\"Collection\"){\n      obj = obj.elements;\n      for(let uri of obj){\n        let component = await this.getComponentHash(uri,{});\n        if(!hash[pred])  hash[pred] = [component];\n        else hash[pred].push(component);\n      }\n    }\n    else {\n      obj = obj.value.replace(/^http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n      if(!hash[pred])  hash[pred] = obj;\n      else if(typeof hash[pred] !='ARRAY') hash[pred] = [obj]\n      else hash[pred].push(obj);\n    }\n    if(hash[pred].length==1) hash[pred]=hash[pred][0];\n  }\n  hash.id ||= subject.value;\n  return hash ;\n}\n\n\n\n  log(...args){\n    if(typeof DEBUG!=\"undefined\") console.log(args);\n  }\n  setStyle(element,styles){\n    for(let s of Object.keys(styles)){\n      element.style[s]=styles[s];\n    }\n  }\n\n\n/*-----------\n  SPARQL\n----------*/\n  async sparqlQuery(endpoint,queryString,json){\n    if(typeof Comunica !=\"undefined\")\n      return await sparql.comunicaQuery(endpoint,queryString,json);\n    else   \n      return await sparql.rdflibQuery(endpoint,queryString,json);\n//    return await sparql.rdflibQuery(solidUI,UI.store,endpoint,queryString,json);  \n  }\n\n\n/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  DISPLAY METHODS\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n\ngetDefaults(json){\n  if(typeof json==\"string\") json = this.processComponent('',json)\n  json.height ||= this.height;\n  json.width ||= this.width;\n  json.proxy ||= this.proxy || proxy;\n  this.proxy = json.proxy\n\n/*\n  json.background ||= this.background || \"white6\";\n  json.color ||= this.color || \"#000\";\n  json.secondaryBackground ||= this.secondaryBackground || \"gray\";\n  json.selBackground ||= this.selBackground || \"#559\";\n  json.selColor ||= this.selColor || \"#fff\";\n  json.unselBackground ||= this.unselBackground || \"transparent\" // \"#e0e0e0\";\n  json.unselColor ||= this.unselColor || \"#000\";\n  json.lightestBackground ||= this.lightestBackground;\n  json.lightBackground ||= this.lightBackground;\n  json.midBackground ||= this.midBackground;\n  json.darkBackground ||= this.darkBackground;\n*/\n  return(json);\n}\nsetDefaults(json){\n  if(typeof json==\"string\") json = this.processComponent('',json)\n  if(json.type===\"Default\") {\n    for(let k of Object.keys(json)){\n      this[k] = json[k];\n    }\n  }\n\n  // COLORS\n  this.pageBackground = json.pageBackground || \"#ffffff\";\n  this.pageColor = json.pageColor || \"#000000\";\n  this.pageHighlight = json.pageHightlight || \"#666666\";\n  this.widgetBackground = this.buttonBackground = json.widgetBackground || json.buttonBackground || \"#c0c0c0\";\n  this.widgetColor = this.buttonColor = json.widgetColor || json.buttonColor || \"#000000\";\n  this.widgetHighlight = this.menuBackground = json.widgetHighlight || \"#c0c0c0\";\n  this.menuColor = json.menuColor || \"#000000\";\n  this.menuAltColor = json.menuAltColor || \"green\";\n\n\n  document.body.style[\"background-color\"] = this.pageBackground;\n  document.body.style[\"color\"] = this.pageColor;\n  this.orientation = json.orientation;\n  this.position = json.position\n  this.proxy = json.proxy\n\n/*\n  this.background = json.background;\n  this.color = json.color;\n  this.secondaryBackground = json.secondaryBackground || \"gray\";\n  this.selBackground = json.selBackground;\n  this.selColor = json.selColor;\n  this.unselBackground = json.unselBackground;\n  this.unselColor = json.unselColor;\n*/\n  return(this.getDefaults(json));\n}\n\n  runBuiltIn(json,template,results){\n    if(template.match(/Table/)) return this.results2table(json,results);\n    if(template.match(/Modal/)) return this.results2modal(results);\n    if(template.match(/Accordion/)) return tabset(results);\n    if(template.match(/DescriptionList/)) return this.results2descriptionList(results);\n  }\n\nasync loadTheme(themeURL){\n  try{\n    let tName = UI.rdf.Namespace(themeURL+'#');\n    await UI.store.fetcher.load(themeURL);\n    let theme = UI.store.match(tName('this'))\n    if(theme){\n      theme = await this.processComponentSubject(theme);\n    }\n  }\n  catch(e){alert(e)}\n}\n/* TEMPLATING \n*/\nasync processTemplate(template,results,containingElement){\n  let body;\n  if(typeof template==='string'){\n     if(template.startsWith('ui:')){\n       body = await this.builtIn({template,parts:results});\n     }\n     else {\n       body = await this.CustomTemplate({template,parts:results});\n     }\n  }\n  else {\n    if(template.groupOn) {\n      results = sparql.flatten(results,template.groupOn)\n    }   \n    let recurring = template.recurring;\n    let before = template.before;\n    let after = template.after;\n    if(recurring) body = recurring.interpolate(results);\n    body = (before||\"\") + (body||\"\") + (after||\"\");\n  }    \n  containingElement ||= document.createElement('DIV');\n  if(typeof body != \"string\") {\n    containingElement.innerHTML = \"\";\n    containingElement.appendChild(body);\n  }\n  else containingElement.innerHTML = body;\n  return containingElement;\n}\nRecordsList = async(options)=>{\n  const templateString = suicTemplate.RecordsList;\n  let parts = templateString.split(/\\[~LOOP~\\]/);\n  let got = parts.length;\n  let mid=got===3 ?parts[1].replace(/\\[~/g,'${').replace(/~]/g,'}') :parts[0];\n  let all=got===3 ?parts[0] : \"\";\n  let bottom=got===3 ?parts[2] : \"\";\n  for(let row of options.parts){\n    let rowStr=\"\";\n    for(let col of Object.keys(row)){\n      rowStr += mid.interpolate({key:col,val:row[col]});\n    }\n    all += rowStr+'<hr>';\n  }\n  all += bottom;\n  return(all);\n}\nCustomTemplate = async(options)=>{\n  let blocks = options.template.split(/\\[~LOOP~\\]/);\n  let got = blocks.length;\n  let mid=got===3 ?blocks[1].replace(/\\[~/g,'${').replace(/~]/g,'}') :blocks[0];\n  let all=got===3 ?blocks[0] :\"\";\n  let bottom=got===3 ?blocks[2] : \"\";\n  for(let row of options.parts){\n    all += mid.interpolate(row);\n  }\n  all += bottom;\n  return(all);\n}\nSimpleSelector(options){                                                         \n  let select = document.createElement('SELECT');                                    \n  select.style=`width:240px;height:2.5rem;font-size: 100%;border-radius: 0.5rem;pad\\\nding:0.5rem;background:${solidUI.widgetBackground};font-size:100%;color:${widgetColor};outline:none;`;                                                         \n  for(let o of options){                                                            \n    let option = document.createElement('OPTION');                                  \n    option.value = o.link;                                                          \n    option.innerHTML = o.label;                                                     \n    option.style=`background:${solidUI.widgetHighlight};font-size:110%;color:black;`  \n    select.appendChild(option);                                                     \n  }                                                                                 \n  return select;                                                                    \n}       \ntemplates = {\n    Table: async(options)=>{ return await (new Table()).render(options) },\n    JSON: (options)=>{ return(JSON.stringify(options.parts,4)); }\n};\nasync builtIn(options){\n  options.template = options.template.replace(/^ui:/,'');\n  const handler = this[options.template] || this.templates[options.template];\n  if(handler) {\n    return await handler(options);\n  }\n  else {\n    alert(`Bad template name '${options.template}'!`);\n    return \"\";\n  }\n}\n\n\nasync processBuiltInTemplate(templateName,results,containingElement){\n  templateName = templateName.replace(/^ui:/,'');\n  if(templateName===\"JSON\") { return(JSON.stringify(results,4,4)); }\n  if(templateName===\"RecordsList\") {\n    return await this.processCustomTemplate(templateString,results);\n  }\n}\n/*\n    \n    let tableStr = \"<table>\";\n    for(let row of results){\n      let rowStr=\"\";\n      for(let col of Object.keys(row)){\n        rowStr += `\n          <tr style=\"margin:1rem;border:1px solid black;padding:1rem;\">\n            <th style=\"text-align:right\">${col}</th>\n            <td>${row[col]}</td>\n          </tr>\n        `;\n      }\n      tableStr += rowStr;\n    }\n    return tableStr+'</table>';\n  }\n  return( (new builtIn[template]).render({parts:results}) )\n}\n*/\nfillTemplate(templateStr,object){\n  function fillOneTemplateRow(templateStr,object){\n    for(let o of Object.keys(object) ){\n      let newStuff=object[o]||\" \";\n      if(typeof newStuff==='object' && newStuff.length>1) newStuff = newStuff.join(\", \");\n      let re = new RegExp( `\\\\$\\\\{${o}\\\\}`, 'gi' );\n      templateStr  = templateStr.replace( re, newStuff );\n    }\n    return templateStr;\n  }\n  let string = \"\";\n  for(let r of object){\n     string += fillOneTemplateRow(templateStr,r)+\"\\n\";\n  }\n  return string;\n}\n\n\n  /* UTILITIES\n  */\n\n  diff(diffMe, diffBy){ diffMe.split(diffBy).join('') }\n\n  simulateClick(el){\n    if (el.fireEvent) {\n      el.fireEvent('on' + 'click');\n    } else {\n      var evObj = document.createEvent('Events');\n      evObj.initEvent('click', true, false);\n      el.dispatchEvent(evObj);\n    }\n  }\n\n  // CREATE HTML ELEMENT\n  createElement(elementType,className,html,styles){\n    let element = document.createElement(elementType);\n    if(className) element.classList.add(className);\n    if(html) element.innerHTML = html;\n    if(styles){\n      for(let s of styles.split(/;/)) {\n        let pair = s.split(/:/)\n        if(pair.length==2) \n          element.style[pair[0].trim()]=pair[1].trim();\n      }\n    }\n    return element;\n  }\n  getComponentType(subject){\n    if(!subject) return null;\n    let uiNamespace = 'http://www.w3.org/ns/ui#';\n    let type = UI.store.each( subject, rdf('type') ).map( (object) =>{\n      object = object.value;\n      if(object.match(/ns\\/ui#/)) return object.replace(/.*\\#/,'');\n    });\n    return type[0] || \"\";\n  }\n\n  async clearInline(){\n    for(let stm of UI.store.match()){\n      if(stm.graph.value.startsWith('inline:')) UI.store.remove(stm);\n    }\n  }\n\n  loadFromMemory(sentUri){\n    let uri = sentUri //.replace(/^inline:/,'');\n    if( UI.store.any(null,null,null,UI.rdf.sym(uri)) ) return UI.rdf.sym(uri);\n    let [eName,fragment] = uri.split(/#/);\n    let eDoc = document.getElementById(eName)\n    let uiString = eDoc.innerText || eDoc.value;\n    uiString = uiString.trim()\n    if(uiString.startsWith('\\<\\!\\[CDATA\\[')) uiString=uiString.replace(/^\\<\\!\\[CDATA\\[/,'').replace(/\\]\\]$/,'').replace(/~~/g,'#');\n    try {\n      UI.rdf.parse(  uiString, UI.store, uri, \"text/turtle\" ); \n      return(UI.rdf.sym(uri));\n    }\n    catch(e) { console.log(e) }\n  }\n\n  async  loadUnlessLoaded(uri){\n    try {\n      if(!uri) return;\n      if(uri && uri.termType && uri.termType===\"BlankNode\") return uri;\n      uri = typeof uri===\"object\" ?uri.uri :uri;\n      if(!uri) return;\n      if(uri.startsWith('inline')) return this.loadFromMemory(uri);\n      if(!uri.startsWith('http')&&!uri.startsWith('ls')) uri = window.location.href.replace(/\\/[^\\/]*$/,'/') + uri;\n    const mungedUri = uri.replace(/\\#[^#]*$/,'');\n      let graph = UI.rdf.sym(mungedUri);\n      if( !UI.store.any(null,null,null,graph) ){\n        console.log(\"loading \"+graph.uri+\" ...\");\n        let r = await UI.store.fetcher.load(graph.uri);\n        if(UI.store.any(null,null,null,graph)) console.log(`<${graph.uri}> loaded!`);\n        else console.log(`<${graph.uri}> could not be loaded!`);\n//console.log(UI.store.match(null,null,null,graph));\n      }\n//      else console.log(`<${graph.uri}> already loaded!`);\n      return UI.rdf.sym(uri);\n    }\n    catch(e) { console.log(e); return UI.rdf.sym(uri) }\n  }\n   getValue(s,p,o,g) {\n\n     let node = UI.store.any( s, p, o, g );\n     return node ?node.value :\"\" \n   }\n   valuesContain(s,p,o,g,wanted) {\n    let nodes = UI.store.each( s, p, o, g );\n    for(let n of nodes) {\n      n = n ?n.value :\"\";\n      if(n===wanted) return n;\n    }\n  }\n\n} // END OF CLASS SolidUIcomponent\n \nlet solidUI = new SolidUIcomponent();\nsolidUI.util = u;\nsolidUI.draggable = draggable;\nsolidUI.runQuery = runQuery.bind(solidUI);\n\nexport default solidUI;\n\n/*\ndocument.addEventListener('DOMContentLoaded', function() {    \n  let solidUI = new SolidUIcomponent();\n});\n*/\n[\n    {\n        \"File\": \"https://solidproject.solidcommunity.net/public/Specification/\",\n        \"Size\": \"4096\",\n        \"Mtime\": \"1646836730.88\"\n    },\n    {\n        \"File\": \"https://solidproject.solidcommunity.net/public/Public/\",\n        \"Size\": \"4096\",\n        \"Mtime\": \"1614079346.793\"\n    },\n    {\n        \"File\": \"https://solidproject.solidcommunity.net/public/2021/\",\n        \"Size\": \"4096\",\n        \"Mtime\": \"1614079321.425\"\n    }\n]\n","export async function buttonListMenu(options){\n  if(options.displayArea && options.startingContent){\n    await solidUI.util.show('',options.startingContent,'',options.displayArea);\n  }\n  let displayIn = options.displayArea;\n  displayIn=typeof displayIn===\"string\" ?document.querySelector(displayIn) :displayIn;\n  let div = document.createElement('DIV');\n//  div.id =  options.contentSource.replace(/.*\\#/,'');\n  let html = \"\";\n  let parts = options.dataSource;\n  if(typeof parts.length===\"undefined\")parts=[parts];\n  for(let p of parts){\n      let attrs = \"\";\n      let b = document.createElement('BUTTON');\n      b.dataset.link = p.link || p.dataSource;\n      b.dataset.label = p.label;\n      b.dataset.linktype = p.linktype || p.pluginType;\n      b.innerHTML = p.label;\n      b.value = p.dataSource;\n      b = solidUI.styleButton(b,options);\n      b.style['font-size'] = \"100%\";\n      b.addEventListener('click',async(e)=>{\n        return solidUI.handleLinkClick(e,options);\n/*\n        e.preventDefault();\n        let link = b.dataset.link;\n        let linkType = b.dataset.linktype || \"\";\n        if(solidUI.hideTabulator) solidUI.hideTabulator();\n        if(linkType==='Replace'){\n          window.location.href=link;                   \n        }\n        else if(linkType==='External'){\n          return u.showIframeSrc(link,options.displayArea);\n        }\n        else if(linkType==='SolidOS'){\n         return u.show('SolidOSLink',link,null,null,null,options)\n        }\n        else if(linkType==='Component') {\n          let newDiv = document.createElement('DIV');\n          newDiv.dataset[\"suic\"]=link;\n          displayIn.innerHTML = \"\";\n          displayIn.appendChild(newDiv);\n          displayIn = await solidUI.initInternal(displayIn) ;\n        }\n*/\n      });\n      div.appendChild(b)\n    }\n    div.style['text-align']=\"center\";\n    return div;\n}\n","/*\n<style>\n#searchBox {\n  display:none;\n  z-index:10;\n  position : absolute;\n  left:2rem;\n  margin-top:-2.8rem;\n  padding:1rem;\n  background:brown;\n  border-radius:0.4px;\n}\n#searchBox input {\n  font-size:large;\n  padding:0.5rem;\n  width:50ch;\n}\n#searchBox button {\n  font-size:large !important;\n  padding:0.5rem;\n}\n.search.button {\n  font-size:1.75rem;\n  display:block;\n  color:gray;\n  margin-bottom:0.5rem;\n}\n</style>\n\n<div class=\"search button\" title=\"--- SEARCH\">&#x26B2;</div>\n<div id=\"searchBox\">\n  <input><button>go</button>\n</div>\n*/\nexport async function searchButton(component){\n\n   const searchBox = document.createElement('DIV');\n   const targetElement = component.contentArea || document.body;\n   const searchButton = document.createElement('BUTTON');\n   const searchInput =  document.createElement('INPUT');\n\n   searchButton.title = component.title;\n   searchBox.appendChild(searchInput);\n   targetElement.appendChild(searchButton);   \n   targetElement.appendChild(searchBox);   \n\n   searchBox.style = \"display:none;z-index:10;position:absolute;left:2.2rem; margin-top:-1rem; padding:0.4rem;background:brown;border-radius:0.4rem;\"\n\n   searchButton.innerHTML = component.label || \"&#x26B2;\"\n   searchButton.style = \"transform:rotate(315deg);font-size:1.75rem;\";\n   searchButton.addEventListener(\"click\",async()=>{\n     searchBox.style.display=\"block\";\n   });\n\n   searchInput.style= \"padding:0.5rem;width:60ch;border-radius:0.2rem\";\n   searchInput.placeholder = component.placeholder;\n   searchInput.addEventListener(\"keypress\",async(event)=>{\n    if (event.key === \"Enter\") {\n      searchBox.style.display=\"none\";\n      const term = searchInput.value;\n      if(term) solidUI.util.show('SolidOSLink',term,'','#display')  \n    }\n   });\n\n}\n","export async function menuOfMenus(json){\n    let target = document.querySelector(json.displayArea);\n    if(target && json.startingContent){\n      let content = await solidUI.processComponentSubject(json.startingContent)\n      if(content) target.appendChild(content)\n//      await solidUI.util.show('',content,'',json.displayArea);\n    }\n    let div = document.createElement('DIV');\n    div.id =  json.contentSource.replace(/.*\\#/,'');\n    let html = \"\";\n//    if(!json.dataSource.dataSource) json.dataSource.dataSource = json.dataSource;\n    for(let ds of json.dataSource){\n      let component = ds.directDisplay ?ds.dataSource :ds.id\n      ds.directDisplay ||= \"\";\n      if(ds.plugin && ds.plugin.match(/External/)) ds.external = \"true\";\n      html += `<button about=\"${component}\" data-directDisplay=\"${ds.directDisplay}\" data-external=\"${ds.external}\">${ds.label}</button>`;\n    }\n    div.innerHTML = html;\n    let targetElement = typeof json.contentArea===\"string\" ?document.querySelector(json.contentArea) :solidUI.currentElement;\n    targetElement.innerHTML = \"\";\n    targetElement.appendChild(div)\n    let moreHtml = \"\"\n    for(let ds2 of json.dataSource){\n      let div2 = document.createElement('DIV'); \n      div2.id=ds2.label.replace(/\\s*/g,'_');\n      div2.setAttribute('data-suic',ds2.id);\n      div2.style=\"display:none\";\n      targetElement.appendChild(div2);\n    }\n    let buttons = targetElement.querySelectorAll('BUTTON');\n    for(let button of buttons){\n      button = solidUI.styleButton(button,json);\n      let tag  = button.getAttribute('about');\n      button.addEventListener('click',async(e)=>{\n        e.preventDefault();\n        let external = button.getAttribute('data-external');\n        external = external===\"undefined\" ?null :external;\n        let direct = button.getAttribute('data-directDisplay');\n        direct = direct===\"undefined\" ?null :direct;\n        let href = button.getAttribute('about');\n        if(direct){\n          await solidUI.showPage(null,{link:href,displayArea:targetElement}); \n          return;\n        }\n        if(external) {\n          return solidUI.processComponentSubject(href)\n        }\n        let divs = targetElement.querySelectorAll(json.contentArea + ' > DIV');\n        for(let d of divs){\n          let target = d.getAttribute('data-suic');\n          if(target===tag){\n            d.style.display=\"block\";\n            await solidUI.activateComponent(d,targetElement);\n          }\n          else d.style.display=\"none\";\n        }\n      });\n    }\n    return targetElement;\n}\n","export async function componentButton(thing){\n\n  let component = thing;\n  if(typeof thing!=\"object\") component = await getButtonComponent(thing);\n  let button = document.createElement('BUTTON');\n  button.innerHTML = component.icon ?component.icon :component.label;\n  button.addEventListener('click',async (e)=>{\n    await solidUI.processComponent(null,component.dataSource);     \n  });\n  button.style = component.style;\n  button.style.cursor ||= \"pointer\";\n  button.style.background ||= \"#2196F3\";\n  button.style.color ||= \"#ffffff\";\n  button.style.padding ||= \"0.5em\";\n  button.style[\"border-radius\"] ||= \"0.2em\";\n  if(component.targetSelector) component.targetSelector.appendChild(button);\n  return button;\n\n  async function getButtonComponent(uri){\n    let ui = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n    let c = {};\n    uri = UI.rdf.sym(uri);\n    await UI.store.fetcher.load(uri);\n    c.label = (UI.store.any(uri,ui('label'))||{}).value;    \n    c.content = (UI.store.any(uri,ui('icon'))||{}).value;\n    c.style =  (UI.store.any(uri,ui('style'))||{}).value;\n    c.headerstyle =  (UI.store.any(uri,ui('headerStyle'))||{}).value;\n    c.dataSource =  (UI.store.any(uri,ui('dataSource'))||{}).value;\n    return c;\n  }\n\n}\n","export async function tabSet(options) {\n    const items = options.parts.map(part=>part.dataSource);\n    if(options.displayArea && options.startingContent){\n      await solidUI.processComponentSubject(options.startingContent);\n    }\n    options.renderTab ||= (div,source)=>{\n      const labels = (s)=>{\n        for(let p of options.parts){\n          if(p.dataSource===s)return p.label\n        }\n      }\n      div.innerHTML = labels(source);\n    }\n    options.renderMain ||= async (div,source)=>{\n      // div = inner main\n      div.setAttribute('data-suic-area','tab-display');\n      div.innerHTML = \"\";\n      if(options.style) div.style=\"options.style\";\n      let c = await solidUI.processComponentSubject(source) ;\n      div.appendChild( c );\n    }\n    const tabOptions = {\n      items,\n      backgroundColor : options.backgroundColor || solidUI.menuBackground,\n      orientation : options.orientation,\n      dom : options.dom,\n      onClose : options.onClose,\n      ordered : options.ordered,\n      selectedTab: options.selectedTab,\n      startEmpty : options.startEmpty,\n      renderTab : options.renderTab,\n      renderMain : options.renderMain,\n      renderTabSettings : options.renderTabSettings,\n    }\n    return UI.tabs.tabWidget(tabOptions);\n}\n","export async function button(component){\n   const targetElement = component.contentArea || document.body;\n   let button = document.createElement('BUTTON');\n   button.innerHTML = component.label;\n   if(component.title) button.title = component.title;\n   if(component.style) button.style = component.style;\n/*\n   button.style = component.style;\n   button.style.cursor ||= \"pointer\";\n   button.style.color ||= solidUI.buttonColor;\n   button.style.backgroundColor ||= solidUI.buttonBackgroundColor;\n*/\n   button = solidUI.styleButton(button,component);\n\n   button.addEventListener('click',(e)=>{\nalert(component.onclick)\n      window[component.onclick](e);  \n   });\n/*\n   let script = `(()=>{${component.onclick}})()`;\n   button.onclick = async ()=>{\n     Function('\"use strict\";return ('+script+')')();\n   };\n*/\n   targetElement.appendChild(button);\n}\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","getObject","kb","subject","predicate","sym","any","getObjects","each","results","v","push","async","applyProfile","domElement","me","type","document","origin","window","storage","webId","$rdf","UI","rdf","RDFS","Namespace","FOAF","SOLID","PIM","LDP","VCARD","fetcher","node","load","e","console","log","extendedDocs","concat","doc","name","nick","image","inbox","preferences","privateTypeIndex","publicTypeIndex","storages","issuers","loadProfile","logo","querySelector","src","title","innerHTML","solidUI","vars","podRoot","podName","podNick","podWebID","podImage","podInbox","podProfile","Feed","feedUri","proxy","encodeURI","response","fetch","feedContent","text","feedDom","DOMParser","parseFromString","items","querySelectorAll","length","parsedItems","forEach","el","link","getAttribute","match","replace","trim","json","externalLinkIcon","icons","iconBase","i","this","fetchAndParse","href","displayTarget","wrapper","createElement","property","content","standAlone","label","style","selBackground","selColor","height","anchors","anchor","listItems","li","width","mungeAnchors","element","noStyle","alert","classList","contains","addEventListener","event","preventDefault","displayArea","dataset","target","display","closest","parentElement","displayLink","needsIframe","String","interpolate","params","names","keys","vals","values","Function","toggleMenu","column2","getElementById","toggleDarkMode","container","remove","add","toggleFontSize","currentSize","body","fontSize","item","popout","newElement","processComponent","appendChild","startsWith","util","show","containingEl","main","tabulator","span","initInternal","linkType","render","format","marked","parse","showMarkdown","div","script","nativeIframe","uri","iframe","URL","b","srcdoc","scrollTo","top","behavior","getIframe","suicTemplate","Rolodex","RecordsList","runQuery","options","sparql","Sparql","sparqlQuery","endpoint","query","template","processTemplate","d","queryString","forceReload","location","Comunica","comunicaQuery","rdflibQuery","graph","preparedQuery","SPARQLToQuery","wanted","map","stm","table","querySync","r","row","w","sort","a","sparqlStr","result","comunica","newEngine","munge","x","invalidateHttpCache","store","webOperation","ok","statusText","sources","variables","bindings","entries","_root","reverse","id","flatten","groupOn","newResults","k","includes","n","Table","parts","sortOn","columnHeaders","headerRow","c","cell","border","padding","background","unselBackground","color","unselColor","rowElement","col","cleanNodes","backgroundColor","borderCollapse","Form","url","form","formSubject","u","resultDocument","contentSource","dom","formString","string","fSubj","removeDocument","formResultDocument","putBack","widgets","appendForm","CU","constructor","UIO","ISA","removeClass","tag","cl","addClass","thing","getProperty","curie","vocab","split","ns","getProperties","getValues","all","some","one","s","val","menuize","buttonGroupElement","buttons","b2","findType","sourceFile","targetSelector","hideTabulator","_show","showIframeSrc","pdf","video","showIframeSrcDoc","audio","loadFile","rss","html","graphviz","d3","select","renderDot","markdown","force","parsedString","styleSheet","bodyStyle","pageBackground","pageColor","Component","SolidOSLink","showTabulator","targetElement","targetOutline","makeOutline","wantedPane","pane","plugin","panes","byName","URLSearchParams","search","set","outliner","GotoSubject","history","replaceState","SparqlQuery","q","DataTemplate","getUIterm","data","interpolated","PageDefinition","getMainSubject","DM","XS","XMLSerializer","templateURL","templateInfo","p","object","fileInfo","contentType","serializeToString","dataSourceType","mainSubject","crossLoad","subjectType","getUItype","mungeHash","queryURL","querySubject","before","beforeQueryURL","beforeQuerySubject","beforeEndpoint","beforeQuery","beforeData","recurring","after","middle","makeIframe","show_iframe","pathname","makeSelector","onchange","selected","size","selectEl","darkBackground","option","endsWith","optionEl","lightBackground","buttonColor","buttonBackground","childNodes","targetEl","getParent","newu","file","ext","path","decodeURI","isContainer","mime","getType","editable","host","isHidden","Accept","isRepeat","gitApiFetch","creds","mode","credentials","headers","responseText","status","types","term","newval","termType","elements","mungeLabel","mungeURL","PUT","cType","optionSelector","j","hasSuic","menuColor","menuBackground","highlight","menuHighlight","selectorSize","borderColor","collectionSelector","dataSource","firstOption","collectionsList","onclick","anchorList","overflow","topTopic","ui","skos","topicNodes","topics","topicSelector","selectors","collections","colSelector","itemSelector","elm","items2list","simulateClick","parentNode","an","menuHightlight","mediaItem","orientation","contentArea","compact","includeMetadata","includemetadata","allowDownload","allowdownload","byArtist","schema","encoding","description","country","_getItemFromStore","vertical","offsetWidth","isVideo","t","download","align","audioWidth","imageStyle","visual","_fillMediaTemplate","elms","suicfeedmenu","menuArea","myFeed","makeFeedSelector","initFeeds","Accordion","accordion","rowhead","topic","caret","textAlign","cursor","rowContent","linkLabel","linkUrl","button","setAttribute","marginBottom","showByClass","borderTop","showing","children","App","app","mainHeight","rem","remSize","clientHeight","removeChild","rem2px","menuHeight","headerHeight","SolidAppContext","scroll","innerHeight","toString","setDefaults","fullPage","mm","tab","adminMenu","leftMenu","siteMenu","leftMenuStyle","appString","getHTML","solidLogo","menuElement","menu","currentPodMenu","userMenu","amenu","umenu","loginBox","loginButtonArea","mungeLoginArea","authn","currentUser","checkUser","initAuth","loginStatusBox","loginButtons","authSession","onLogin","onLogout","onSessionRestore","createLoginBox","initialContent","getComponentHash","rem2vw","clientWidth","rem2vh","leftColumnColumnStyle","leftColumnColumnMenu","iframeSrc","iframeContent","logoStyle","titleStyle","appStye","mainStyle","theme","fillTemplate","Menu","landingPage","processComponentSubject","nav","topUL","mainDisplay","pluginMenuArea","paddingTop","_styleUL","_styleNav","_styleMain","renderMenuItem","pluginType","sp","onmouseover","onmouseout","linktype","pluginURI","pluginLabel","pArea","newId","newArea","processedPlugin","processComponentJson","focus","margin","_styleLI","ul2","m","newItem","position","ul","Modal","modal","current","outerHTML","styleButton","openModal","action","closeModal","BookmarkTree","_fetch","containerElm","getElementsByClassName","component","bookmarksDisplay","loadUnlessLoaded","getTopic","click","containingElement","start","book","rdfs","topicTitle","createTextNode","toggle","subTopics","bookmarks","bookmark","bookmarkTitle","isFeed","bookmarkLink","bookElement","base","resourceSelector","podLink","collectionSize","resourceSize","resourceOnchange","showPage","ldp","_host","files","resources","containers","_pathname","_findContentType","_isHidden","parent","splice","selector","selectorElement","newContainer","newC","areaToWriteIn","myid","hostEl","fileNode","isa","draggable","getFloatComponent","getDraggableId","draggableDomElement","pos1","pos2","pos3","pos4","header","close","pageEl","headerStyle","onmousedown","clientX","clientY","onmouseup","onmousemove","offsetTop","left","offsetLeft","appearanceOnly","initApp","login","signupButton","inLabel","inlabel","outLabel","outlabel","transparent","getOutliner","suic","elementClicked","displayIn","dataOnly","newJson","newDiv","urlToLoad","getDefaults","open","handleLinkClick","as","track","mediaList","pods","pod","newHost","targetArea","podSelector","ds","startingContent","buttonListMenu","searchBox","searchButton","searchInput","placeholder","contentWrapper","directDisplay","external","currentElement","ds2","div2","direct","divs","activateComponent","menuOfMenus","headerstyle","getButtonComponent","icon","componentButton","listStyle","part","renderTab","source","labels","renderMain","tabOptions","onClose","ordered","selectedTab","startEmpty","renderTabSettings","tabs","tabWidget","tabSet","builtIn","getValue","compo","runBuiltIn","makeMmodal","g","list","isFirst","getRdfsList","first","rest","hash","predicatePhrases","pred","args","DEBUG","setStyle","styles","pageHighlight","pageHightlight","widgetBackground","widgetColor","widgetHighlight","menuAltColor","results2table","results2modal","tabset","results2descriptionList","themeURL","tName","CustomTemplate","got","mid","bottom","rowStr","blocks","SimpleSelector","templates","JSON","stringify","handler","templateName","processCustomTemplate","templateString","templateStr","fillOneTemplateRow","newStuff","join","re","RegExp","diff","diffMe","diffBy","fireEvent","evObj","createEvent","initEvent","dispatchEvent","elementType","className","pair","getComponentType","loadFromMemory","sentUri","eName","fragment","eDoc","uiString","innerText","mungedUri","valuesContain","nodes","bind"],"sourceRoot":""}