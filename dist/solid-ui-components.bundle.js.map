{"version":3,"file":"solid-ui-components.bundle.js","mappings":"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","sources":["webpack://solidUI/webpack/universalModuleDefinition","webpack://solidUI/webpack/bootstrap","webpack://solidUI/webpack/runtime/define property getters","webpack://solidUI/webpack/runtime/hasOwnProperty shorthand","webpack://solidUI/webpack/runtime/make namespace object","webpack://solidUI/./src/model/profile.js","webpack://solidUI/./src/databrowser.js","webpack://solidUI/./src/model/rss.js","webpack://solidUI/./src/user.js","webpack://solidUI/./src/model/sparql.js","webpack://solidUI/./src/view/table.js","webpack://solidUI/./src/view/form.js","webpack://solidUI/./src/utils.js","webpack://solidUI/./src/model/feed.js","webpack://solidUI/./src/view/accordion.js","webpack://solidUI/./src/view/app.js","webpack://solidUI/./src/view/menu.js","webpack://solidUI/./src/view/modal.js","webpack://solidUI/./src/view/selectorPanel.js","webpack://solidUI/./src/view/tabs.js","webpack://solidUI/./src/view/bookmarkTree.js","webpack://solidUI/./src/view/selector.js","webpack://solidUI/./src/index.js","webpack://solidUI/./src/view/buttonListMenu.js","webpack://solidUI/./src/view/menuMenu.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"solidUI\"] = factory();\n\telse\n\t\troot[\"solidUI\"] = factory();\n})(self, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* loadProfile()\n*/\nexport async function loadProfile(webId) {\n\nconst $rdf = UI.rdf;\n\nconst RDFS = $rdf.Namespace('http://www.w3.org/2000/01/rdf-schema#');\nconst FOAF = $rdf.Namespace('http://xmlns.com/foaf/0.1/');\nconst SOLID = $rdf.Namespace('http://www.w3.org/ns/solid/terms#');\nconst PIM = $rdf.Namespace('http://www.w3.org/ns/pim/space#');\nconst LDP = $rdf.Namespace('http://www.w3.org/ns/ldp#');\nconst VCARD = $rdf.Namespace('http://www.w3.org/2006/vcard/ns#');\n\n  const kb = window.kb;\n  const fetcher = $rdf.fetcher(kb);\n  const node = $rdf.sym(webId);\n  try {\n    await fetcher.load(webId);\n  }\n  catch(e){\n    console.log(\"Couldn't load profile : \"+e);\n    return {};\n  }\n  let extendedDocs = kb.each( webId, RDFS('seeAlso') );\n  extendedDocs = extendedDocs.concat( kb.each( node, FOAF('primaryTopicOf') ) );\n  for(let doc of extendedDocs){\n    await fetcher.load(doc);\n  }\n  let me = {\n    webId,\n    name  : getObject(kb,webId,FOAF('name')) || getObject(kb,webId,VCARD('fn')) || getObject(kb,webId,FOAF('nick')) || webId,\n    nick  : getObject(kb,webId,FOAF('nick')) || \"\",\n    image : getObject(kb,webId,VCARD('hasPhoto')) || \"\",\n    inbox : getObject(kb,webId,LDP('inbox')) || \"\",\n    preferences : getObject(kb,webId,PIM('preferencesFile')) || \"\",\n    privateTypeIndex : getObject(kb,webId,SOLID('privateTypeIndex')) || \"\",\n    publicTypeIndex : getObject(kb,webId,SOLID('publicTypeIndex')) || \"\",\n    storages : getObjects(kb,webId,PIM('storage')) || \"\",\n    issuers : getObjects(kb,webId,SOLID('oidcIssuer')) || \"\",\n  }\n  return me; // I'm defective, get your money back ;-)\n}\n\nfunction getObject(kb,subject,predicate){\n  subject = kb.sym(subject);\n  let value = kb.any(subject,predicate);\n  return value ?value.value :\"\";\n}\nfunction getObjects(kb,subject,predicate){\n  subject = kb.sym(subject);\n  let value = kb.each(subject,predicate);\n  let results = [];\n  for(let v of value){\n    results.push(v ?v.value :\"\");\n  }\n  return results;\n}\n","import {loadProfile} from './model/profile.js';\n\nexport async function applyProfile(domElement,me,type) {\n  domElement  ||= document;\n  let origin = window.origin;\n  me ||= `${origin}/profile/card#me`;\n  me = await loadProfile( me );\n  const storage = me.storages ?me.storages[0] :null ; // TBD MULTIPLE STORAGES\n  me.name = me.name || me.nick || me.webId;\n  let logo = domElement.querySelector('#currentPodLogo')\n  if(logo) logo.src = me.image;\n  let title = domElement.querySelector('#currentPodTitle');\n  if(title) title.innerHTML=`${me.name}'s Pod`;\n  solidUI.vars = {\n    podRoot   : storage,\n    podName   : me.name,\n    podNick   : me.nick,\n    podWebID  : me.webId,\n    podImage  : me.image,\n    podInbox  : me.inbox,\n    podProfile : me.webId,\n  };\n  return me;\n}\n \n    export function setHistory(uri){\n      const params = new URLSearchParams(location.search)\n      params.set('uri', (uri||\"\"));\n      window.history.replaceState({}, '', `${location.origin}${location.pathname}?${params}`);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    }\n\nexport async function createLoginBox(domElement){\n    const loginButtonArea = domElement.querySelector(\"#loginArea\");\n    const UI = panes.UI;\n    let tabulator = domElement.querySelector('#suicTabulator')\n/*\n      tabulator.style= `\n        display: none; \n        position: fixed;\n        z-index: 1;\n        left: 0;\n        top: 10vh;\n        width: 100%;\n        overflow: auto;\n        background-color: rgb(0,0,0);\n        background-color: rgba(0,0,0,0.2);\n      `; \n*/\n    async function mungeLoginArea(uri){\n      await initAuth();\n      loginButtonArea.innerHTML=\"\";\n      loginButtonArea.appendChild(UI.authn.loginStatusBox(document, null, {}))\n      let loginButtons = loginButtonArea.querySelectorAll('input');\n/*\n      for(let button of loginButtons){\n        button.style = `\n          border:none;\n          background:transparent;\n          font-size:1rem;\n          position: absolute;\n          top:3.5rem;\n          right:7.2rem;\n          cursor:pointer;\n        `;\n      }\n*/\n      loginButtons[0].value = loginButtons[0].value.replace(/WebID\\s*/,'');\n      if(loginButtons[1]) loginButtons[1].style.display=\"none\";\n    }      \n    async function initAuth(){\n      if( !UI.authn.currentUser() ) {\n        await UI.authn.checkUser();\n      }\n    }\n    if( UI.authn.authSession ) {\n      UI.authn.authSession.onLogin(() => {\n        mungeLoginArea();\n      })\n      UI.authn.authSession.onLogout(() => {\n        mungeLoginArea();\n      })\n      UI.authn.authSession.onSessionRestore((url) => {\n        mungeLoginArea();\n\n      })\n    }    \n//    document.addEventListener('DOMContentLoaded',()=>{mungeLoginArea();});\n    mungeLoginArea();\n} // ENDS\n","/*\n *  myFeed = new Feed(solidUI,feedUri)\n *  \n\nproxy\nhref || link\ndisplayType\nstandAlone\nlabel\n  selBackground\n  selColor\n  height\n  width\n\n */\n\nexport class Feed {\n\n  async fetchAndParse(feedUri,proxy){\n\n    // fetch feed URI & parse into a Dom structure\n    //\n    feedUri = (proxy||\"\")+encodeURI( feedUri );\n\n    let response = await fetch( feedUri )\n    let feedContent = await response.text();\n    const domParser = new window.DOMParser();\n    let feedDom = domParser.parseFromString(feedContent, \"text/xml\")\n\n    // find items (RSS) or entries (Atom)\n    //\n    let items = feedDom.querySelectorAll(\"item\") || null;\n    items = items.length<1 ?feedDom.querySelectorAll(\"entry\") :items;\n\n    // parse items\n    //\n    let parsedItems=[];\n    items.forEach( el => {\n\n      // find item link, account for specific kinds of quirks\n      //\n      let link = el.querySelector(\"link\").innerHTML;\n      // vox\n      if(!link) link = el.querySelector('link').getAttribute('href');\n      // reddit\n      if(!link || link.match(/ /)){\n        link = el.querySelector('content').innerHTML.replace(/.*\\[link\\]/ ,'').replace(/a href=\"/,'').replace(/\"&gt;.*/,'').replace(/.*&lt;/,'');\n      }\n      // engadget\n      if(!link.match(/^http/)) link = link.replace(/.*\\[CDATA\\[/,'');\n\n      // always use https, not http\n      link = link.replace(/^http:/,'https:');\n\n      // get the title\n      let title = el.querySelector(\"title\").innerHTML;\n      title = title.replace(/^\\<\\!\\[CDATA\\[/,'');\n      title = title.replace(/\\]\\].*\\>/,'').trim();\n\n      parsedItems.push({title,link});\n    });\n    return parsedItems;\n  }  // END OF fetchAndParse()\n\n\n  async render(solidUI,json){\n    let items = \"\";\n    let externalLinkIcon = UI.icons.iconBase+`/noun_189137.svg`;\n    externalLinkIcon = `<img src=\"${externalLinkIcon}\" style=\"width:1em;height:1em;display:inline-block; padding-left:0.4em;opacity:0.5\">`;\n    for(let i of await this.fetchAndParse((json.href||json.link),json.proxy)){\n      if(json.displayTarget===\"window\"){\n/*\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\">\n            <a href=\"${i.link}\" target=\"_BLANK\" property=\"rss:title\">\n              ${i.title}\n            </a>\n          </li>\n        `;\n*/\n      }\n      else {\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\" style=\"display:none;background:green;border:1px solid grey;\">\n            <a href=\"${json.proxy+i.link}\" property=\"rss:title\" style=\"background:#999;display:inline-block\">\n               ${i.title}\n            </a>\n            <a href=\"${i.link}\" class=\"skipMunge\" target=\"_BLANK\" class=\"external\">${externalLinkIcon}</a>\n          </li>\n        `;\n      }\n    }\n    const wrapper = document.createElement('DIV');\n    wrapper.property = \"xmlns:rss\";\n    wrapper.content = \"http://purl.org/rss/1.0/\";\n    if(json.standAlone) {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n          <b property=\"rss:title\">${json.label}</b>\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n\n    wrapper.querySelector('B').style=`padding:1em;padding-right:0;background:${json.selBackground};color:${json.selColor};border:1px solid grey;width:100%;display:inline-block`;\n    }\n    else {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n<!--          <div property=\"title\" style=\"background:#d0d0d0;padding:1em;\">${json.label}</div>-->\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n    wrapper.querySelector('UL').style=`padding:0;padding-left:0;list-style:none;margin-top:0;width:100%;`;\n    }\n    wrapper.querySelector('UL').style=`padding:0;border:1px solid grey;list-style:none;margin-top:0;width:100%;height:${json.height};overflow-y:auto;`;\n    let anchors = wrapper.querySelectorAll('A');\n    for(let anchor of anchors){\n      anchor.style=\"text-decoration:none;\"\n    }\n    let listItems = wrapper.querySelectorAll('LI');\n    for(let li of listItems){\n      li.style=\"padding:0.5em;border-bottom:1px solid grey\";\n    }\n    if(json.width) wrapper.style.width = json.width;\n    return wrapper;\n  }\n}\n","import {setHistory,applyProfile} from './databrowser.js';\nimport {Feed} from './model/rss.js';\n\n/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  USER CALLABLE ACTIONS\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n\n  // https://stackoverflow.com/a/41015840/15781258\n  //\n  String.prototype.interpolate = function(params) {\n    const names = Object.keys(params);\n    const vals = Object.values(params);\n    return new Function(...names, `return \\`${this}\\`;`)(...vals);\n  }\n\n  window.toggleMenu=()=>{\n    const column2 = document.getElementById('column-2');\n    column2.style.display ||= \"block\"; \n    if(column2.style.display===\"block\"){\n      column2.style.display=\"none\"\n    }\n    else {\n      column2.style.display=\"block\"\n    }\n  }\n  window.toggleDarkMode=()=>{\n     const container = document.getElementById('zContainer');\n     let currentMode = container.classList.contains('darkMode');\n     if(currentMode){\n        container.classList.remove('darkMode');\n     }\n     else {\n        container.classList.add('darkMode');\n     }\n  }\n  window.toggleFontSize=()=>{\n     let currentSize = document.body.style.fontSize || \"100%\";\n     if(currentSize===\"100%\"){\n        document.body.style.fontSize = \"120%\";\n     }\n     else if(currentSize===\"120%\"){\n        document.body.style.fontSize = \"140%\";\n     }\n     else if(currentSize===\"140%\"){\n        document.body.style.fontSize = \"90%\";\n     }                                                                                                   else {\n        document.body.style.fontSize = \"100%\";\n     }\n  }                                                                                                 \n\n  async function showIframe(uri,displayArea){\n    if( uri.match(/localhost/) ) {\n      displayArea.src = uri;\n      return  ;\n    }\n    const r = await fetch(uri);\n    const content = await r.text();\n    const contentElement = this.createElement('SPAN','',content);\n    displayArea.contentWindow.document.body.innerHTML = \"\";\n    displayArea.contentWindow.document.body.appendChild(contentElement);\n  }\n  function showByClass(event){\n    let wanted = event.target.dataset.link;\n    let main = event.target.closest('.solid-uic-app').querySelector('.main');\n    let elements = main.querySelectorAll('[typeof]');\n    for(let element of elements){\n      if(wanted===\"all\") {\n        element.style.display=\"block\";\n        continue;\n      }\n      if( (element.getAttribute('value')).indexOf(wanted)>-1 ) element.style.display=\"block\";\n    //  if(element.classList.contains(wanted)) element.style.display=\"block\";\n      else element.style.display=\"none\";\n    }\n    highlightMenuSelection(event)\n  }\n  function highlightMenuSelection (e) {\n    let wanted = e.target.dataset.link;\n    let siblings = e.target.parentElement.children;\n    for(let sib of siblings){\n      if(sib.dataset.link===wanted)  sib.classList.add('selected');\n      else sib.classList.remove('selected');\n    }\n  }\n  function toggleAccordion (e) {\n    let wanted = e ?e.target.dataset.link :null;\n    let siblings = e.target.closest('UL').children;\n\n    // HIDE ALL ACCORDION DROPDOWNS\n    let navs = e.target.closest('UL').querySelectorAll('NAV');\n    for(let n of navs) {n.style.display=\"none\"}\n\n    // SHOW SELECTED ACCORDION DROPDOWNS\n    for(let sib of siblings){\n      let button = sib.querySelector('BUTTON');\n      let links = sib.querySelectorAll('NAV DIV');\n      for(l of links) { l.classList.remove('selected')}\n      let box = sib.querySelector('NAV');\n      if(button.dataset.link===wanted)  {\n        box.style.display=\"block\";\n      }  \n    } \n  }\n  window.displayLink = async function( e, item, element ){\n    if(typeof item==='string') item = { href:item }\n    item.href = item.href || item.link;\n    item.type = item.type || 'Link';\n    item.type = item.type.replace(/http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n\n\n    // IF POPOUT, DISPLAY IN ITS OWN OVERLAY AND RETURN\n    if(item.popout) {\n      let newElement = await solidUI.processComponent('',item.href)\n      newElement.style.display=\"block\";\n      document.body.appendChild(newElement);\n      return newElement;\n    }\n\n    // IF SOLIDOS LINK, DISPLAY WITH GOTOSUBJECT, RETURN\n    if(item.type.startsWith(\"SolidOS\")) {\n      document.getElementById('mainMain').style.display=\"none\";\n      const targetElement = document.getElementById('suicTabulator')\n      targetElement.style.display=\"block\";\n      const targetOutline = targetElement.querySelector('#outline');\n      let wantedPane;\n      item.href = (!item.href && item.variable) ?solidUI.vars[item.variable] :item.href;\nconsole.log(solidUI.vars);\n      let subject = item.href;\n      if( item.pane ) {\n         wantedPane = panes.byName(item.pane);\n      }\n      else if( item.pod ) {\n        let me = await applyProfile(null,item.pod,'podLoad');\n        subject = me.storages[0];\n      }\n      subject = window.kb.sym(subject);\n      setHistory(subject.uri);\n      window.outliner.GotoSubject(subject,true,wantedPane,true,null,targetOutline);\n      return;\n    }\n\n    let main = document.getElementById('mainMain')\n    let tabulator = document.getElementById('suicTabulator')\n    if(main) main.style.display=\"block\";\n    if(tabulator) tabulator.style.display=\"none\";\n\n    // FIND CONTAINING ELEMENT\n    let containingEl;\n    if(element && !e){\n      containingEl = element;\n    }\n    // let wrapper =e.target.closest('.solid-ui-component')\n    let wrapper = e && e.target ?e.target.closest('.solid-uic-app') :null;\n    if(wrapper && wrapper.classList.contains('solid-main-app')) {\n      containingEl = wrapper.querySelector('#mainMain');\n    }\n    else if(wrapper) {\n      containingEl = wrapper.querySelector('.main');\n    } \n    containingEl=containingEl||document.body.querySelector('.main')||document.body;\n    if(containingEl) containingEl.innerHTML=\"\";\n    let content = item.content;\n    if(content){\n      let span = document.createElement('SPAN')\n      content = content.interpolate(solidUI.vars);\n      span.innerHTML = content;\n//      span = mungeAnchors(span);\n      containingEl.innerHTML=\"\"\n      containingEl.appendChild(span);\n      return await solidUI.initInternal(containingEl);  \n    }\n    // SolidOsLink\n    if(item.type===\"SolidOSLink\") {\n        return;\n    }\n    // FEED \n    if(item.type===\"Feed\"||item.linkType===\"Feed\") {\n      let content = await (new Feed()).render(solidUI,item);\n/*\n      let newItem = {\n        type:\"App\",\n        orientation:\"vertical\",\n        menu:item\n      }\n      let content = await solidUI.processComponent('','',newItem)\n*/\n      content = mungeAnchors(content,\"noStyle\");\n      containingEl.innerHTML=\"\"\n      containingEl.appendChild(content);\n      return containingEl;\n    }\n    // MARKDOWN\n    else if(item.type==='TransformLink'){\n      if(item.href && item.format && item.format.match(/markdown/)){\n        return showMarkdown(item,containingEl);\n      }\n    }\n    else if(item.type===\"Link\") {\n      if(content){\n          containingEl.innerHTML = content;\n        return await this.initInternal(containingEl);  \n      }\n      else if(item.script){\n        let content = await Function('\"use strict\";return (' + item.script + ')')();\n        content = mungeAnchors(content) ;\n//        containingEl.innerHTML=\"\"\n        return(content);\n      }\n      else if(item.href){\n        let content = await getIframe(item,containingEl,item.nativeIframe);\n//        containingEl.innerHTML=\"\"\n        containingEl.appendChild(content);\n        return containingEl;\n      }\n    }\n    else {\n      content = await solidUI.processComponent('',item) ;\n      if(!item.format) content = mungeAnchors(content);\n      containingEl.innerHTML=\"\"\n      if(typeof content === 'string'){\n        let div = document.createElement('DIV');\n        div.innerHTML = content;\n        containingEl.appendChild(div);\n      }\n      else containingEl.appendChild(content);\n      return containingEl;\n    }\n  }\n  async function showMarkdown(item,containingEl){\n    let content = await fetch(item.href);\n    content = await content.text();\n    containingEl.innerHTML=\"\"\n    let style =`\n<style>\n  h1 {display:none;}\n//  a{text-decoration:none; padding-top:0.25em;display:inline-block;padding-left:1em;}\n  ul {list-style:none;padding-left:0;margin-top:0;}\n</style>`;\n    let wrapper = document.createElement('SPAN');\n    wrapper.innerHTML = style + marked.parse( content );\n    wrapper = mungeAnchors(wrapper,\"noStyle\");\n    return wrapper;\n  }\n\n  function mungeAnchors(element,noStyle){\n    if(!element) return;\n    const anchors = element.querySelectorAll('A');\n    for(var anchor of anchors){\n      if(!anchor.innerHTML) alert(anchor)\n      if(anchor.classList.contains('skipMunge')) continue;\n      anchor.addEventListener('click',async(event)=>{\n        event.preventDefault();\n        let displayArea = element.dataset.target;\n        let display = event.target.closest('.solid-uic-app')\n        if(display && !displayArea) displayArea = display.querySelector('.main');\n        let href = event.target.href || event.target.parentElement.href\n        displayLink(null,{href,needsIframe:true},displayArea);\n      });\n      if(noStyle) continue;\n      anchor.style=\"display:block;text-decoration:none;padding:0.5em; border-bottom:1px solid grey;color:#017698 !important;\";\n    }\n    return element;\n  }\n  async function getIframe(item,containingEl,nativeIframe){\n    let uri = item.href;\n    const iframe = document.createElement(\"IFRAME\");\n    iframe.style=\"width:100%;height:90vh;border:none;margin:0;padding:0;\";\n    iframe.src = \"\";\n    if(nativeIframe) {\n      iframe.src=uri;\n    }\n    else {\n      try{\n        let content = await fetch(uri);\n        if(content){\n          content = await content.text()\n//        if(!content.match(/^\\s*</)) return await goto(uri,containingEl);\n          containingEl.innerHTML=\"\";\n          uri = uri.replace(/^.*proxy\\?uri=/,'');\n          uri = new URL(uri);\n          const b = `<base href=\"${uri.origin}/\"><base target=\"_BLANK\">`;\n          iframe.srcdoc = `<body>${b}${content}</body>`\n          iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n        }\n        else {\n          console.log(\"Fetched but no content!\");\n        }\n      }\n      catch(e){console.log(\"Couldn't fetch!\",e)}\n    }\n    return iframe;\n  }\n\n  async function goto(uri,domElement){\n    var kb = UI.store;\n    var outliner = panes.getOutliner(window.document)\n    var subject = kb.sym(uri);\n    const pane = panes.byName('dataContents');\n    outliner.GotoSubject(subject, true, pane, true, undefined);\n  }\n\n  function gotoPane(uri,paneName,targetElement){\n    var subject = panes.UI.rdf.sym(uri);\n    var wantedPane = panes.byName(paneName);\n    outliner.GotoSubject(subject,true,wantedPane,true,null,targetElement);\n  }\n\n  function renderSolidOSpage(item){\n     const targetElement = document.getElementById('suicTabulator')\n     targetElement.style.display=\"block\";\n     window.outliner.GotoSubject(window.kb.sym(item.href),true,undefined,true);\n  }\n","export class Sparql {\n\n  async sparqlQuery(endpoint,queryString,forceReload){\n    if(typeof Comunica !=\"undefined\")\n      return await this.comunicaQuery(endpoint,queryString,forceReload);\n    else   \n      return await this.rdflibQuery(endpoint,queryString,forceReload);  \n  }\n\n/* REPLACED\n  async rdflibQuery(solidUI,kb,endpoint,queryString,json){\n    await solidUI.loadUnlessLoaded(endpoint);\n*/\n/* NEW */\n  async rdflibQuery(endpoint,queryString,forceReload){\n/*\n    kb = UI.store\n    const fetcher = UI.store.fetcher;\n*/\n    const kb = UI.rdf.graph();\n    const fetcher = UI.rdf.fetcher(kb);\n\n//    if(forceReload || !kb.any(null,null,null,UI.rdf.sym(endpoint)))\n      await kb.fetcher.load(endpoint);\n/* END-NEW */\n\n    try {\n      const preparedQuery=await UI.rdf.SPARQLToQuery(queryString,false,kb);\n      let wanted = preparedQuery.vars.map( stm=>stm.label );\n      let table = [];\n      let results = kb.querySync(preparedQuery);\n      for(let r of results){\n        let row = {};\n        for(let w of wanted){\n          let value = r['?'+w];\n          row[w] = value ?value.value :\"\";\n        }\n        table.push(row);\n      }\n      table = table.sort((a,b)=>a.label > b.label ?1 :-1);\n      return table\n    }\n    catch(e) { console.log(e); }\n  }\n\n  async  comunicaQuery(endpoint,sparqlStr,forceReload){\n   try {\n    let comunica = Comunica.newEngine() ;\n    if(forceReload) comunica.invalidateHttpCache();\n    function munge(x){\n       return x ? x.replace(/^\"/,'').replace(/\"[^\"]*$/,'') :\"\";\n    }\n    let result;\n    let r = await UI.store.fetcher.webOperation('GET',endpoint);\n    if(!r.ok) { alert(r.statusText); return; }\n    try { result = await comunica.query(sparqlStr,{sources:[endpoint]}) ; }\n    catch(e){alert(e); return};\n    let wanted = result.variables;\n    result = await result.bindings()\n    let table = [];\n    let hash = {};\n    for(let e of result.entries()) {\n      if( !e[1] ||  !e[1]._root || !e[1]._root.entries ) continue;\n      e = e[1]._root.entries\n      let row = {} ;\n      for(let i in e){\n        let key = munge( e[i][0].replace(/^\\?/,''))\n        row[key] = row[key] || \"\";\n        let value = munge(e[i][1].id)\n        if( typeof row[key] != 'ARRAY' ) row[key]= [row[key]]\n        if( typeof row[key] === \"ARRAY\" ) row[key].push(value)\n        else row[key] = value;\n      }\n      // include keys even for empty values\n      for(let key of wanted){\n        key = key.replace(/^\\?/,'');\n        row[key] = row[key] || \"\"\n      }\n      table.push(row);\n    }\n    if(!table.length) console.log('No results!');\n    return table;\n   }\n   catch(e){console.log(e)}\n  }\nflatten(results,groupOn){\n  const newResults = {};\n  for(let row of results) {\n    let key = row[groupOn];\n    if(!newResults[key]) newResults[key]={};\n    for(let k of Object.keys(row)){\n      if(!newResults[key][k]) {\n        newResults[key][k]=row[k];\n        continue;\n      }  \n      if(newResults[key][k].includes(row[k])) continue;\n      if(typeof newResults[key][k]!=\"object\") newResults[key][k]=[newResults[key][k]]\n      newResults[key][k].push(row[k])\n    }\n  }\n  results = [];\n  for(let n of Object.keys(newResults)){\n    results.push(newResults[n])\n  }\n  return results;\n} \n\n} // class Sparql  \n\n","export class Table {\n  render(options) {\n    let results = options.parts;\n    if(!results || !results.length) {\n      console.log(\"No results!\");\n      return document.createElement('SPAN');\n    }\n    if(options.sortOn) {\n//      results.sort((a,b)=> a[options.sortOn] - b[options.sortOn] )\n      results = results.reverse();\n    }\n    let table = document.createElement('TABLE');\n    let columnHeaders = Object.keys(results[0]);\n    let headerRow = document.createElement('TR');\n    for(let c of columnHeaders){\n      let cell = document.createElement('TH');\n      cell.innerHTML = c;\n      cell.style.border=\"1px solid black\";\n      cell.style.padding=\"0.5em\";\n      cell.style.background=options.unselBackground;\n      cell.style.color=options.unselColor;\n      headerRow.appendChild(cell);\n    }\n    table.appendChild(headerRow);\n    for(let row of results){\n      let rowElement = document.createElement('TR');\n      for(let col of columnHeaders){\n        if(options.cleanNodes){\n          row[col] = row[col].replace(/.*\\#/,'').replace(/.*\\//,'');\n        }\n        let cell = document.createElement('TD');\n        cell.innerHTML = row[col];\n        cell.style.border=\"1px solid black\";\n        cell.style.padding=\"0.5em\";\n        cell.style.backgroundColor=options.background;\n        cell.style.color=options.color;\n        rowElement.appendChild(cell);\n      }\n      table.appendChild(rowElement);\n    }\n    table.style.borderCollapse=\"collapse\";\n    return table;\n  }\n}\n// ENDS\n","import * as u from '../utils.js';\n/*\n  form.render()   // define options via Javascript parameters\n  form.fromUrl()  // define options via ui:Component file\n  form.fromMem()  // define options via a ui:Component string\n\n*/\nexport class Form {\n\n  /**\n   * @param {String}      form - the URL of the form definition document\n   * @param {String}      formSubject - the data for the form\n   * @param {String}      [formString] - a string form definition\n   * @param {HTMLElement} [dom=document] - DOM container to hold form\n   * @param {Boolean}     [forceReload] - empty store before loading\n   * @param {String}      [formResultDocument] - place to store form results\n   * @param {Function}    [script] - Javascript to execute on form change\n   * @returns an HTML DIV element containing the form\n   */\n  async fromURL(url){\n    let node = UI.rdf.sym(url);\n    await UI.fetcher.load(node);\n    return await this.render({\n                form : url,\n         formSubject : u.getProperty(node,'ui:formSubject'),\n              script : u.getProperty(node,'ui:script'),\n      resultDocument : u.getProperty(node,'ui:formResultDocument'),\n    });\n  }\nasync render(o){\n    const dom = o.dom || document;\n    const container = document.createElement(\"DIV\");\n    container.classList.add('uic-form');\n    let form = UI.rdf.sym(o.form);\n    let subject;\n    if(o.formSubject) subject = UI.rdf.sym(o.formSubject) ;\n    if(o.formString){\n      UI.rdf.parse(string,UI.store,o.form,'text/turtle');\n    }\n    else await UI.store.fetcher.load(o.form);\n    if(!subject){\n       let fSubj = UI.rdf.sym('http://www.w3.org/ns/ui#formSubject');\n       subject = UI.store.any(form,fSubj)\n    }\n    if(o.forceReload){ \n      if(subject && subject.doc) UI.store.removeDocument(subject.doc());\n    }\n    if(subject) await UI.store.fetcher.load(subject.doc());\n    else {\n      container.innerHTML=\"ERROR : Could not load form subject \"\n      return container;\n    }\n    const title = document.createElement(\"H2\");\n    let doc = o.formResultDocument;\n    if(subject && !doc && subject.doc) doc = subject.doc();\n    const script = o.script || function (){\n      UI.store.fetcher.putBack(subject) // tempory work-around ui:ordered bug\n    };\n    try {\n      UI.widgets.appendForm(dom, container, {}, subject, form, doc, script);\n    }\n    catch(e){\n       // console.log(dom,container,subject,form,doc)\n       container.innerHTML = \"FORM ERROR:\"+e;\n    }  \n    return container;\n  }\n\n}\n\n/* OLD\n  async render(solidUI,options){\n    const container = document.createElement(\"DIV\",'uic-form');\n    const dom = window.document;\n    const form = await solidUI.loadUnlessLoaded(options.form);\n    await solidUI.loadUnlessLoaded(options.formSubject);\n    const subject = await solidUI.loadUnlessLoaded(options.formSubject);\n    if(!subject) return console.log(\"ERROR : Couldn not load form subject \",options.formSubject)\n    let doc = options.formResultDocument;\n    if(!doc && subject.doc) doc = subject.doc();\n    const script = options.script || function(){};\n    try {\n      UI.widgets.appendForm(dom, container, {}, subject, form, doc, script);\n    }\n    catch(e){return console.log(e)}  \n    if(options.onchange) {\n      const vals = container.querySelectorAll('.formFieldValue button');\n      for(let v of vals){\n        v.onclick = \"alert(3)\";\n      }\n    }\n    return container;\n  }\n\n*/\n","/*\n  show[rdf|markdown|graphviz](uri,string,targetSelector)\n  mungeLabel(label)\n  PUT(url,content,contentType)\n*/\nimport {Sparql} from './model/sparql.js';\nimport {Table} from './view/table.js';\nimport {Form} from './view/form.js';\n//import mime from \"https://cdn.skypack.dev/mime\";\n\nexport class CU {\n\n  constructor(){\n    this.UIO = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n    this.ISA = UI.rdf.sym(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\");\n    this.PIM = UI.rdf.Namespace(\"http://www.w3.org/ns/pim/space#\");\n  }\n\n\nremoveClass(tag,cl){\n    document.querySelector(tag).classList.remove(cl);\n}\naddClass(tag,cl){\n    document.querySelector(tag).classList.add(cl);\n}\n\nnewElement(tag,id,classList,value){\n   let thing = document.createElement(tag);\n   if(id) thing.id = id;\n   if(classList) thing.classList = classList;\n   if(value) thing.value = value;\n   return thing;\n}\n\n  getProperty(subject,curie){\n    let [vocab,predicate] = curie.split(/:/);\n    return UI.store.any(subject,UI.ns[vocab](predicate)) || \"\";\n  }\n  getProperties(subject,curie){\n    let [vocab,predicate] = curie.split(/:/);\n    return UI.store.each(subject,UI.ns[vocab](predicate))  || [];\n  }\n  getValues(subject,curie){\n    let all = [];\n    let some = this.getProperties(subject,curie) || [];\n    for(let one of some){\n      all.push(one.value);\n    }\n    return all;\n  }\n\n  getObjects(subject,predicate){\n    return UI.store.each(subject,predicate).map((s)=>{return s.value});\n  }\n  getObject(subject,predicate){\n    let val = UI.store.any(subject,predicate);\n    return val && val.value ?val.value :\"\";\n  }\n\n  /*\n  displays rendered component in targetSelector if it is not null\n  returns rendereed component as an HTML-element\n\n  renderFromURL(url,targetSelector,forceReload);\n   \n\n  load from URL - renderComponent({url:\"\"});\n  load from STRING - renderComponent({url:\"\",string:\"\"});\n  load from HTML-ELEMENT - renderComponent({element:\"\"});\n\n    1. loads from url, string, or html-element\n       * if string, parses it into store\n       * else if !url, gets url from element dataset, loads into store\n       * else if !string && !element loads url into store\n       * if forceReload, does store.removeDocument before loading\n    2. finds subject from url or #this\n       * if url contains #, use it as subject\n       * else use url+#this as subject\n    3. \n \n            loads uri into store\n\n   renderComponent({\n     url,\n     string,\n     element,\n     forceReload,\n   })\n     \n  async renderComponent(url,string,element){\n    url = url.value ?url.value :UI.rdf.sym(url)\n    let uiType = this.getUItype(url);\n    let mainSubject = UI.store.rdf.sym( url.match(/\\#/) ?url :url+\"#this\" );\n    let node = await this.crossLoad(url,string,forceReload);\n    let subjectType = this.getUItype(mainSubject);\n  }\n   */\n\n  menuize(buttonGroupElement){\n    buttonGroupElement = document.querySelector(buttonGroupElement);\n    if(!buttonGroupElement) return;\n    let buttons = buttonGroupElement.querySelectorAll('BUTTON');\n    for(let b of buttons){\n      b.addEventListener('click',(e)=>{\n        let clicked = e.target;\n        for(let b2 of buttons){ b2.classList.remove('selected') }\n        b.classList.add('selected');\n      });\n    }\n  }\n\n  findType(uri,string){\n    if(!uri && typeof sourceFile != \"undefined\") uri = sourceFile;\n    let type = uri.replace(/\\#.*/,'').replace(/\\?.*/,'').replace(/.*\\./,'');\n    if(type.match(/(md)|(markdown)/)) return \"markdown\";\n    if(type.match(/(dot)|(gv)/)) return \"graphviz\";\n    if(type.match(/(ttl)|(rdf)|(n3)/)) return \"rdf\";\n    if(type.match(/(html)|(css)|(js)/)) return type;\n    return \"unknown\";\n  }\n\n  async show(type,uri,string,targetSelector,forceReload,obj){\n    document.getElementById('right-column').style.display=\"block\";\n    document.getElementById('right-column-tabulator').style.display=\"none\";\n    if(targetSelector && typeof targetSelector != \"string\"){\n      targetSelector = targetSelector.id;\n    }\n    type ||= \"\";\n    if(type.match(/(turtle)|(rdf)|(n3)/)) type = \"rdf\";\n    if(type.match(/image/)) type = \"image\";\n    if(type.match(/video/)) type = \"video\";\n    if(type.match(/audio/)) type = \"audio\";\n    if(type.match(/graphviz/)) type = \"graphviz\";\n    if(type.match(/(javascript|json|text)/)) type = \"text\";\n    type = type.replace(/.*\\//,'');\n    if(this._show[type])\n       return await this._show[type](uri,string,targetSelector,forceReload,obj);\n  }\n\n  _show = {\n\n  image : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrc(uri,targetSelector);\n  },\n  pdf : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrc(uri,targetSelector);\n  },\n  video : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrcDoc(`<video controls=\"yes\" src=\"`+uri+`\" style=\"max-width:100vw;max-height:100vh\"></video>`,targetSelector);\n  },\n  audio : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrcDoc(`<audio controls=\"yes\" src=\"`+uri+`\" style=\"margin-top:2em;\"></audio>`,targetSelector);\n  },\n  text : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) return this.showIframeSrcDoc(string,targetSelector);\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = string;\n    return div;\n  },\n  html : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) return this.showIframeSrcDoc(string,targetSelector);\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = string;\n    return div;\n  },\n  graphviz : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) {\n      document.querySelector(targetSelector).innerHTML = \"\";\n      try {\n        d3.select(targetSelector).graphviz().renderDot(string, ()=>{} );\n      } catch(e){ alert(e); }\n    }\n    else {\n      let div = document.createElement(\"DIV\");\n      try {\n        d3.select(div).graphviz().renderDot(string, ()=>{} );\n      } catch(e){ alert(e); }\n      return div;\n    }\n  },\n  markdown : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    // string ||= await this.loadFile(uri);\n    let parsedString = marked.parse(string);\n    if(targetSelector){\n      return this.showIframeSrcDoc(parsedString,targetSelector);\n    }\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = parsedString;\n    return div; \n  },\n  Component : ()=>{\n    alert(\"utils.js Component\")\n  },\n  SolidOSLink : async (url,targetSelector,forceReload,obj)=>{\n      document.getElementById('right-column').style.display=\"none\";\n      document.getElementById('right-column-tabulator').style.display=\"block\";\n      const targetElement = document.getElementById('suicTabulator')\n      targetElement.style.display=\"block\";\n      const targetOutline = targetElement.querySelector('#outline');\n      let subject = UI.rdf.sym(url);\n//      await UI.store.fetcher.load(subject);\n//      let wp= solidUI.util.UIO('pane');\n//      let wantedPane = (UI.store.any(subject,wp)||\"\").value\n      let wantedPane = obj && obj.pane ?panes.byName(obj.pane) :null;\n      const params = new URLSearchParams(location.search)\n      url = url.uri ?url.uri :url;\n      params.set('uri', url);\n//    setHistory(window.orgin+'/s/solid-content-manager/index.html?uri='+url);\n      let thisApp = '/cm/'\n      window.outliner.GotoSubject(subject,true,wantedPane,true,null,targetOutline);\n      window.history.replaceState({}, '', `${thisApp}?${params}`);\n      return;\n  },\n  Form : async(subject,targetSelector,forceReload)=>{\n    let uri = subject.doc ?subject.doc() :subject;\n    if(uri.value) uri = uri.value;\n    const form = await (await new Form()).render({ form:subject.value });\n    if(targetSelector){\nif(!targetSelector.startsWith('#')) targetSelector = '#'+targetSelector;\n      document.querySelector(targetSelector).innerHTML = \"\";\n      document.querySelector(targetSelector).appendChild(form);\n      // return await this.showIframeSrcDoc( form.outerHTML, targetSelector );\n      // let src =  \"showForm.html?uri=\" + encodeURI(uri) ;\n      // return this.showIframeSrc( src, targetSelector );\n    }\n    return form;\n  },\n  SparqlQuery : async(subject,targetSelector,forceReload)=>{\n    let e = (UI.store.any(subject,this.UIO('endpoint'),null)||\"\").value;\n    let q = (UI.store.any(subject,this.UIO('query'),null)||\"\").value;\n    q = q.replace(/\\$\\{[^\\}]*\\}/g,'');\n    let table = (new Table()).render({\n      parts : await (new Sparql()).sparqlQuery(e,q,forceReload),\n      cleanNodes : true,\n      sortOn : 'term'\n    });\n    if(targetSelector) {\n      document.querySelector(targetSelector).innerHTML=\"\";\n      document.querySelector(targetSelector).appendChild(table);\n    }\n    return table;\n  },\n  DataTemplate : async(subject,targetSelector,store)=>{\n    store ||= UI.store;\n    let query =  this.getUIterm(subject,'query');\n    let endpoint =  this.getUIterm(subject,'endpoint');\n    let template = this.getUIterm(subject,'template');\n    let data = await (new Sparql()).sparqlQuery(endpoint,query,store);\n    let interpolated = \"\";\n    for(let row of data.reverse()){\n      interpolated += template.interpolate(row);\n    }\n    if(targetSelector) {\n      this.showIframeSrcDoc(interpolated,targetSelector);\n    }\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = interpolated;\n    return div;\n  },\n  PageDefinition : async(subject,targetSelector)=>{\n    subject = this.getMainSubject(subject);\n    let DM = new DOMParser();\n    let XS = new XMLSerializer();\n    let templateURL = this.getUIterm(subject,'pageTemplate');\n    let templateInfo = await this.loadFile(templateURL)\n    let dom = DM.parseFromString( templateInfo.body,\"text/html\");\n//alert( XS.serializeToString(dom) );\n    let parts =  UI.store.match(subject,this.UIO('component'));\n    for(let p of parts){\n      p=p.object;\n      let component = \"\";\n      let label, url;\n        label = this.getObject(p,this.UIO(\"label\"));\n        url = this.getObject(p,this.UIO(\"href\"));\n/*\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      for(let pstmt of p){\n        if(pstmt.predicate.value.match(\"label\")) label = pstmt.object.value;\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      }\n*/\n      let i = this.fileInfo(url);\n      if(i && label)\n        dom.querySelector('#'+label).appendChild( await this.show(i.contentType,url) );\n    }\n    dom = XS.serializeToString(dom);    \n    if(targetSelector) await this.showIframeSrcDoc(dom,targetSelector);\n    return dom;\n/*\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = this.getUIterm(subject,'template');\n    let x = this.getUIterm(subject,'template');\nalert(x)\n    let parts =  this.getUIterm(subject,'parts');\n    for(let p of parts){\n      let component = \"\";\n      let label, url;\n      for(let pstmt of p){\n        if(pstmt.predicate.value.match(\"label\")) label = pstmt.object.value;\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      }\n      let type = this.findType(url);\n      div.querySelector('#'+label).appendChild( await this.show(type,url) );\n    }\n    if(targetSelector) await this.showIframeSrcDoc(div.innerHTML,targetSelector);\n    return div;\n*/\n  },\n  rdf : async (uri,string,targetSelector,forceReload,obj) => {\n    try {\n      let mainSubject = UI.rdf.sym( uri.match(/\\#/) ?uri :uri+\"#this\" );\n      let node = mainSubject;\n      await this.crossLoad(uri,string,forceReload);\n      let subjectType = this.getUItype(mainSubject);\n      if(subjectType && this._show[subjectType]) {\n        return await this._show[subjectType](mainSubject,targetSelector,forceReload);\n      }\n      else {\n        return await this._show.SolidOSLink(UI.rdf.sym(uri),targetSelector,forceReload,obj);\n      }\n      let subjects = UI.store.each(null,null,null,node.doc());\n      let visitedSubject = {}\n      let str = \"\";\n      for(let subject of subjects){\n        if(visitedSubject[subject.value]===1) continue;\n        visitedSubject[subject.value]=1;\n        str += `<br><div style=\"font-weight:bold\">${this.mungeLabel(subject)}</div>`;\n        let stmts = UI.store.match(subject,null,null,node.doc());\n        for(let stmt of stmts){\n          let p = this.mungeLabel(stmt.predicate);\n          let o = stmt.object.value;\n          str += `&nbsp;&nbsp;&nbsp;<b>${p}</b> : ${o}<br />`\n        }\n      }\n      if(targetSelector) {\n        return this.showIframeSrcDoc(str,targetSelector);\n      }\n      let div = document.createElement(\"DIV\");\n      div.innerHTML = str;\n      div.style.width=\"640px;\";\n      return div;\n    } catch(e) { alert(e); return e; }\n  },\n}\n\nmungeHash(uri){\n  return UI.rdf.sym( uri.match(/\\#/) ?uri :uri+\"#this\" );\n}\nasync dataTemplate2Iframe(mainSubject,targetSelector){\n  let query =  this.getUIterm(mainSubject,'query');\n  let endpoint =  this.getUIterm(mainSubject,'endpoint');\n  let template = this.getUIterm(mainSubject,'template');\n  let data = await (new Sparql()).sparqlQuery(endpoint,query,UI.store);\n  let interpolated = \"\";\n  for(let row of data.reverse()){\n    interpolated += template.interpolate(row);\n  }\n  this.showIframeSrcDoc(interpolated,targetSelector);\n  return interpolated;\n}\nasync template2Iframe(mainSubject,targetSelector){\n       let queryURL =  this.getUIterm(mainSubject,'query');\n        await UI.store.fetcher.load(queryURL);\n        let querySubject = UI.rdf.sym(queryURL+\"#this\");\n        let endpoint =  this.getUIterm(querySubject,'endpoint');\n        let query =  this.getUIterm(querySubject,'query');\n        let before =  this.getUIterm(mainSubject,'before');\n        let beforeQueryURL =  this.getUIterm(mainSubject,'beforeQuery');\n        await UI.store.fetcher.load(beforeQueryURL)\n        let beforeQuerySubject = UI.rdf.sym(beforeQueryURL+\"#this\");\n        let beforeEndpoint=this.getUIterm(beforeQuerySubject,'endpoint');\n        let beforeQuery=this.getUIterm(beforeQuerySubject,'query');\n        let beforeData = await (new Sparql()).sparqlQuery(beforeEndpoint,beforeQuery,UI.store);\n        before = before.interpolate(beforeData[0])\n        let data = await (new Sparql()).sparqlQuery(endpoint,query,UI.store);\n        let recurring =  this.getUIterm(mainSubject,'recurring');\n        let after =  this.getUIterm(mainSubject,'after');\n        let middle = \"\";\n        for(let row of data.reverse()){\n          middle += recurring.interpolate(row);\n        }\n        let interpolated = before + middle + after;\n        this.showIframeSrcDoc(interpolated,targetSelector);\n        return interpolated;\n}\nmakeIframe(){\n  let iframe = document.createElement('IFRAME');\n  iframe.style = \"height:100%;width:100%;border:none\";\n  return iframe;\n}\nshow_iframe(iframe,targetSelector){\n  document.querySelector(targetSelector).innerHTML=\"\";\n  document.querySelector(targetSelector).appendChild(iframe);\n}\nshowIframeSrc(src,targetSelector){\n  let iframe = this.makeIframe();\n  iframe.src = src;\n  if(targetSelector) this.show_iframe(iframe,targetSelector);\n  else return iframe;\n}\nshowIframeSrcDoc(string,targetSelector){\n  let iframe = this.makeIframe();\n  iframe.srcdoc = string;\n  this.show_iframe(iframe,targetSelector);\n}\n\n  /* makeSelector(options,onchange,selected,targetSelector,size,)\n       options : array\n       onchange : function\n       selected : string,      // must be in options array\n       targetSelector : string // = a css selector e.g. \"#foo .bar\"\n     returns an HTML select element\n   */\n  makeSelector(options,onchange,selected,targetSelector,size){\n    let selectEl = document.createElement('SELECT');\n    for(let option of options){\n      let value,label;\n      if(typeof option===\"string\") value = label = option;\n      else {\n        value = option[0]\n        label = option[1]\n      }\n      label=(label||value).replace(/^http:\\/\\//,'').replace(/^https:\\/\\//,'');\n      if(!label.endsWith(\"/\"))\n         label = label.replace(/.*\\//,'')\n      if(!label || !option) continue;\n      label ||= \"/\";\n      let optionEl = document.createElement('OPTION');\n//      optionEl.innerHTML = option.replace(/http[s]*:\\/\\/[^\\/]*\\//,'') || option;\n      optionEl.value = optionEl.title = value;\n      optionEl.innerHTML = label;\n      selectEl.appendChild(optionEl);\n    }\n\n    /* HIGHLIGHT SELECTED */\n    if(selected) selectEl.value = selected;\n    selectEl.value ||= selectEl.childNodes[0].value;\n\n//    selectEl.addEventListener('click',async(e)=>{\n//      onchange(e.target.value)\n//    })\n    selectEl.addEventListener('change',async(e)=>{\n      onchange(e.target.value)\n    })\n    if(size) selectEl.size=size;\n    if(targetSelector) {\n      let targetEl = document.querySelector(targetSelector)\n      targetEl.innerHTML = \"\"\n      targetEl.appendChild(selectEl);\n    }\n    return selectEl;\n  }\n  getParent(url){\n    let parent = url.replace(/\\/$/,'').replace(/\\/[^\\/]*$/,'/');\n    return parent;\n  }\n  fileInfo(url){\n    if(!url) return;\n    if(typeof url!=\"string\") url = url.url || url.uri;\n    let newu;\n    try{ newu = new URL(url); }\n    catch(e){console.log(77,url,e); return {} };\n    let file = newu.pathname.replace(/.*\\//,'').replace(/\\.[^\\.]*$/,'');;\n    file = file===newu ?\"\" :file;\n    let ext = newu.pathname.replace(/.*\\//,'').replace(/.*\\./,'');\n    ext = ext===file ?\"\" :ext;\n    /*\n     * type is  the Ace-Editor type e.g. turtle, html, markdown\n     * contentType is Iana media type e.g. text/turtle, etc.\n    */\n    let type,contentType;\n    if(ext.match(/(md)|(markdown)/)) type = \"markdown\";\n    if(ext.match(/(dot|gv)/)) type = \"graphviz\";\n    if(ext.match(/(ttl|rdf|n3)/)) type = \"rdf\";\n    if(ext.match(/txt/)) { type=\"text\"; contentType=\"text/plain\" }\n    if(ext.match(/(html)|(css)|(js)/)) type = ext;\n    if(ext.match(/(gif|jpg|jpeg)/)) type = ext;\n    type ||= \"unknown\";\n    let path = newu.pathname.replace(/[^\\/]*$/,'');\n    file = decodeURI(file);\n    let isContainer = !file && path.endsWith(\"/\");\n    contentType = \"unknown\";    \n    if(isContainer) contentType = \"text/turtle\";\n    else if(window.mime) contentType = window.mime.getType(url);\n    let editable = contentType && !contentType.match(/(image|video|audio|unknown)/);\n    return {\n      url,\n      file,\n      path,\n      ext,\n      label : (file||path) + (ext ?\".\"+ext :\"\"),\n      editable,\n      type,         // markdown, graphviz, html, rdf ...\n      contentType,  // text/vnd.graphviz, text/turtle ...\n      host : newu.origin + \"/\",\n      isHidden : url.match(/\\/\\./) ?true :false,\n      isContainer,\n    }\n  }\n\n\nasync crossLoad(uri,string,forceReload){\n  if(forceReload) {\n//     UI.store.removeDocument(UI.rdf.sym(uri));\n  }\n  if(string) UI.rdf.parse(string,UI.store,uri,'text/turtle');\n  else await UI.store.fetcher.load(uri);\n  let i = this.fileInfo(uri);\n  i.contentType = \"text/turtle\";\n  i.type = \"rdf\";\n  i.editable = true;\n  return i;\n} \nasync loadFile(uri){\n  let fileInfo = this.fileInfo(uri);\n  try {\n     let response = await UI.store.fetcher.webOperation(\"GET\",uri);\n     if(response.ok) {\n       fileInfo.contentType = response.headers.get(\"Content-Type\");\n       fileInfo.editable = !fileInfo.contentType.match(/(image|video|audio|pdf|unknown)/);\n       fileInfo.body = response.responseText;\n       fileInfo.ok=response.ok\n     }\n     else alert(response.status)\n     return fileInfo\n  }\n  catch(e) { alert(e); return fileInfo }\n}\n\ngetUItype(subject){\n  subject = this.getMainSubject(subject);\n  let types = UI.store.each(subject,this.ISA,null);\n  for(let type of types){\n    if(type.value.match(/ui\\#/)) return type.value.replace(/.*\\#/,'');\n  }\n}\ngetUIterm(subject,term){\n   subject = this.getMainSubject(subject);\n   let val = UI.store.each(subject,this.UIO(term));\n   let newval = [];\n   if(val && val[0] && val[0].termType===\"Collection\"){\n     for(let e of val[0].elements){\n        newval.push( UI.store.match(e) );\n     }\n     return newval;\n   }\n   return val[0] ?val[0].value :val;\n}\ngetMainSubject(uri){\n  uri = uri.uri ?uri.uri :uri;\n  uri = uri.match(/\\#/) ?uri :uri+\"#this\";\n  try { return UI.rdf.sym(uri) }\n  catch(e){console.log(e)}\n}\nmungeLabel = (label)=>{ \n if(!label)return \"\";\n if(label.termType===\"Literal\"){\n    return `\"${label}\"`;\n  }\n  label = label.value.replace(/.*\\#/,'').replace(/.*\\//,'');\n  if(label===\"type\") label = \"a\";\n  return label;\n}\nmungeURL = (url)=>{\n  let URL = document.getElementById(url).value;\n  if(!URL.startsWith('http')){\n    URL = window.location.href.replace('index.html','')+URL;\n  }\n  return URL;\n}\nPUT = async (url,content,cType)=>{\n  url = url.replace(/\\#[^\\#]*$/,'')\n  try {\n    let response = await UI.store.fetcher.webOperation('PUT',url,{\n      contentType : cType,\n      body: content,\n    });\n    return(response);\n  }\n  catch(e) {return e;}\n}\n}\n\n/* https://stackoverflow.com/a/41015840/15781258\n * usage :\n *   const template = 'Hello ${var1}!';\n *   const data     = { var1: 'world'};\n *   const interpolated = template.interpolate(data);\n */\nString.prototype.interpolate = function(params) {\n  const names = Object.keys(params);\n  const vals = Object.values(params);\n  return new Function(...names, `return \\`${this}\\`;`)(...vals);\n}\n","import {CU} from    '../utils.js';\n\n/*\n *  myFeed = new Feed(solidUI,feedUri)\n *\n *  feedSelector()\n *  htmlDiv = feed.items2list() which calls feed.fetchAndParse()\n\nproxy\nhref || link\ndisplayType\nstandAlone\nlabel\n  selBackground\n  selColor\n  height\n  width\n\n */\n\n/*\n\n      \n*/\n\nexport class Feed {\n\nasync makeFeedSelector(topTopic,targetSelector,displayArea){\n  self = this;\n  self.displayArea = displayArea;\n\n  const u = new CU();\n  const bookm = UI.rdf.Namespace(\"http://www.w3.org/2002/01/bookmark#\");\n  const rdfs = UI.rdf.Namespace(\"http://www.w3.org/2000/01/rdf-schema#\");\n  let targetElement = document.body;\n\n  await u.crossLoad(topTopic);\n  topTopic = UI.rdf.sym(topTopic);\n  let topicNodes = UI.store.each(null,bookm('subTopicOf'),topTopic)\n  let topics = [];\n  for(let n of topicNodes){\n     topics.push([n.value, UI.store.any(n,rdfs('label')).value]);\n  }\n  let onchange = async(e)=>{await collectionSelector(e)};\n  let topicSelector = u.makeSelector(topics,onchange,null,null,3);\n  topicSelector.id=\"topicSelector\";\n  if(targetSelector){\n    targetElement = typeof targetSelector===\"string\" ?document.querySelector(targetSelector) :targetSelector;\n    targetElement.innerHTML=\"\";\n    let c = u.newElement('DIV','collectionHolder') ;\n    let i = u.newElement('DIV','itemSelector') ;\n    targetElement.appendChild(topicSelector);\n    targetElement.appendChild(c);\n    targetElement.appendChild(i);\n    await collectionSelector(topics[0][0],targetElement);\n  }\n  let selectors = targetElement.querySelectorAll('#feedMenu select')\n  for(let s of selectors){\n    s.style=\"display:block; width:100%;  padding:0.5rem; margin-bottom:1rem; border-radious:0.02rem;\";\n  }\n//  return topicSelector;\n\n  async function collectionSelector(topTopic,targetElement){\n    if(typeof topTopic === \"string\") topTopic = UI.rdf.sym(topTopic);\n    await u.crossLoad(topTopic);\n    let topicNodes = UI.store.each(null,bookm('hasTopic'),topTopic)\n    let collections = [];\n    for(let n of topicNodes){\n       let href = UI.store.any(n,bookm('recalls')).value;\n       let label = UI.store.any(n,rdfs('label')).value;\n       collections.push([href,label]);\n    }\n    let onchange = async(e)=>{\n       await itemSelector(e)\n    };\n    let colSelector = await u.makeSelector(collections,onchange,null,null,7);\n    colSelector.id=\"collectionSelector\";\n    let el = (targetElement||document).querySelector('#collectionHolder');\n    el.innerHTML=\"\";\n    el.appendChild(colSelector);\n    let selectors = el.querySelectorAll('#feedMenu select')\n    for(let s of selectors){\n      s.style=\"display:block; width:100%;  padding:0.5rem; margin-bottom:1rem; border-radious:0.02rem;\";\n    }\n    await itemSelector(collections[0][0]);\n  }\n\n  async function itemSelector(topTopic){\n    let elm = document.getElementById('itemSelector');\n    elm.innerHTML=\"\";\n    elm.appendChild( await self.items2list({href:topTopic})  );\n\n  }\n\n}\n\n  async fetchAndParse(feedUri,proxy){\n\n    // fetch feed URI & parse into a Dom structure\n    //\n    proxy = typeof proxy===\"undefined\" ?\"https://solidcommunity.net/proxy?uri=\" :proxy;\n    feedUri = proxy + encodeURI( feedUri );\n\n    let response = await fetch( feedUri )\n    let feedContent = await response.text();\n    const domParser = new window.DOMParser();\n    let feedDom = domParser.parseFromString(feedContent, \"text/xml\")\n\n    // find items (RSS) or entries (Atom)\n    //\n    let items = feedDom.querySelectorAll(\"item\") || null;\n    items = items.length<1 ?feedDom.querySelectorAll(\"entry\") :items;\n\n    // parse items\n    //\n    let parsedItems=[];\n    items.forEach( el => {\n\n      // find item link, account for specific kinds of quirks\n      //\n      let link = el.querySelector(\"link\").innerHTML;\n      // vox\n      if(!link) link = el.querySelector('link').getAttribute('href');\n      // reddit\n      if(!link || link.match(/ /)){\n        link = el.querySelector('content').innerHTML.replace(/.*\\[link\\]/ ,'').replace(/a href=\"/,'').replace(/\"&gt;.*/,'').replace(/.*&lt;/,'');\n      }\n      // engadget\n      if(!link.match(/^http/)) link = link.replace(/.*\\[CDATA\\[/,'').replace(/\\]\\]\\>$/,'');\n\n      // always use https, not http\n      link = link.replace(/^http:/,'https:');\n\n      // get the title\n      let title = el.querySelector(\"title\").innerHTML;\n      title = title.replace(/^\\<\\!\\[CDATA\\[/,'');\n      title = title.replace(/\\]\\].*\\>/,'').trim();\n\n      parsedItems.push({title,link});\n    });\n    return parsedItems;\n  }  // END OF fetchAndParse()\n\n\n  async items2list(json,solidUI){\n\n    let elm = document.getElementById('itemSelector');\n    elm.innerHTML=\"\";\n    json.proxy ||= \"https://solidcommunity.net/proxy?uri=\";\n    let items = \"\";\n    let externalLinkIcon = UI.icons.iconBase+`/noun_189137.svg`;\n    externalLinkIcon = `<img src=\"${externalLinkIcon}\" style=\"width:1em;height:1em;display:inline-block; padding-left:0.4em;opacity:1\">`;\n    for(let i of await this.fetchAndParse((json.href||json.link),json.proxy)){\n      if(json.displayTarget===\"window\"){\n/*\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\">\n            <a href=\"${i.link}\" target=\"_BLANK\" property=\"rss:title\">\n              ${i.title}\n            </a>\n          </li>\n        `;\n*/\n      }\n      else {\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\" style=\"display:none;background:green;border:1px solid grey;\">\n            <a href=\"${json.proxy+i.link}\" target=\"#display\" property=\"rss:title\" style=\"background:#999;display:inline-block\">\n               ${i.title}\n            </a>\n            <a href=\"${i.link}\" class=\"skipMunge\" target=\"_BLANK\" class=\"external\">${externalLinkIcon}</a>\n          </li>\n        `;\n      }\n    }\n    const wrapper = document.createElement('DIV');\n    wrapper.property = \"xmlns:rss\";\n    wrapper.content = \"http://purl.org/rss/1.0/\";\n    if(json.standAlone) {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n          <b property=\"rss:title\">${json.label}</b>\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n\n    wrapper.querySelector('B').style=`padding:1em;padding-right:0;background:${json.selBackground};color:${json.selColor};border:1px solid grey;width:100%;display:inline-block`;\n    }\n    else {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n<!--          <div property=\"title\" style=\"background:#d0d0d0;padding:1em;\">${json.label}</div>-->\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n    wrapper.querySelector('UL').style=`padding:0;padding-left:0;list-style:none;margin-top:0;width:100%;`;\n    }\n    wrapper.querySelector('UL').style=`padding:0;border:1px solid grey;list-style:none;margin-top:0;width:100%;height:${json.height};overflow-y:auto;`;\n    let anchors = wrapper.querySelectorAll('A');\n    for(let anchor of anchors){\n      anchor.style=\"text-decoration:none;\"\n      anchor.onclick = async (e) => {\n        if(e.target.parentNode.classList.contains('skipMunge')) return;\n        e.preventDefault();\n        let iframe = document.createElement('IFRAME');\n        iframe.style=\"height:100%;width:100%;border:none\";\n        let  uri = e.target.href\n        let r = await window.fetch(uri);\n        let content = await r.text();        \n        content = content.replace(/X-Frame-Options/g,'');\n        uri = uri.replace(/^.*proxy\\?uri=/,'');\n        uri = new URL(uri);\n        const b = `<base href=\"${uri.origin}/\"><base target=\"_BLANK\"><style>body{background:white !important}</style>`;\n        iframe.srcdoc = `<body>${b}${content}</body>`\n        iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n        let area = document.querySelector(self.displayArea);\n        area.innerHTML = \"\";\n        area.appendChild(iframe);        \n      }\n    }\n    let listItems = wrapper.querySelectorAll('LI');\n    for(let li of listItems){\n      li.style=\"padding:0.5em;border-bottom:1px solid grey\";\n    }\n    if(json.width) wrapper.style.width = json.width;\n    return wrapper;\n  }\n}\n\n  async function initFeeds(){\n    let elms = document.querySelectorAll('[data-suicFeedMenu]');\n    for(let e of elms){\n      let topTopic = e.dataset.suicfeedmenu;\n      if(topTopic.startsWith('/')) topTopic = window.origin + topTopic;\n      let displayArea = e.dataset.display;\n      let menuArea = '#' + e.id;\n      const myFeed = new Feed();\n      await myFeed.makeFeedSelector(topTopic,menuArea,displayArea);\n    }\n  }\n  initFeeds();\n","export class Accordion {\n  async render(solidUI,json) {\n    const parts = json.parts;\n    const accordion = solidUI.createElement('DIV','accordion');\n    if(!parts || !parts.length) return accordion;\n    for(let row of parts){\n       let item = solidUI.createElement( 'DIV' );\n       let rowhead = solidUI.createElement( 'DIV','' );\n       let name = solidUI.createElement('SPAN','',row.label || row.topic) ;\n       name.style.display=\"table-cell\";\n       name.style.width=\"100%\";\n       rowhead.appendChild(name);\n       let caret = solidUI.createElement('SPAN','caret-down','\\u2304') ;       \n       caret.style.display=\"table-cell\";\n       caret.textAlign=\"right\";\n       rowhead.appendChild(caret);\n       rowhead.style.backgroundColor = json.unselBackground;\n       rowhead.style.color = json.unselColor;\n       rowhead.style.padding=\"0.75em\";\n       rowhead.style.border=\"1px solid grey\";\n       rowhead.style.cursor = \"pointer\";\n       let rowContent = solidUI.createElement( 'DIV');\n       if(row.content) rowContent.innerHTML = row.content;\n       else {\n        console.log(json)\n        for(let i=0;i<row.linkLabel.length;i++){\n          let label = row.linkLabel[i];\n          let link = row.linkUrl[i];\n          let button=solidUI.createElement('BUTTON','',label);\n          button.setAttribute('data-link',link) ;\n          button.style.width=\"100%\";\n          button.style.border=\"none\";\n          button.style.background=\"transparent\";\n          button.style.marginBottom=\"0.25em\";\n          button.style.cursor=\"pointer\";\n          button.onclick = (e) => {\n            showByClass(e);\n          }\n          rowContent.appendChild(button);\n        }\n       }\n       rowContent.style.padding=\"0.75em\";\n       rowContent.style.border=\"1px solid grey\";\n       rowContent.style.borderTop=\"none\"; \n       rowContent.style.display = \"none\";\n       rowhead.onclick = (e)=>{\n         let showing = rowContent.style.display === \"block\" ;\n         let items = accordion.children;\n         for(let i of items) {\n           i.children[1].style.display=\"none\";\n         }\n         rowContent.style.display = showing ?\"none\" :\"block\";\n       }\n       rowContent.style.backgroundColor = json.background;\n       rowContent.style.color = json.color;\n       item.appendChild(rowhead);\n       item.appendChild(rowContent);\n       item.style.marginBottom = \"1em\";\n       accordion.appendChild(item);\n    }\n    solidUI.simulateClick(accordion.querySelector('DIV DIV DIV'))\n    return await solidUI.initInternal(accordion);  \n  }\n}\n","import {createLoginBox,applyProfile} from '../databrowser.js';\n\nexport class App {\n  async render(solidUI,app){\n\n    // GET/SET DEFAULTS\n    //\n    app = solidUI.setDefaults(app);\n    if(app.fullPage){\n      window.addEventListener('resize',()=>{\n         app = mainHeight(app);\n         let mm = document.getElementById('mainMain')\n         let tab = document.getElementById('suicTabulator')\n         if(mm) mm.style.height = app.mainHeight;\n         if(tab) tab.style.height = app.mainHeight;\n      });\n      document.body.style.overflow=\"hidden\";\n    }\n\n    // FIND NUMBER OF PIXELS IN 1 REM - VARIES WITH BROWSER/USER SETTINGS\n    function rem2px(){\n      let el = document.createElement('DIV');\n      el.style=\"height:1rem\";\n      document.body.appendChild(el);\n      let remSize = el.clientHeight;\n      document.body.removeChild(el);\n      return(remSize);\n    }\n    // SET BODY HEIGHT TO WINDOW HIEGHT MINUS HEADER + MENU \n    function mainHeight(app){\n      let rem = rem2px();\n      app.menuHeight = 2*rem;\n      app.headerHeight = 6*rem;\n      window.SolidAppContext = { scroll : app.headerHeight }\n      app.mainHeight = ( window.innerHeight-app.headerHeight )\n      app.headerHeight = app.headerHeight.toString()+'px';\n      app.mainHeight = app.mainHeight.toString()+'px';\n      return app;\n    }\n    app = mainHeight(app);\n\n    // DISPLAY HEADER IF app.logo OR app.title\n    //\n    app.logo ||= \"\";\n    app.title ||= \"\";\n    app.headerHeight = ( app.logo || app.title || app.adminMenu ) ?app.headerHeight : \"0\";\n\n    // DISPLAY MENU AT TOP OR LEFT DEPENDING ON app.orientation\n    //\n    app.leftMenu = \"\" ;\n    app.siteMenu = \"\" ;\n    if(app.orientation===\"horizontal\"){\n      app.leftMenuStyle = \"display:none\";\n    }\n    else {\n      app.leftMenuStyle = `\n        display:block;\n        width:36vw !important;\n        height:${app.mainHeight};\n        overflow-y:scroll;\n        margin:0;\n        padding:0;\n      `;\n    }\n\n    let appString = await this.getHTML(app);\n    let element = solidUI.createElement('SPAN','',appString);\n    let solidLogo = element.querySelector('#solidLogo')\n    if(solidLogo) solidLogo.src = 'https://solidproject.org/assets/img/solid-emblem.svg';\n\n//    if(typeof app.currentPodMenu==='object')app.currentPodMenu.target = element.querySelector('.main');\n    let menuElement = element.querySelector(\"#currentPodMenu\");\n    if( app.orientation===\"vertical\"){\n      menuElement = element.querySelector(\"NAV\");\n    }\n    const menu = await solidUI.processComponent(menuElement,app.currentPodMenu);\n    if(menu && menuElement) menuElement.appendChild(menu);\n    if(app.userMenu) {\n      const amenu = await solidUI.processComponent(menuElement,app.userMenu);\n      let umenu = element.querySelector('#userMenu')\n      if( umenu) umenu.appendChild(amenu);\n    }\n    if(app.loginBox) await createLoginBox(element);\n    await applyProfile(element); // munge site menu\n    if(app.initialContent) {\n      let content = await solidUI.getComponentHash(app.initialContent);\n      content = content.content.interpolate(solidUI.vars)\n      let main = element.querySelector('#mainMain');\n      if(main) main.innerHTML = content;\n    }\n    return element;\n  }\n\nrem2vw(rem) {\n  const viewportWithoutScroll = document.body.clientWidth;\n  const pxPerVw = 100/viewportWithoutScroll;\n  return( rem * pxPerVw);  \n}\nrem2vh(rem) {\n  const viewportWithoutScroll = window.innerHeight;\n  const pxPerVw = 100/viewportWithoutScroll;\n  return( rem * 16 * pxPerVw);  \n}\n  async getHTML(app){ \n     app.leftColumnColumnStyle ||= \"display:none\";\n     app.leftColumnColumnMenu ||= \"\";\n     app.siteMenu ||= \"\";\n     app.leftColumnColumnStyle ||= \"\";\n     app.iframeSrc ||= \"\";\n     app.iframeContent ||= \"\";\n     app.logoStyle = `\n             height: 3rem;\n            display: inline-block;\n       padding-left: 0.5rem;\n     `;\n     app.titleStyle = `\n       display:inline-block;\n       vertical-align:top; align:left;\n       font-size: 2rem;\n       padding-top: 0.4rem;\n       padding-left:1rem;\"\n     `;\n     app.appStye = `\n              display: flex;\n       flex-direction: column;\n                width: 100%;\n               height: 100%;\n     `;\n      app.mainStyle = `\n        padding:0rem;\n        width:100%;\n        overflow:scroll;\n        position:absolute;\n        top:${app.headerHeight} !important;\n        left:0;\n        height:${app.mainHeight};\n     `;\n     if(app.theme) {\n        try {      \n//          let response = await panes.UI.store.fetcher.webOperation('GET',app.theme);\n          let response = await window.fetch(app.theme);\n          let content = await response.text();\n          content = solidUI.fillTemplate(content,[app]);\n          return await content;\n        }\n        catch(e){console.log(e)}\n     }\nreturn \"\";\n     return `\n<!--APP-->\n<div class=\"solid-uic-app solid-main-app\">\n\n    <!--BANNER-->\n    <div class=\"app-banner\">\n\n        <!--USER IMAGE & NAME-->  \n        <img id=\"currentPodLogo\" src=\"\">\n        <div id=\"currentPodTitle\"></div>\n\n\n        <!--ADMIN MENU, LOGIN, SOLID LOGO-->\n        <div style=\"background:${app.unselBackground};text-align:center;position:absolute;top:0.5rem;right:7rem;\"><span id=\"adminMenu\" style=\"white-space: nowrap;\"></span> </div>\n        <div id=\"loginArea\"></div>\n        <img src=\"${app.logo}\" style=\"height:7rem;position:absolute;top:-0.5rem;right:-0.5rem\">\n\n        <!--PUBLIC MENU-->\n        <div id=\"currentPodMenu\" style=\"white-space:nowrap;position:absolute;top:3rem;left:7.4rem;\">${app.siteMenu}</div>\n\n    </div><!--BANNER-->\n\n    <!--MAIN WRAPPER-->\n<!--    <div style=\"display:flex;flex-direction:row;width:100%;height:100%;\"> -->\n    <div style=\"width:100%;height:100%;min-height:0;\">\n\n        <!-- LEFT COLUMN MENU (IF EXISTS) -->\n        <div class=\"leftColumn\" style=\"${app.leftMenuStyle}\">${app.leftMenu}</div>\n\n        <!--MAIN MAIN-->\n        <div id=\"mainMain\" style=\"min-height:0;${app.mainStyle}\"></div>\n\n        <!--MAIN TABULATOR-->\n            <div class=\"TabulatorOutline\" role=\"main\" id=\"suicTabulator\" style=\"${app.mainStyle}\">\n                <table id=\"outline\"></table>\n                <div id=\"GlobalDashboard\"></div>\n            </div>\n\n    </div><!--MAIN WRAPPER-->\n\n</div><!--APP-->\n<style>\n  #suicTabulator{\n    top:${app.headerHeight} !important;\n    overflow:scroll !important;\n    min-height: 0; \n  }\n  #suicTabulator table {\n    background:#7e7e7e !important;\n    color:white !important;\n  }\n  .solid-main-app {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n  }\n  .solid-main-app .app-banner {\n     width:100%;\n     display:flex;\n     background:${app.unselBackground};\n     color:black;\n  }\n  .solid-main-app input[type=\"button\"]:hover {\n    background:${app.selBackground};\n    color:${app.selColor};\n  }\n  .solid-main-app #currentPodTitle {\n    left:8rem;\n    font-size:1.3rem;\n    position:absolute;\n    top:1rem;\n  }\n  .solid-main-app #currentPodLogo {\n    height:${app.headerHeight}\n  }\n</style>\n\n    `;\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","export class Menu {\n\n  async render( solidUI, json,element ){\n    if(typeof json==='string'){\n      json = await solidUI.processComponent(element,json);\n    }\n    let nav     = solidUI.createElement('NAV','solid-uic-dropdown-menu')\n    let topUL   = document.createElement('UL')\n    let mainDisplay = document.createElement('DIV')\n//    nav.style.width=\"100%\";\n    nav.style.background=json.unselBackground;\n    nav.style.color=json.unselColor;\n//    nav.style.paddingLeft=\"1rem\";\n//    nav.style.paddingRight=\"1em\";\n//    topUL.style.width=\"100%\";\n    mainDisplay.style.width=\"100%\";\n    mainDisplay.style.backgroundColor = json.background;\n    mainDisplay.style.color = json.color;\n    mainDisplay.innerHTML=\"\";\n    mainDisplay.classList.add('main');\n    nav.appendChild(topUL)\n    for(var i of json.parts){\n      topUL.appendChild( await this.renderMenuItem(i,json,mainDisplay) )\n    }\n    const wrapper = solidUI.createElement('SPAN');\n    nav.style.display=\"inline-block\";\n    nav.style.textAlign=json.position;\n    topUL.style.textAlign=json.position;\n    wrapper.appendChild(nav);\n    wrapper.appendChild(mainDisplay);\n    return(wrapper);\n  }\n\n  async renderMenuItem(i,json,mainDisplay){\n    if(i.menu && i.menu.type && i.menu.type === \"SparqlQuery\"){\n      let menu = await solidUI.processComponent(null,null,i.menu);\n      if(typeof menu===\"object\") i.parts = menu\n    }\n    const li = document.createElement('LI')\n    const sp =  document.createElement('SPAN')\n    sp.innerHTML = i.label\n    li.appendChild(sp)\n    li.style.cursor=\"pointer\"\n    li.style.display=\"inline-block\";\n    li.style.backgroundColor = json.unselBackground;\n    li.style.color = json.unselColor;\n    li.onmouseover = ()=>{\n      li.style.backgroundColor = json.selBackground;\n      li.style.color = json.selColor;\n    } \n    li.onmouseout = ()=>{\n      li.style.backgroundColor = json.unselBackground;\n      li.style.color = json.unselColor;\n    } \n    if(i.popout || !i.parts){\n// i.target=json.target;\n      /*\n       *  <li class=\"item\"><span>${i.label}</span></li>\n       */\n      li.classList.add('item')\n      li.name = i.href\n      const self = this\n/*\n      li.addEventListener('click',(e)=>{\n        window.displayLink(e,i,mainDisplay)\n      })\nWe can't easily override the eventListener later so use onclick instead.\n*/\n      li.onclick = (e)=>{\n        i.href = e.target.parentElement.name;\n        window.displayLink(e,i,mainDisplay)\n      }\n    }\n    else {\n      /*\n        <li class=\"caret\">\n          <span class=\"caret\" style=\"cursor:pointer;\">${i.title}</span>\n          <ul class=\"nested\">\n          </ul>\n        </li>\n      */\n      li.classList.add('caret')\n      let ul2 = document.createElement('UL')\n      li.appendChild(ul2)\n      ul2.classList.add('nested')     \n      for(var m in i.parts){\n        let newItem = i.parts[m]\n        if(typeof newItem==='object') newItem.target=json.target;\n        ul2.appendChild( await this.renderMenuItem(newItem,json,mainDisplay) )\n      }\n    }\n    return li\n  }\n}\n","export class Modal {\n\n/*\n<#MyModal>\n  a ui:Modal ;\n  ui:label           \"BUTTON_LABEL\" ;\n  ui:unselColor      \"BUTTON_COLOR\" ;\n  ui:unselBackground \"BUTTON_BACKGROUND_COLOR\" ;\n  ui:width           \"POPUP-BOX_WIDTH\" .\n\nModal.render({\n  label             // button label\n  unselColor        // button color\n  unselBackground   // button background color\n  width             // popup-box width\n  height            // popup-box height\n  content           // popup-box content string\n  iframe            // popup-box url for iframe\n});\n*/\n\n  async render (o,solidUI) {\n    let dom = o.dom || document;\n    let modal = document.createElement('SPAN');\n    if(o.targetSelector){\n      modal = dom.querySelector(o.targetSelector);\n    }\n    const s = _getCSS(o);\n    if(o.iframe){\n      let iframe = document.createElement(\"IFRAME\");\n      o.content = `<iframe src=\"${o.iframe}\" style=\"width:100%;height:90%;border:none\"></iframe>`;\n    }\n    modal.innerHTML = `\n      <button style=\"${s['button']}\" onclick=\"window.openModal(this)\">\n        ${o.label}\n      </button>\n      <div style=\"${s['.modal']}\">\n        <div style=\"${s['.modal-content']}\">\n          <div style=\"${s['.close']}\" onclick=\"window.closeModal(this)\">\n            &times;\n          </div>\n          ${o.content}\n        </div>\n      </div>\n    `;\n    if(solidUI) return await solidUI.initInternal(modal);  \n    else return modal;\n    return modal;\n  }\n}\n  window.openModal = function (element,action){\n    element.parentElement.children[1].style.display = \"block\" ;\n  }\n  window.closeModal = function (element,action){\n    element.parentElement.parentElement.style.display = \"none\" ;\n  }\n\n  function _getCSS(current){\n    return {\n    \"button\": `\n      background-color:${current.unselBackground};\n      color:${current.unselColor};\n      cursor:pointer;\n    `,\n    \".modal\": `\n      display: none; /* Hidden by default */\n      position: fixed; /* Stay in place */\n      left: 0;\n      top: 0;\n      width: 100%; /* Full width */\n      overflow: auto; /* Enable scroll if needed */\n      background-color: rgb(0,0,0); /* Fallback color */\n      background-color: rgba(0,0,0,0.8); /* Black w/ opacity */\n      height: 100%; /* Full height */\n      z-index:20000;\n    `,\n    \".modal-content\": `\n      background-color: #fefefe;\n      margin: 5% auto; /* 15% from the top and centered */\n      padding: 1rem;\n      border: 1px solid #888;\n      border-radius:0.5rem;\n      width: ${current.width};\n      height: ${current.height};\n    `,\n    \".close\": `\n      color:red;\n      text-align:right;\n      margin-bottom: 0.25rem;\n      font-size: 2rem;\n      font-weight: bold;\n      cursor:pointer;\n    `\n    }\n  }\n","export class SelectorPanel {\n\n  render(j){\n    const wrapper = document.createElement('SPAN');\n    wrapper.classList.add('solid-ui-component');\n     wrapper.style=\"display:flex;flex-direction:row;width:100%;height:${j.height}\"\n    const leftColumn = document.createElement('DIV');\n    leftColumn.style=\"margin-top:0; width:30vw;height:91vh;margin-top:0; min-height:min-content\";\n    const rightColumn = document.createElement('DIV');\n    rightColumn.style=`flex-grow:1;height:{j.height};max-height:100vh;`;\n    rightColumn.classList.add('main');\nrightColumn.style.background=\"ffe\";\n    let collectionSelector = document.createElement('DIV');\n    collectionSelector.style = `width:30vw;border:1px solid grey;border-bottom:none`;\n    collectionSelector.style.background=j.unselBackground;\n    collectionSelector.style.color=j.unselColor;\n    j.parts ||= j.dataSource.parts;\n    const firstOption = j.label || (j.parts[0]).label || j.parts[0];\n    collectionSelector.innerHTML = `\n       <div style=\"border-bottom:1px solid grey; padding:0.5em;cursor:pointer;\">\n        <span style=\"display:table-cell;width:100%\">${firstOption}</span><span style=\"display:table-cell;font-size:large;width:100%;text-align:right;\"></span>\n       </div>\n    `;\n    let collectionsList = document.createElement('DIV');\n    collectionsList.style = `width:30vw;border:1px solid grey;border-top:none;display:none`;\n    collectionSelector.querySelector('div').onclick=()=>{\n      collectionsList.style.display||=\"block\";     \n      if(collectionsList.style.display===\"block\") collectionsList.style.display=\"none\";     \n      else collectionsList.style.display=\"block\";     \n    }\n    for(let p of j.parts){\n      collectionsList.innerHTML += `\n         <a href=\"${p.link}\" style=\"text-decoration:none;display:block;border-bottom:1px solid grey; padding:0.5em;\" data-link=\"${p.link}\" data-type=\"${p.type}\">\n          ${p.label}\n         </a>\n      `;\n    }\n    for(let anchor of collectionsList.querySelectorAll('A')){\n      anchor.onclick = (e)=>{\n         e.preventDefault();\n         let el = e.target;\n         let link = {href:el.href,type:el.dataset.type,target:rightColumn};\n         el.parentElement.style.display=\"none\";\n         collectionSelector.querySelector('DIV SPAN').innerHTML = el.innerHTML;\n         itemsList.style.display=\"block\";      \n         itemsList.style.width=\"30vw\";      \n         displayLink(null,link,itemsList);\n         return false;\n      }\n    }\n    let itemsList = document.createElement('DIV');\n    itemsList.style = `height:100%;border:1px solid grey;overflow-y:scroll;width:30vw;`;\n    leftColumn.appendChild(collectionSelector);\n    leftColumn.appendChild(collectionsList);\n    leftColumn.appendChild(itemsList);\n    wrapper.appendChild(leftColumn);\n    wrapper.appendChild(rightColumn);\n    return wrapper;\n  }\n\n}\n\n/*\nwrapper\n  leftColumn\n    collectionSelector\n    collectionsList\n    itemsList\n  rightColumn\n    displayArea\n*/\n\n  \n","export class Tabs {\n  async render(solidUI,json) {\n    const parts = json.parts\n    const tabs = solidUI.createElement('DIV','solid-uic-tabs');\n    if(json.style) tabs.style = json.style;\n    const nav = solidUI.createElement('NAV');\n    if(json.orientation===\"vertical\")\n      nav.style.textAlign = \"right\";\n    else\n      nav.style.textAlign = json.position;\n    let mainDisplay = solidUI.createElement( 'DIV' );\n    mainDisplay.style.backgroundColor = json.background;\n    mainDisplay.style.color = json.color;\n    let r = 0;    \n    for(let row of parts){\n      r++;\n      let rowhead = solidUI.createElement( 'BUTTON',r,row.label );\n      rowhead.style.backgroundColor = json.unselBackground;\n      rowhead.style.color = json.unselColor;\n      rowhead.style.padding=\"0.75em\";\n      rowhead.style.border=\"1px solid grey\";\n      rowhead.style.cursor = \"pointer\";\n      let rowContent = solidUI.createElement( 'DIV',r,row.content );\n      rowContent.style.padding=\"0.75em\";\n      if(json.orientation===\"horizontal\") rowContent.style.border=\"1px solid grey\";  \n      rowContent.style.display = \"none\";\n      if(row.type===\"SolidOSLink\"){\n        let id = `tab-${r}-outline`;\n        rowContent.innerHTML = `\n          <div class=\"TabulatorOutline\" id=\"${id}-tabulator\" role=\"main\">\n            <table id=\"${id}\"></table>\n            <div id=\"GlobalDashboard\"></div>\n          </div>\n        `;\n        let subject = window.kb.sym(row.href);\n        let targetArea = rowContent.querySelector('#'+id);\n        targetArea.style=\"display:table-row;background-color:c0c0c0\"\n        window.outliner.GotoSubject(subject,true,undefined,true,undefined,targetArea);\n      }\n      rowhead.onclick = (e)=>{\n        e.preventDefault();\n        let items = tabs.querySelector('DIV').children;\n        for(let i of items) {\n          i.style.display=\"none\";\n        }\n        for(let n of nav.children) {\n          n.style.backgroundColor=json.unselBackground;\n          n.style.color=json.unselColor;\n        }\n        rowhead.style.backgroundColor = json.selBackground;\n        rowhead.style.color = json.selColor;\n        rowContent.style.display = \"block\";\n      }\n      nav.appendChild(rowhead);\n      mainDisplay.appendChild(rowContent);\n    if(json.orientation===\"vertical\"){\n      rowhead.style.display=\"block\";\n      rowhead.style.marginBottom = \"0.5em\";\n      rowhead.style.width=\"100%\"\n      tabs.style.width=\"100%\";\n      tabs.style.height=\"100%\";\n      tabs.style.display = \"table-row\";\n      nav.style.display = \"table-cell\";\n      mainDisplay.style.display = \"table-cell\";\n      mainDisplay.style.display=\"block\"\n      mainDisplay.style.height = \"100%\";\n      rowContent.style.height = \"100%\";\n    }\n    else {\n      rowhead.style.marginRight = \"0.5em\";\n      rowhead.style.borderBottom = \"none\";\n    }\n  }\n    tabs.appendChild(nav);\n      const closeButton = document.createElement('SPAN');\n      closeButton.style = `\n        color:red;\n        text-align:right;\n        position:absolute;\n        top:0.25rem;\n        right:0.25rem;\n        font-size: 2rem;\n        font-weight: bold;\n        cursor:pointer\n      `;\n      closeButton.addEventListener('click',(e)=>{\n        e.preventDefault();\n        e.target.parentElement.style.display=\"none\";\n      });\n      closeButton.innerHTML = \"&times\";\n\n    tabs.appendChild(closeButton);\n    tabs.appendChild(mainDisplay);\n    solidUI.simulateClick(tabs.querySelector('BUTTON'))\n    return await solidUI.initInternal(tabs);  \n  }\n}\n","export class BookmarkTree {\n\n  constructor(){\n    this.store = UI.rdf.graph();\n    this.fetcher = UI.rdf.fetcher(this.store);\n  }\n  async init(){\n    for(let containerElm of document.getElementsByClassName('ocb')){\n      let subject = containerElm.dataset.component\n      this.bookmarksDisplay = containerElm.dataset.display\n      try {\n        subject = await this.loadUnlessLoaded(subject)\n        containerElm = containerElm.appendChild(document.createElement('UL') )\n        await this.getTopic(subject,containerElm,this.bookmarksDisplay,'start')\n        document.getElementById('ocbStart').click();\n      }\n      catch(e){ alert(e) }\n    }\n  }\n  async getTopic(topic,containingElement,bookmarksDisplay,start){\n    const self=this\n    if(typeof containingElement===\"string\") containingElement = document.querySelector(containingElement);\n    bookmarksDisplay ||= containingElement.dataset.display;\n    this.bookmarksDisplay ||= bookmarksDisplay;\n\n    let book = UI.rdf.Namespace(\"http://www.w3.org/2002/01/bookmark#\")\n    const rdf= UI.rdf.Namespace('http://www.w3.org/2000/01/rdf-schema#')\n    const rdfs=UI.rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#')\n    const ui=UI.rdf.Namespace('http://www.w3.org/ns/ui#');\n\n    topic = await this.loadUnlessLoaded(topic);\n    let topicTitle = this.store.any( topic, rdf('label'),null,topic.doc() )\n    topicTitle = (typeof topicTitle ===\"undefined\") ? \"???\" : topicTitle.value\n    let span = document.createElement('SPAN')\n    span.appendChild(document.createTextNode(topicTitle))\n    span.classList.add('caret')\n    span.addEventListener(\"click\", function() {\n      let elm = this.parentElement.querySelector(\".nested\")\n      if(elm) elm.classList.toggle(\"active\");\n      this.classList.toggle(\"caret-down\");\n    });\n    let li = document.createElement('LI')\n    if(start){\n      span.id = \"ocbStart\";\n//      containingElement.appendChild(span)\n    }\n//    else {\n      li.appendChild(span)\n      containingElement.appendChild(li)\n//    }\n    let subTopics  = this.store.each( null, book('subTopicOf'), topic )\n    if(subTopics.length>0){\n      let ul = document.createElement('UL')\n      ul.classList.add('nested')\n      li.appendChild(ul)\n      for(let t in subTopics){\n        this.getTopic(subTopics[t],ul)\n      }\n    }\n    else {\n      let bookmarks = this.store.each( null, book('hasTopic'), topic )\n      let ul2 = document.createElement('UL')\n      ul2.classList.add('nested')\n      for(let b in bookmarks){\n        let bookmark = bookmarks[b]\n        let  bookmarkTitle = this.store.any( bookmark, rdf('label'),null,topic.doc() )\n        let isFeed=(this.store.match(bookmark,rdfs('type'),ui('Feed'))).length;\n        bookmarkTitle = bookmarkTitle ? bookmarkTitle.value : \"???\"\n        let bookmarkLink  = this.store.any( bookmark, book('recalls'),null,topic.doc() )\n        let bookElement = document.createElement(\"LI\")\n        if(isFeed) bookElement.classList.add('caret')\n        else bookElement.classList.add('item')\n        if(isFeed){\n          bookElement.addEventListener(\"click\", async function() {\n            alert(\"Feed Me!\");\n          });\n        }\n        else {\n          bookElement.addEventListener(\"click\", async function() {\n            document.querySelector(self.bookmarksDisplay).innerHTML=`<iframe src=\"${bookmarkLink.uri}\"></iframe>`;\n          });\n        }\n        bookElement.appendChild(document.createTextNode(bookmarkTitle))\n        let d = document.createElement('DIV')\n        d.classList.add('closed')\n        bookElement.appendChild(d)\n        ul2.appendChild(bookElement)\n      }\n      li.appendChild(ul2)\n    }\n  }\n  async loadUnlessLoaded(subject){\n    try {\n      const base = document.location.href.replace(/\\/[^\\/]*$/,'/')\n      subject  = (typeof subject===\"string\") ? subject : subject.uri\n      subject = subject.match('//') ? subject : base + subject\n      subject  = UI.rdf.sym(subject)\n      if(subject.termType==='BlankNode') return subject\n      if(!this.store.any(null,null,null,subject.doc())) \n        await this.fetcher.load(subject)\n    }\n    catch(e) { alert(e) }\n    return subject\n  }\n}\n\n/*\nwindow.addEventListener('DOMContentLoaded', async (event) => {\n  const ocb = new BookmarkTree()\n  ocb.init()\n})\n*/\n","  /* containerSelector\n       url\n       targetSelector\n       resourceOnChange\n       collectionSize\n       resourceSize\n  */\n  export async function containerSelector(json){\n    let url = json.dataSource;\n    let targetSelector = json.contentArea;\n    let collectionSize = json.collectionSize || 6;\n    let resourceSize = json.resourceSize || 12;\n    let resourceOnchange = async (e)=>{await solidUI.showPage(e,json)};\n    const ldp = UI.rdf.Namespace(\"http://www.w3.org/ns/ldp#\");\n    if(!url) return \"\";\n    let container = url.replace(/\\/[^\\/]*$/,'/'); // in case we get passed a resource\n    let host = _host(container);\n    const base = UI.rdf.sym(container);\n    await UI.store.fetcher.load(base);\n    let files = UI.store.each(base,ldp(\"contains\"),null,base);\n    let resources = [];\n    let containers=[];\n    containers.push({value:base.uri,label:_pathname(base.uri)});\n    for(let file of files.sort()){\n      let name = file.value\n      let contentType=_findContentType(file);\n      if( _isHidden(name) ) continue; \n      if(name.endsWith('/')) containers.push({value:name,label:_pathname(name),contentType});\n      else resources.push({value:name,label:_pathname(name),contentType});\n    }\n    let parent = base.uri.replace(/\\/$/,'').replace(/\\/[^\\/]*$/,'/');\n    if(parent) {\n      if(!parent.endsWith(\"//\")) {\n        containers.splice(1,0,{value:parent,label:\"../\"});\n      }\n    }\n    let x = ()=>{};\n    let hostEl = document.createElement('DIV');\n    hostEl.innerHTML = host;\n    let containerOnchange = async (selectorElement)=>{\n       let newContainer = selectorElement.value;\n       json.dataSource = newContainer;\n       return await containerSelector(json);\n    };\n    containers = await selector(containers,containerOnchange,url,null,collectionSize)\n    resources =  await selector(resources,resourceOnchange,url,null,resourceSize)\n    containers.classList = [\"containerSelector\"];\n    if(resources) resources.classList = [\"resourceSelector\"];\n    if(targetSelector && typeof targetSelector===\"string\") targetSelector = document.querySelector(targetSelector);\n    let div = targetSelector ?targetSelector :document.createElement('DIV');\n    div.innerHTML = \"\";\n    div.appendChild(hostEl);    \n    div.appendChild(containers);    \n    div.appendChild(resources);    \n    return div;\n  }\n\n  function _findContentType(fileNode){\n    const isa = UI.rdf.sym(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\");\n    let types = UI.store.each(fileNode,isa).map((s)=>{return s.value});\n    for(let type of types){\n      if(type.match(/http:\\/\\/www.w3.org\\/ns\\/iana\\/media-types/))\n       return type.replace(/http:\\/\\/www.w3.org\\/ns\\/iana\\/media-types\\//,'').replace(/\\#Resource/,'');\n    }\n  }\n\n  function _isHidden(path){\n    if(!path) return true;\n    let name = new URL(path);\n    name = name.pathname;\n    name= name.endsWith('/') ?name.replace(/^\\//,'') :name.replace(/.*\\//,'');\n    if(name.startsWith('.') ) return true;\n    if(name.endsWith('~') ) return true;\n  }\n  function _pathname(path){\n    try{ \n      let p = new URL(path); \n      return p.pathname\n    }\n    catch(e){console.log(path,e); return path }; \n  }\n  function _host(path){\n    try{ \n      let p = new URL(path); \n      return p.host\n    }\n    catch(e){console.log(path,e); return path }; \n  }\n\n\n  /*\n     @paramoptions : an array of arrays [ [value1,label1], [value2,label2] ]\n     onchange : callback function when item selected\n     selected : value to select (from options)\n     targetSelector :  an optional css selector e.g. \"#foo .bar\" where output should be placed\n     size : optional integer size of selector\n     returns an HTML select element\n   */\n  export function selector(options,onchange,selected,targetSelector,size){\n\n    function mungeLabel(label){\n      if(!label) return \"\";\n      label = decodeURI(label);\n      if(!label.endsWith(\"/\")) label = label.replace(/.*\\//,'')\n      return label || \"/\";\n    }\n    function addAttributes(option,optionEl){\n      if(Object.keys(option).length>2){\n        for(let k of Object.keys(option)){\n          if(k===\"value\"||k===\"label\")continue;\n          optionEl.dataset ||= {};\n          optionEl.dataset[k] = option[k];\n        }\n      }\n      return optionEl;\n    }\n\n\n\n    let computedSize = options.length;\n    size ||= 0;\n    size = computedSize <= size ?computedSize :size;\n    if(size <1) return;\n    if(size ===1) {\n      let button = document.createElement('BUTTON');\n      button.value = options[0].value;\n      button.innerHTML = mungeLabel(options[0].label);\n      button.addEventListener('click',(e)=>{\n        onchange(e.target)\n      })\n      return button;\n    }\n    let selectEl = document.createElement('SELECT');\n    for(let option of options){\n      let value,label;\n      if(typeof option===\"string\") value = label = option;\n      else {\n        value = option.value\n        label = option.label || option.value\n      }\n      if(!label || !option) continue;\n      label=mungeLabel(label);\n//      label = decodeURI(label);\n//      if(!label.endsWith(\"/\"))\n//         label = label.replace(/.*\\//,'')\n//      label ||= \"/\";\n      let optionEl = document.createElement('OPTION');\n      optionEl.value = optionEl.title = value;\n      optionEl.innerHTML = label;\n      optionEl.style = \"padding:0.25em;\";\n      optionEl = addAttributes(option,optionEl);\n/*\n      if(Object.keys(option).length>2){\n        for(let k of Object.keys(option)){\n          if(k===\"value\"||k===\"label\")continue;\n          optionEl.dataset ||= {};\n          optionEl.dataset[k] = option[k];\n        }\n      }\n*/\n      selectEl.appendChild(optionEl);\n    }\n\n    /* HIGHLIGHT SELECTED */\n    if(selected) selectEl.value = selected;\n//    selectEl.value ||= selectEl.childNodes[0].value;\n\n//    selectEl.addEventListener('click',async(e)=>{\n//      onchange(e.target)\n//    })\n    selectEl.addEventListener('change',async(e)=>{\n      onchange(e.target)\n    })\n    selectEl.size = size\n    selectEl.style=\"padding:0.5em;width:100%\"\n    if(targetSelector) {\n      let targetEl = document.querySelector(targetSelector)\n      targetEl.innerHTML = \"\"\n      targetEl.appendChild(selectEl);\n    }\n    return selectEl;\n  }\n\n","import * as user from  './user.js';\n// DataSources\n//import {Feed} from './model/rss.js';\nimport {Feed} from './model/feed.js';\nimport {Sparql} from './model/sparql.js';\n// Templates\nimport {Accordion} from './view/accordion.js';\nimport {App} from './view/app.js';\nimport {Form} from './view/form.js';\nimport {Menu} from './view/menu.js';\nimport {menuOfMenus} from './view/menuMenu.js';\nimport {Modal} from './view/modal.js';\nimport {SelectorPanel} from './view/selectorPanel.js';\nimport {Table} from './view/table.js';\nimport {Tabs} from './view/tabs.js';\nimport {BookmarkTree} from './view/bookmarkTree.js';\nimport {containerSelector} from './view/selector.js';\nimport {buttonListMenu} from './view/buttonListMenu.js';\nimport {CU} from './utils.js';\nconst u = new CU();\n\nconst sparql = new Sparql();\nconst proxy = \"https://solidcommunity.net/proxy?uri=\";\n\nclass SolidUIcomponent {\n\n$rdf = UI.rdf;\nskos = $rdf.Namespace('http://www.w3.org/2004/02/skos/core#');\nui = $rdf.Namespace('http://www.w3.org/ns/ui#');\nrdf=$rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#');\n\n  constructor(){\nif(typeof panes !=\"undefined\") window.outliner = panes.getOutliner(document);\n  }\n\n\n  // BREAKING : components marked as data-suic, not data-solid_ui_component\n  suic = \"[data-suic]\";\n\n  async init(){\n\n    // fetcher = this.makeLSfetcher(UI); // see drafts/in-browser-fetcher.js\n    let all = document.querySelectorAll(this.suic)\n//    all= all.length>0 ?all : document.querySelectorAll('[data-solid_ui_component]')\n    for(let element of all) {\n      const content = await this.processComponent(element);\n      if(content) element.appendChild( content );\n    }\n  }\n\n  async initInternal(containingElement){\n    let all = containingElement.querySelectorAll(this.suic)\n    for(let element of all) {\n      const content = await this.processComponent(element);\n      element.appendChild( content );\n    }\n    return containingElement;\n  }\n\n  async activateComponent(selector,targetElement){\n    targetElement ||= document;\n    let elm = typeof selector===\"string\" ?document.querySelector(selector) :selector;\n    let c = await this.getComponentHash(elm.getAttribute('data-suic'));\n    if(elm.innerHTML.replace(/\\s*/g,'').length === 0) {\n      const content = await this.processComponent(elm);\n      elm = content;\n      if(elm){\n        elm.style ||= {};\n        elm.style.display=\"block\";\n      }\n    }\n    return elm;\n  }\n\n  async showPage(event,json,obj){\n     event ||= {dataset:{}};\n     json ||= {};\n     let url = event.href || event.value || json.link || json['data'];\n     let type = event.dataset.contentType || u.findType(url)\n     if(solidUI.showFunction) return await solidUI.showFunction(type,url,json.displayArea,obj);\n     let content =  await u.show(type,url,\"\",json.displayArea,obj)\n     return content;\n  }\n\n  async processComponent(element,subject,json){\n    if(!json){    \n      if(!subject && element && element.dataset){\n        let urlToLoad  = element.dataset.suic;\n        if(urlToLoad.startsWith('/')) urlToLoad = window.origin + urlToLoad;\n        subject = await this.loadUnlessLoaded(urlToLoad);\n      }\n      if(!subject) return null;\n      json = await this.getComponentHash(subject)\n      json.displayArea = element.dataset.display || element.parentNode.dataset.display;\n      if(element.id) json.contentArea = '#' + element.id ;\n      json.contentSource = subject.value ?subject.value :subject ;\n    }\n    json ||= subject;\n\n    if(json.type===\"Component\"){\n       if(json.dataSource.endsWith('/')) return await containerSelector(json);\n       let newJson = await this.getComponentHash(json.dataSource,json);\n       newJson.contentSource = json.dataSource;\n       newJson.contentArea = json.contentArea;\n       newJson.displayArea = json.displayArea;\n       json = newJson;\n    }\n\n    if(!json) {console.log(\"No ComponentHASH \",subject); return;}\n    // default color,orientation,position\n    json = this.getDefaults(json);\n\n//    if(json.type.match(/Link/)){\n//      return displayLink(json)\n//    }\n\n    // DATASOURCE\n    let dataSource = (typeof json.dataSource===\"string\") ?await this.getComponentHash(json.dataSource) : json.dataSource ;\n    if(dataSource && dataSource.type==='SparqlQuery') {\n      let endpoint = dataSource.endpoint;\n      let query = dataSource.query.replace(/\\$\\{[^\\}]*\\}/g,'');\n      json.parts = await this.sparqlQuery(endpoint,query,json);\n      if(json.type==='SparqlQuery') return json.parts;\n    }\n    if(json.type==='SparqlQuery') {\n      json.parts = await this.sparqlQuery(json.endpoint,json.query,json);\n      if(json.type==='SparqlQuery') return json.parts;\n    }\n    if(json.type==='AnchorList') {\n      for(let l of json.content.split(/\\n/) ){\n\n      }\n    }\n    if(json.parts && json.groupOn){\n      json.parts = sparql.flatten(json.parts,json.groupOn)\n      console.log(json.groupOn,json.parts)\n    }\n    if(json.type==='App'){\n      return await (new App()).render(this,json);\n    }\n    else if(json.type && json.type.match(/Link/)){\n      return await window.displayLink(element,json,element);\n    }\n    else if(json.type && json.type.match(/ButtonListMenu/)){\n      return await buttonListMenu(json);\n    }\n    else if(json.type==='Menu'){\n      return await (new Menu()).render(this,json,element);\n    }\n    else if(json.type==='MenuOfMenus'){\n      return await menuOfMenus(json);\n    }\n    else if(json.type==='ContainerSelector'){\n      return await containerSelector(json);\n    }\n    else if(json.type==='FeedList'){\n      return await (new Feed()).makeFeedSelector(json.contentSource,json.contentArea,json.displayArea);\n    }\n    else if(json.type==='BookmarkTree'){\n      await (new BookmarkTree()).getTopic(json.contentSource,json.contentArea,json.displayArea,'start');\n      let elm = document.querySelector(json.contentArea);\n      elm.style = \"padding:0;margin:0;list-style:none;\"\n      document.getElementById('ocbStart').click();\n    }\n    else if(json.type==='SelectorPanel'){\n      let panel = new SelectorPanel();\n      let d = this.setDefaults(json);\n      return await panel.render(json);\n    }\n    else if(json.type==='ModalButton'){\n      // return await (new Modal()).render(this,json)\n         return await (new Modal()).render(json,this)\n    }\n    else if(json.type==='Accordion'){\n      return await (new Accordion()).render(this,json)\n    }\n    else if(json.type==='FormComponent'){\n      return await (new Form()).render(this,json)\n    }\n    else if(json.type==='Tabset'){\n      return await (new Tabs).render(this,json)\n    }\n    let contentWrapper = document.createElement('DIV');\n    let results,before,after,content,label;\n\n// RECORD\n    if(json.type==='Record') {\n      label = this.getValue( dataSource, ui('label') );\n      content = this.getValue( dataSource, ui('content') );\n      results = {label,content} ;\n    }\n\nresults = results || json.parts;  \nthis.log('Parts for Component',results);\n// TEMPLATE\n    let template = json.template;\n    if(!template){\n      return results;\n    }\n    if(template.groupOn) {\n      results = sparql.flatten(results,template.groupOn)\n    }   \n    \n      if(template==\"AccordionMenu\"){\n        let compo = await this.runBuiltIn(template,results);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      if(template==\"Table\"){\n        let compo = await (new Table()).render(json);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      if(template==\"ModalButton\"){\n        let compo = await this.makeMmodal(json.label,json.content);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      let recurring;\n// let template = json.template.value ?json.template.value :json.template ;\n\n/*\n      let isBuiltIn = template.match(/^https:\\/\\/www.w3.org\\/ns\\/ui#/) ;\n      if( isBuiltIn ) {\n        if(template.match(/ModalButton/)) {\n          results = await this.makeModalButton(label,content);\n        }\n        else if( template.match(/DropdownMenu/ || dataSourceType===\"App\") ){\n            let m = new Menu();\n            let results = await m.render(subject,contentWrapper)\n            // console.log(results)\n        }\n        else {\n          results = await this.runBuiltIn(template,results);\n        }\n        if(results) contentWrapper.appendChild(results);\n      }\n*/\n        if(typeof template==\"string\") {\n          template = await this.getComponentHash(template);\n        }\n        recurring = template.recurring;\n        before = template.before;\n        after = template.after;\n//        recurring = recurring || template;\n        let body = this.fillTemplate(recurring,results);\n        contentWrapper.innerHTML = (before||\"\") + body + (after||\"\");\n\n/*\n      if( dataSourceType.match(/Menu/) ) {\n        for(let menuItem of contentWrapper.children){\n          menuItem.addEventListener('click',(event)=>this.menu(event));\n        }\n      }\n*/\n      return contentWrapper ;\n    \n  }\ngetObjects(store,s,p,g){\n  let list = store.each(s,p,null,g);\n  if(list.length===0) return list\n  let type = list[0].termType;\n  let isFirst = store.any(list[0],this.rdf('first'));\n  if(type===\"Collection\") return list[0].elements;\n  else {\n    if(!isFirst) return list;\n    else {\n      return this.getRdfsList(store,list[0]);\n    }\n  }\n}\ngetRdfsList(store,first,list){\n  list ||= [];\n  list.push( store.any(first,this.rdf('first')) );\n  let rest = store.any(first,this.rdf('rest'));\n  if(rest && rest.value===this.rdf('nil').value) {\n    return list;\n  }\n  else {\n   return this.getRdfsList(store,rest,list)\n  }\n}\n  \nasync getComponentHash(subject,hash){\n    if(!subject) return hash;\n    subject = await this.loadUnlessLoaded(subject);\n    if(!subject) return null;\n    let predicatePhrases = UI.store.match(subject,null,null);\n/*\n    let thisdoc = UI.store.match(subject,null,null,subject.doc())\n    let isComponent = UI.store.any(subject,this.rdf('type'),this.ui('Component'));\n  //  console.log(66,subject.value,isComponent)\n*/\n    hash = hash || {}\n    for(let p of predicatePhrases){\n      let pred = p.predicate.value.replace(/http:\\/\\/www.w3.org\\/1999\\/02\\/22-rdf-syntax-ns#/,'').replace(/http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n      let obj = p.object;\n      let items = this.getObjects(UI.store,subject,p.predicate,subject.doc());\n      hash[pred] ||= [];\n/*\n      for(let item of items){\n//console.log(55,p.predicate.value,item)\n//let x = await this.getComponentHash(item,hash);\n        hash[pred].push(item.value);\n      }\n*/\n      if(obj.termType===\"BlankNode\"){\n        obj = await this.getComponentHash(obj);\n        if(!hash[pred])  hash[pred] = obj;\n        else if(typeof hash[pred] !='ARRAY') hash[pred] = [obj]\n        else hash[pred].push(obj);\n      }\n      else if(obj.termType===\"Collection\"){\n        obj = obj.elements;\n        for(let uri of obj){\n          let component = await this.getComponentHash(uri,{});\n          if(!hash[pred])  hash[pred] = [component];\n          else hash[pred].push(component);\n        }\n      }\n      else {\n        obj = obj.value.replace(/^http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n        if(!hash[pred])  hash[pred] = obj;\n        else if(typeof hash[pred] !='ARRAY') hash[pred] = [obj]\n        else hash[pred].push(obj);\n      }\n      if(hash[pred].length==1) hash[pred]=hash[pred][0];\n    }\n    hash.id ||= subject.value;\n    return hash ;\n  }\n  log(...args){\n    if(typeof DEBUG!=\"undefined\") console.log(args);\n  }\n  setStyle(element,styles){\n    for(let s of Object.keys(styles)){\n      element.style[s]=styles[s];\n    }\n  }\n\n\n/*-----------\n  SPARQL\n----------*/\n  async sparqlQuery(endpoint,queryString,json){\n    if(typeof Comunica !=\"undefined\")\n      return await sparql.comunicaQuery(endpoint,queryString,json);\n    else   \n      return await sparql.rdflibQuery(endpoint,queryString,json);\n//    return await sparql.rdflibQuery(solidUI,UI.store,endpoint,queryString,json);  \n  }\n\n\n/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  DISPLAY METHODS\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n\ngetDefaults(json){\n  if(typeof json==\"string\") json = this.processComponent('',json)\n  json.height ||= this.height;\n  json.width ||= this.width;\n  json.proxy ||= this.proxy || proxy;\n  json.background ||= this.background || \"#f6f6f6\";\n  json.color ||= this.color || \"#000\";\n  json.selBackground ||= this.selBackground || \"#559\";\n  json.selColor ||= this.selColor || \"#fff\";\n  json.unselBackground ||= this.unselBackground || \"transparent\" // \"#e0e0e0\";\n  json.unselColor ||= this.unselColor || \"#000\";\n  json.orientation ||= this.orientation || \"horizontal\";\n  json.position ||= this.position || \"left\";\n  this.proxy = json.proxy\n  return(json);\n}\nsetDefaults(json){\n  if(typeof json==\"string\") json = this.processComponent('',json)\n  this.background = json.background;\n  this.color = json.color;\n  this.selBackground = json.selBackground;\n  this.selColor = json.selColor;\n  this.unselBackground = json.unselBackground;\n  this.unselColor = json.unselColor;\n  this.orientation = json.orientation;\n  this.position = json.position\n  this.proxy = json.proxy\n  return(this.getDefaults(json));\n}\n\n  fillTemplate(templateStr,object){\n    function fillOneTemplateRow(templateStr,object){\n      for(let o of Object.keys(object) ){\n        let newStuff=object[o]||\" \";\n        if(typeof newStuff==='object' && newStuff.length>1) newStuff = newStuff.join(\", \");\n        let re = new RegExp( `\\\\$\\\\{${o}\\\\}`, 'gi' );\n        templateStr  = templateStr.replace( re, newStuff );\n      }\n      return templateStr;\n    }\n    let string = \"\";\n    for(let r of object){\n       string += fillOneTemplateRow(templateStr,r)+\"\\n\";\n    }\n    return string;\n  }\n\n  runBuiltIn(json,template,results){\n    if(template.match(/Table/)) return this.results2table(json,results);\n    if(template.match(/Modal/)) return this.results2modal(results);\n    if(template.match(/Accordion/)) return tabset(results);\n    if(template.match(/DescriptionList/)) return this.results2descriptionList(results);\n  }\n\n  /* UTILITIES\n  */\n\n  diff(diffMe, diffBy){ diffMe.split(diffBy).join('') }\n\n  simulateClick(el){\n    if (el.fireEvent) {\n      el.fireEvent('on' + 'click');\n    } else {\n      var evObj = document.createEvent('Events');\n      evObj.initEvent('click', true, false);\n      el.dispatchEvent(evObj);\n    }\n  }\n\n  // CREATE HTML ELEMENT\n  createElement(elementType,className,html,styles){\n    let element = document.createElement(elementType);\n    if(className) element.classList.add(className);\n    if(html) element.innerHTML = html;\n    if(styles){\n      for(let s of styles.split(/;/)) {\n        let pair = s.split(/:/)\n        if(pair.length==2) \n          element.style[pair[0].trim()]=pair[1].trim();\n      }\n    }\n    return element;\n  }\n  getComponentType(subject){\n    if(!subject) return null;\n    let uiNamespace = 'http://www.w3.org/ns/ui#';\n    let type = UI.store.each( subject, rdf('type') ).map( (object) =>{\n      object = object.value;\n      if(object.match(/ns\\/ui#/)) return object.replace(/.*\\#/,'');\n    });\n    return type[0] || \"\";\n  }\n\n  async clearInline(){\n    for(let stm of UI.store.match()){\n      if(stm.graph.value.startsWith('inline:')) UI.store.remove(stm);\n    }\n  }\n\n  loadFromMemory(sentUri){\n    let uri = sentUri //.replace(/^inline:/,'');\n    if( UI.store.any(null,null,null,$rdf.sym(uri)) ) return $rdf.sym(uri);\n    let [eName,fragment] = uri.split(/#/);\n    let eDoc = document.getElementById(eName)\n    let uiString = eDoc.innerText || eDoc.value;\n    uiString = uiString.trim()\n    if(uiString.startsWith('\\<\\!\\[CDATA\\[')) uiString=uiString.replace(/^\\<\\!\\[CDATA\\[/,'').replace(/\\]\\]$/,'').replace(/~~/g,'#');\n    try {\n      $rdf.parse(  uiString, UI.store, uri, \"text/turtle\" ); \n      return($rdf.sym(uri));\n    }\n    catch(e) { console.log(e) }\n  }\n\n  async  loadUnlessLoaded(uri){\n    try {\n      if(!uri) return;\n      if(uri && uri.termType && uri.termType===\"BlankNode\") return uri;\n      uri = typeof uri===\"object\" ?uri.uri :uri;\n      if(uri.startsWith('inline')) return this.loadFromMemory(uri);\n      if(!uri.startsWith('http')&&!uri.startsWith('ls')) uri = window.location.href.replace(/\\/[^\\/]*$/,'/') + uri;\n    const mungedUri = uri.replace(/\\#[^#]*$/,'');\n      let graph = $rdf.sym(mungedUri);\n      if( !UI.store.any(null,null,null,graph) ){\n        console.log(\"loading \"+graph.uri+\" ...\");\n        let r = await UI.store.fetcher.load(graph.uri);\n        if(UI.store.any(null,null,null,graph)) console.log(`<${graph.uri}> loaded!`);\n        else console.log(`<${graph.uri}> could not be loaded!`);\n//console.log(UI.store.match(null,null,null,graph));\n      }\n      else console.log(`<${graph.uri}> already loaded!`);\n      return $rdf.sym(uri);\n    }\n    catch(e) { console.log(e); return $rdf.sym(uri) }\n  }\n   getValue(s,p,o,g) {\n     let node = UI.store.any( s, p, o, g );\n     return node ?node.value :\"\" \n   }\n   valuesContain(s,p,o,g,wanted) {\n    let nodes = UI.store.each( s, p, o, g );\n    for(let n of nodes) {\n      n = n ?n.value :\"\";\n      if(n===wanted) return n;\n    }\n  }\n\n} // END OF CLASS SolidUIcomponent\n\nlet solidUI = new SolidUIcomponent();\nsolidUI.util = u;\nexport default solidUI;\n/*\ndocument.addEventListener('DOMContentLoaded', function() {    \n  let solidUI = new SolidUIcomponent();\n  solidUI.util = u;\n});\n*/\n","export async function buttonListMenu(json){\n    let div = document.createElement('DIV');\n    div.id =  json.contentSource.replace(/.*\\#/,'');\n    let html = \"\";\n    for(let ds of json.dataSource){\n      let attrs = \"\";\n      if(!ds.dataSource) {\n        ds = await solidUI.getComponentHash(ds);\n//      ds = await solidUI.getComponentHash(ds.id); // prior to getComp change\n      }\n      let b = document.createElement('BUTTON');\n      for(let k of Object.keys(ds)){\n          b.setAttribute(`data-${k}`,ds[k]);\n      }\n      b.innerHTML = ds.label;\n      b.addEventListener('click',async(e)=>{\n        e.preventDefault();\n        let link = b.getAttribute('data-link') || b.getAttribute('data-dataSource')\n        await solidUI.showPage(null,{link,displayArea:targetElement},ds); \n      });\n      div.appendChild(b)\n    }\n    let targetElement = document.querySelector(json.contentArea);\n    targetElement.innerHTML = \"\";\n    targetElement.appendChild(div)\n    return targetElement\n    let buttons = targetElement.querySelectorAll('BUTTON');\n    for(let button of buttons){\n      let tag  = button.getAttribute('about');\n      button.addEventListener('click',async(e)=>{\n        e.preventDefault();\n        let link = button.getAttribute('data-link') || button.getAttribute('data-dataSource')\n       await solidUI.showPage(null,{link,displayArea:targetElement}); \n      });\n    }\n    return targetElement;\n}\n","export async function menuOfMenus(json){\n    let div = document.createElement('DIV');\n    div.id =  json.contentSource.replace(/.*\\#/,'');\n    let html = \"\";\n    for(let ds of json.dataSource){\n      let component = ds.directDisplay ?ds.dataSource :ds.id\n      ds.directDisplay ||= \"\";\n      html += `<button about=\"${component}\" data-directDisplay=\"${ds.directDisplay}\">${ds.label}</button>`;\n    }\n    div.innerHTML = html;\n    let targetElement = document.querySelector(json.contentArea);\n    targetElement.innerHTML = \"\";\n    targetElement.appendChild(div)\n    let moreHtml = \"\"\n    for(let ds2 of json.dataSource){\n      let div2 = document.createElement('DIV'); \n      div2.id=ds2.label.replace(/\\s*/g,'_');\n      div2.setAttribute('data-suic',ds2.id);\n      div2.style=\"display:none\";\n      targetElement.appendChild(div2);\n    }\n    let buttons = targetElement.querySelectorAll('BUTTON');\n    for(let button of buttons){\n      let tag  = button.getAttribute('about');\n      button.addEventListener('click',async(e)=>{\n        e.preventDefault();\n        if(button.getAttribute('data-directDisplay')){\n          await solidUI.showPage(null,{link:button.getAttribute('about'),displayArea:targetElement}); \n          return;\n        }\n        let divs = targetElement.querySelectorAll(json.contentArea + ' > DIV');\n        for(let d of divs){\n          let target = d.getAttribute('data-suic');\n          if(target===tag){\n            d.style.display=\"block\";\n            await solidUI.activateComponent(d,targetElement);\n          }\n          else d.style.display=\"none\";\n        }\n      });\n    }\n    return targetElement;\n}\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","getObject","kb","subject","predicate","sym","any","getObjects","each","results","v","push","async","applyProfile","domElement","me","type","document","origin","window","storage","webId","$rdf","UI","rdf","RDFS","Namespace","FOAF","SOLID","PIM","LDP","VCARD","fetcher","node","load","e","console","log","extendedDocs","concat","doc","name","nick","image","inbox","preferences","privateTypeIndex","publicTypeIndex","storages","issuers","loadProfile","logo","querySelector","src","title","innerHTML","solidUI","vars","podRoot","podName","podNick","podWebID","podImage","podInbox","podProfile","Feed","feedUri","proxy","encodeURI","response","fetch","feedContent","text","feedDom","DOMParser","parseFromString","items","querySelectorAll","length","parsedItems","forEach","el","link","getAttribute","match","replace","trim","json","externalLinkIcon","icons","iconBase","i","this","fetchAndParse","href","displayTarget","wrapper","createElement","property","content","standAlone","label","style","selBackground","selColor","height","anchors","anchor","listItems","li","width","mungeAnchors","element","noStyle","alert","classList","contains","addEventListener","event","preventDefault","displayArea","dataset","target","display","closest","parentElement","displayLink","needsIframe","String","interpolate","params","names","keys","vals","values","Function","toggleMenu","column2","getElementById","toggleDarkMode","container","remove","add","toggleFontSize","currentSize","body","fontSize","item","popout","newElement","processComponent","appendChild","startsWith","targetElement","targetOutline","wantedPane","variable","pane","panes","byName","pod","uri","URLSearchParams","location","search","set","history","replaceState","pathname","setHistory","outliner","GotoSubject","containingEl","main","tabulator","span","initInternal","linkType","render","format","marked","parse","showMarkdown","div","script","nativeIframe","iframe","URL","b","srcdoc","scrollTo","top","behavior","getIframe","Sparql","endpoint","queryString","forceReload","Comunica","comunicaQuery","rdflibQuery","graph","preparedQuery","SPARQLToQuery","wanted","map","stm","table","querySync","r","row","w","sort","a","sparqlStr","result","comunica","newEngine","munge","x","invalidateHttpCache","store","webOperation","ok","statusText","query","sources","variables","bindings","entries","_root","id","flatten","groupOn","newResults","k","includes","n","Table","options","parts","sortOn","reverse","columnHeaders","headerRow","c","cell","border","padding","background","unselBackground","color","unselColor","rowElement","col","cleanNodes","backgroundColor","borderCollapse","Form","url","form","formSubject","u","resultDocument","dom","formString","string","fSubj","removeDocument","formResultDocument","putBack","widgets","appendForm","CU","constructor","UIO","ISA","removeClass","tag","cl","addClass","thing","getProperty","curie","vocab","split","ns","getProperties","getValues","all","some","one","s","val","menuize","buttonGroupElement","buttons","b2","findType","sourceFile","targetSelector","_show","showIframeSrc","pdf","video","showIframeSrcDoc","audio","loadFile","html","graphviz","d3","select","renderDot","markdown","parsedString","Component","SolidOSLink","SparqlQuery","q","sparqlQuery","DataTemplate","getUIterm","template","data","interpolated","PageDefinition","getMainSubject","DM","XS","XMLSerializer","templateURL","templateInfo","p","object","fileInfo","show","contentType","serializeToString","mainSubject","crossLoad","subjectType","getUItype","mungeHash","queryURL","querySubject","before","beforeQueryURL","beforeQuerySubject","beforeEndpoint","beforeQuery","beforeData","recurring","after","middle","makeIframe","show_iframe","makeSelector","onchange","selected","size","selectEl","option","endsWith","optionEl","childNodes","targetEl","getParent","newu","file","ext","path","decodeURI","isContainer","mime","getType","editable","host","isHidden","headers","responseText","status","types","term","newval","termType","elements","mungeLabel","mungeURL","PUT","cType","topTopic","bookm","rdfs","topicNodes","topics","topicSelector","collectionSelector","selectors","collections","colSelector","itemSelector","elm","items2list","onclick","parentNode","area","elms","suicfeedmenu","menuArea","myFeed","makeFeedSelector","initFeeds","Accordion","accordion","rowhead","topic","caret","textAlign","cursor","rowContent","linkLabel","linkUrl","button","setAttribute","marginBottom","showByClass","borderTop","showing","children","simulateClick","App","app","mainHeight","rem","remSize","clientHeight","removeChild","rem2px","menuHeight","headerHeight","SolidAppContext","scroll","innerHeight","toString","setDefaults","fullPage","mm","tab","overflow","adminMenu","leftMenu","siteMenu","orientation","leftMenuStyle","appString","getHTML","solidLogo","menuElement","menu","currentPodMenu","userMenu","amenu","umenu","loginBox","loginButtonArea","mungeLoginArea","authn","currentUser","checkUser","initAuth","loginStatusBox","loginButtons","authSession","onLogin","onLogout","onSessionRestore","createLoginBox","initialContent","getComponentHash","rem2vw","clientWidth","rem2vh","leftColumnColumnStyle","leftColumnColumnMenu","iframeSrc","iframeContent","logoStyle","titleStyle","appStye","mainStyle","theme","fillTemplate","Menu","nav","topUL","mainDisplay","renderMenuItem","position","sp","onmouseover","onmouseout","ul2","m","newItem","Modal","modal","current","openModal","action","closeModal","SelectorPanel","j","leftColumn","rightColumn","dataSource","firstOption","collectionsList","itemsList","Tabs","tabs","targetArea","undefined","marginRight","borderBottom","closeButton","BookmarkTree","containerElm","getElementsByClassName","component","bookmarksDisplay","loadUnlessLoaded","getTopic","click","containingElement","start","book","ui","topicTitle","createTextNode","toggle","subTopics","ul","t","bookmarks","bookmark","bookmarkTitle","isFeed","bookmarkLink","bookElement","d","base","containerSelector","contentArea","collectionSize","resourceSize","ldp","_host","files","resources","containers","_pathname","_findContentType","_isHidden","parent","splice","hostEl","selector","newContainer","selectorElement","showPage","fileNode","isa","addAttributes","computedSize","sparql","skos","getOutliner","suic","showFunction","urlToLoad","contentSource","newJson","getDefaults","l","ds","buttonListMenu","directDisplay","ds2","div2","divs","activateComponent","menuOfMenus","panel","contentWrapper","getValue","compo","runBuiltIn","makeMmodal","g","list","isFirst","getRdfsList","first","rest","hash","predicatePhrases","pred","args","DEBUG","setStyle","styles","templateStr","fillOneTemplateRow","newStuff","join","re","RegExp","results2table","results2modal","tabset","results2descriptionList","diff","diffMe","diffBy","fireEvent","evObj","createEvent","initEvent","dispatchEvent","elementType","className","pair","getComponentType","loadFromMemory","sentUri","eName","fragment","eDoc","uiString","innerText","mungedUri","valuesContain","nodes","util"],"sourceRoot":""}