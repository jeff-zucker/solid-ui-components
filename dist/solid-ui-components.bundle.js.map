{"version":3,"file":"solid-ui-components.bundle.js","mappings":"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","sources":["webpack://solidUI/webpack/universalModuleDefinition","webpack://solidUI/webpack/bootstrap","webpack://solidUI/webpack/runtime/define property getters","webpack://solidUI/webpack/runtime/hasOwnProperty shorthand","webpack://solidUI/webpack/runtime/make namespace object","webpack://solidUI/./src/model/profile.js","webpack://solidUI/./src/databrowser.js","webpack://solidUI/./src/model/rss.js","webpack://solidUI/./src/user.js","webpack://solidUI/./src/model/sparql.js","webpack://solidUI/./src/view/table.js","webpack://solidUI/./src/view/form.js","webpack://solidUI/./src/utils.js","webpack://solidUI/./src/model/feed.js","webpack://solidUI/./src/view/accordion.js","webpack://solidUI/./src/view/app.js","webpack://solidUI/./src/view/menu.js","webpack://solidUI/./src/view/modal.js","webpack://solidUI/./src/view/selectorPanel.js","webpack://solidUI/./src/view/tabs.js","webpack://solidUI/./src/view/bookmarkTree.js","webpack://solidUI/./src/view/selector.js","webpack://solidUI/./src/view/draggable.js","webpack://solidUI/./src/index.js","webpack://solidUI/./src/view/buttonListMenu.js","webpack://solidUI/./src/view/menuMenu.js","webpack://solidUI/./src/view/componentButton.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"solidUI\"] = factory();\n\telse\n\t\troot[\"solidUI\"] = factory();\n})(self, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* loadProfile()\n*/\nexport async function loadProfile(webId) {\n\nconst $rdf = UI.rdf;\n\nconst RDFS = $rdf.Namespace('http://www.w3.org/2000/01/rdf-schema#');\nconst FOAF = $rdf.Namespace('http://xmlns.com/foaf/0.1/');\nconst SOLID = $rdf.Namespace('http://www.w3.org/ns/solid/terms#');\nconst PIM = $rdf.Namespace('http://www.w3.org/ns/pim/space#');\nconst LDP = $rdf.Namespace('http://www.w3.org/ns/ldp#');\nconst VCARD = $rdf.Namespace('http://www.w3.org/2006/vcard/ns#');\n\n  const kb = window.kb;\n  const fetcher = $rdf.fetcher(kb);\n  const node = $rdf.sym(webId);\n  try {\n    await fetcher.load(webId);\n  }\n  catch(e){\n    console.log(\"Couldn't load profile : \"+e);\n    return {};\n  }\n  let extendedDocs = kb.each( webId, RDFS('seeAlso') );\n  extendedDocs = extendedDocs.concat( kb.each( node, FOAF('primaryTopicOf') ) );\n  for(let doc of extendedDocs){\n    await fetcher.load(doc);\n  }\n  let me = {\n    webId,\n    name  : getObject(kb,webId,FOAF('name')) || getObject(kb,webId,VCARD('fn')) || getObject(kb,webId,FOAF('nick')) || webId,\n    nick  : getObject(kb,webId,FOAF('nick')) || \"\",\n    image : getObject(kb,webId,VCARD('hasPhoto')) || \"\",\n    inbox : getObject(kb,webId,LDP('inbox')) || \"\",\n    preferences : getObject(kb,webId,PIM('preferencesFile')) || \"\",\n    privateTypeIndex : getObject(kb,webId,SOLID('privateTypeIndex')) || \"\",\n    publicTypeIndex : getObject(kb,webId,SOLID('publicTypeIndex')) || \"\",\n    storages : getObjects(kb,webId,PIM('storage')) || \"\",\n    issuers : getObjects(kb,webId,SOLID('oidcIssuer')) || \"\",\n  }\n  return me; // I'm defective, get your money back ;-)\n}\n\nfunction getObject(kb,subject,predicate){\n  subject = kb.sym(subject);\n  let value = kb.any(subject,predicate);\n  return value ?value.value :\"\";\n}\nfunction getObjects(kb,subject,predicate){\n  subject = kb.sym(subject);\n  let value = kb.each(subject,predicate);\n  let results = [];\n  for(let v of value){\n    results.push(v ?v.value :\"\");\n  }\n  return results;\n}\n","import {loadProfile} from './model/profile.js';\n\nexport async function applyProfile(domElement,me,type) {\n  domElement  ||= document;\n  let origin = window.origin;\n  me ||= `${origin}/profile/card#me`;\n  me = await loadProfile( me );\n  const storage = me.storages ?me.storages[0] :null ; // TBD MULTIPLE STORAGES\n  me.name = me.name || me.nick || me.webId;\n  let logo = domElement.querySelector('#currentPodLogo')\n  if(logo) logo.src = me.image;\n  let title = domElement.querySelector('#currentPodTitle');\n  if(title) title.innerHTML=`${me.name}'s Pod`;\n  solidUI.vars = {\n    podRoot   : storage,\n    podName   : me.name,\n    podNick   : me.nick,\n    podWebID  : me.webId,\n    podImage  : me.image,\n    podInbox  : me.inbox,\n    podProfile : me.webId,\n  };\n  return me;\n}\n \n    export function setHistory(uri){\n      const params = new URLSearchParams(location.search)\n      params.set('uri', (uri||\"\"));\n      window.history.replaceState({}, '', `${location.origin}${location.pathname}?${params}`);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    }\n\nexport async function createLoginBox(domElement){\n    const loginButtonArea = domElement.querySelector(\"#loginArea\");\n    const UI = panes.UI;\n    let tabulator = domElement.querySelector('#suicTabulator')\n/*\n      tabulator.style= `\n        display: none; \n        position: fixed;\n        z-index: 1;\n        left: 0;\n        top: 10vh;\n        width: 100%;\n        overflow: auto;\n        background-color: rgb(0,0,0);\n        background-color: rgba(0,0,0,0.2);\n      `; \n*/\n    async function mungeLoginArea(uri){\n      await initAuth();\n      loginButtonArea.innerHTML=\"\";\n      loginButtonArea.appendChild(UI.authn.loginStatusBox(document, null, {}))\n      let loginButtons = loginButtonArea.querySelectorAll('input');\n/*\n      for(let button of loginButtons){\n        button.style = `\n          border:none;\n          background:transparent;\n          font-size:1rem;\n          position: absolute;\n          top:3.5rem;\n          right:7.2rem;\n          cursor:pointer;\n        `;\n      }\n*/\n      loginButtons[0].value = loginButtons[0].value.replace(/WebID\\s*/,'');\n      if(loginButtons[1]) loginButtons[1].style.display=\"none\";\n    }      \n    async function initAuth(){\n      if( !UI.authn.currentUser() ) {\n        await UI.authn.checkUser();\n      }\n    }\n    if( UI.authn.authSession ) {\n      UI.authn.authSession.onLogin(() => {\n        mungeLoginArea();\n      })\n      UI.authn.authSession.onLogout(() => {\n        mungeLoginArea();\n      })\n      UI.authn.authSession.onSessionRestore((url) => {\n        mungeLoginArea();\n\n      })\n    }    \n//    document.addEventListener('DOMContentLoaded',()=>{mungeLoginArea();});\n    mungeLoginArea();\n} // ENDS\n","/*\n *  myFeed = new Feed(solidUI,feedUri)\n *  \n\nproxy\nhref || link\ndisplayType\nstandAlone\nlabel\n  selBackground\n  selColor\n  height\n  width\n\n */\n\nexport class Feed {\n\n  async fetchAndParse(feedUri,proxy){\n\n    // fetch feed URI & parse into a Dom structure\n    //\n    feedUri = (proxy||\"\")+encodeURI( feedUri );\n\n    let response = await fetch( feedUri )\n    let feedContent = await response.text();\n    const domParser = new window.DOMParser();\n    let feedDom = domParser.parseFromString(feedContent, \"text/xml\")\n\n    // find items (RSS) or entries (Atom)\n    //\n    let items = feedDom.querySelectorAll(\"item\") || null;\n    items = items.length<1 ?feedDom.querySelectorAll(\"entry\") :items;\n\n    // parse items\n    //\n    let parsedItems=[];\n    items.forEach( el => {\n\n      // find item link, account for specific kinds of quirks\n      //\n      let link = el.querySelector(\"link\").innerHTML;\n      // vox\n      if(!link) link = el.querySelector('link').getAttribute('href');\n      // reddit\n      if(!link || link.match(/ /)){\n        link = el.querySelector('content').innerHTML.replace(/.*\\[link\\]/ ,'').replace(/a href=\"/,'').replace(/\"&gt;.*/,'').replace(/.*&lt;/,'');\n      }\n      // engadget\n      if(!link.match(/^http/)) link = link.replace(/.*\\[CDATA\\[/,'');\n\n      // always use https, not http\n      link = link.replace(/^http:/,'https:');\n\n      // get the title\n      let title = el.querySelector(\"title\").innerHTML;\n      title = title.replace(/^\\<\\!\\[CDATA\\[/,'');\n      title = title.replace(/\\]\\].*\\>/,'').trim();\n\n      parsedItems.push({title,link});\n    });\n    return parsedItems;\n  }  // END OF fetchAndParse()\n\n\n  async render(solidUI,json){\n    let items = \"\";\n    let externalLinkIcon = UI.icons.iconBase+`/noun_189137.svg`;\n    externalLinkIcon = `<img src=\"${externalLinkIcon}\" style=\"width:1em;height:1em;display:inline-block; padding-left:0.4em;opacity:0.5\">`;\n    for(let i of await this.fetchAndParse((json.href||json.link),json.proxy)){\n      if(json.displayTarget===\"window\"){\n/*\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\">\n            <a href=\"${i.link}\" target=\"_BLANK\" property=\"rss:title\">\n              ${i.title}\n            </a>\n          </li>\n        `;\n*/\n      }\n      else {\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\" style=\"display:none;background:green;border:1px solid grey;\">\n            <a href=\"${json.proxy+i.link}\" property=\"rss:title\" style=\"background:#999;display:inline-block\">\n               ${i.title}\n            </a>\n            <a href=\"${i.link}\" class=\"skipMunge\" target=\"_BLANK\" class=\"external\">${externalLinkIcon}</a>\n          </li>\n        `;\n      }\n    }\n    const wrapper = document.createElement('DIV');\n    wrapper.property = \"xmlns:rss\";\n    wrapper.content = \"http://purl.org/rss/1.0/\";\n    if(json.standAlone) {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n          <b property=\"rss:title\">${json.label}</b>\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n\n    wrapper.querySelector('B').style=`padding:1em;padding-right:0;background:${json.selBackground};color:${json.selColor};border:1px solid grey;width:100%;display:inline-block`;\n    }\n    else {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n<!--          <div property=\"title\" style=\"background:#d0d0d0;padding:1em;\">${json.label}</div>-->\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n    wrapper.querySelector('UL').style=`padding:0;padding-left:0;list-style:none;margin-top:0;width:100%;`;\n    }\n    wrapper.querySelector('UL').style=`padding:0;border:1px solid grey;list-style:none;margin-top:0;width:100%;height:${json.height};overflow-y:auto;`;\n    let anchors = wrapper.querySelectorAll('A');\n    for(let anchor of anchors){\n      anchor.style=\"text-decoration:none;\"\n    }\n    let listItems = wrapper.querySelectorAll('LI');\n    for(let li of listItems){\n      li.style=\"padding:0.5em;border-bottom:1px solid grey\";\n    }\n    if(json.width) wrapper.style.width = json.width;\n    return wrapper;\n  }\n}\n","import {setHistory,applyProfile} from './databrowser.js';\nimport {Feed} from './model/rss.js';\n\n/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  USER CALLABLE ACTIONS\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n\n  // https://stackoverflow.com/a/41015840/15781258\n  //\n  String.prototype.interpolate = function(params) {\n    const names = Object.keys(params);\n    const vals = Object.values(params);\n    return new Function(...names, `return \\`${this}\\`;`)(...vals);\n  }\n\n  window.toggleMenu=()=>{\n    const column2 = document.getElementById('column-2');\n    column2.style.display ||= \"block\"; \n    if(column2.style.display===\"block\"){\n      column2.style.display=\"none\"\n    }\n    else {\n      column2.style.display=\"block\"\n    }\n  }\n  window.toggleDarkMode=()=>{\n     const container = document.getElementById('zContainer');\n     let currentMode = container.classList.contains('darkMode');\n     if(currentMode){\n        container.classList.remove('darkMode');\n     }\n     else {\n        container.classList.add('darkMode');\n     }\n  }\n  window.toggleFontSize=()=>{\n     let currentSize = document.body.style.fontSize || \"100%\";\n     if(currentSize===\"100%\"){\n        document.body.style.fontSize = \"120%\";\n     }\n     else if(currentSize===\"120%\"){\n        document.body.style.fontSize = \"140%\";\n     }\n     else if(currentSize===\"140%\"){\n        document.body.style.fontSize = \"90%\";\n     }                                                                                                   else {\n        document.body.style.fontSize = \"100%\";\n     }\n  }                                                                                                 \n\n  async function showIframe(uri,displayArea){\n    if( uri.match(/localhost/) ) {\n      displayArea.src = uri;\n      return  ;\n    }\n    const r = await fetch(uri);\n    const content = await r.text();\n    const contentElement = this.createElement('SPAN','',content);\n    displayArea.contentWindow.document.body.innerHTML = \"\";\n    displayArea.contentWindow.document.body.appendChild(contentElement);\n  }\n  function showByClass(event){\n    let wanted = event.target.dataset.link;\n    let main = event.target.closest('.solid-uic-app').querySelector('.main');\n    let elements = main.querySelectorAll('[typeof]');\n    for(let element of elements){\n      if(wanted===\"all\") {\n        element.style.display=\"block\";\n        continue;\n      }\n      if( (element.getAttribute('value')).indexOf(wanted)>-1 ) element.style.display=\"block\";\n    //  if(element.classList.contains(wanted)) element.style.display=\"block\";\n      else element.style.display=\"none\";\n    }\n    highlightMenuSelection(event)\n  }\n  function highlightMenuSelection (e) {\n    let wanted = e.target.dataset.link;\n    let siblings = e.target.parentElement.children;\n    for(let sib of siblings){\n      if(sib.dataset.link===wanted)  sib.classList.add('selected');\n      else sib.classList.remove('selected');\n    }\n  }\n  function toggleAccordion (e) {\n    let wanted = e ?e.target.dataset.link :null;\n    let siblings = e.target.closest('UL').children;\n\n    // HIDE ALL ACCORDION DROPDOWNS\n    let navs = e.target.closest('UL').querySelectorAll('NAV');\n    for(let n of navs) {n.style.display=\"none\"}\n\n    // SHOW SELECTED ACCORDION DROPDOWNS\n    for(let sib of siblings){\n      let button = sib.querySelector('BUTTON');\n      let links = sib.querySelectorAll('NAV DIV');\n      for(l of links) { l.classList.remove('selected')}\n      let box = sib.querySelector('NAV');\n      if(button.dataset.link===wanted)  {\n        box.style.display=\"block\";\n      }  \n    } \n  }\n  window.displayLink = async function( e, item, element ){\nalert('user.js DISPLAY LINK')\n    if(typeof item==='string') item = { href:item }\n    item.href = item.href || item.link;\n    item.type = item.type || 'Link';\n    item.type = item.type.replace(/http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n\n\n    // IF POPOUT, DISPLAY IN ITS OWN OVERLAY AND RETURN\n    if(item.popout) {\n      let newElement = await solidUI.processComponent('',item.href)\n      newElement.style.display=\"block\";\n      document.body.appendChild(newElement);\n      return newElement;\n    }\n\n    // IF SOLIDOS LINK, DISPLAY WITH GOTOSUBJECT, RETURN\n    if(item.type.startsWith(\"SolidOS\")) {\n      return solidUI.util.show('SolidOSLink',item.href)\n      document.getElementById('mainMain').style.display=\"none\";\n      const targetElement = document.getElementById('suicTabulator')\n      targetElement.style.display=\"block\";\n      const targetOutline = targetElement.querySelector('#outline');\n      let wantedPane;\n      item.href = (!item.href && item.variable) ?solidUI.vars[item.variable] :item.href;\nconsole.log(solidUI.vars);\n      let subject = item.href;\n      if( item.pane ) {\n         wantedPane = panes.byName(item.pane);\n      }\n      else if( item.pod ) {\n        let me = await applyProfile(null,item.pod,'podLoad');\n        subject = me.storages[0];\n      }\n      subject = window.kb.sym(subject);\n      setHistory(subject.uri);\n      window.outliner.GotoSubject(subject,true,wantedPane,true,null,targetOutline);\n      return;\n    }\n\n    let main = document.getElementById('mainMain')\n    let tabulator = document.getElementById('suicTabulator')\n    if(main) main.style.display=\"block\";\n    if(tabulator) tabulator.style.display=\"none\";\n\n    // FIND CONTAINING ELEMENT\n    let containingEl;\n    if(element && !e){\n      containingEl = element;\n    }\n    // let wrapper =e.target.closest('.solid-ui-component')\n    let wrapper = e && e.target ?e.target.closest('.solid-uic-app') :null;\n    if(wrapper && wrapper.classList.contains('solid-main-app')) {\n      containingEl = wrapper.querySelector('#mainMain');\n    }\n    else if(wrapper) {\n      containingEl = wrapper.querySelector('.main');\n    } \n    containingEl=containingEl||document.body.querySelector('.main')||document.body;\n    if(containingEl) containingEl.innerHTML=\"\";\n    let content = item.content;\n    if(content){\n      let span = document.createElement('SPAN')\n      content = content.interpolate(solidUI.vars);\n      span.innerHTML = content;\n//      span = mungeAnchors(span);\n      containingEl.innerHTML=\"\"\n      containingEl.appendChild(span);\n      return await solidUI.initInternal(containingEl);  \n    }\n    // SolidOsLink\n    if(item.type===\"SolidOSLink\") {\n        return;\n    }\n    // FEED \n    if(item.type===\"Feed\"||item.linkType===\"Feed\") {\n      let content = await (new Feed()).render(solidUI,item);\n/*\n      let newItem = {\n        type:\"App\",\n        orientation:\"vertical\",\n        menu:item\n      }\n      let content = await solidUI.processComponent('','',newItem)\n*/\n      content = mungeAnchors(content,\"noStyle\");\n      containingEl.innerHTML=\"\"\n      containingEl.appendChild(content);\n      return containingEl;\n    }\n    // MARKDOWN\n    else if(item.type==='TransformLink'){\n      if(item.href && item.format && item.format.match(/markdown/)){\n        return showMarkdown(item,containingEl);\n      }\n    }\n    else if(item.type===\"Link\") {\n      if(content){\n          containingEl.innerHTML = content;\n        return await this.initInternal(containingEl);  \n      }\n      else if(item.script){\n        let content = await Function('\"use strict\";return (' + item.script + ')')();\n        content = mungeAnchors(content) ;\n//        containingEl.innerHTML=\"\"\n        return(content);\n      }\n      else if(item.href){\n        let content = await getIframe(item,containingEl,item.nativeIframe);\n//        containingEl.innerHTML=\"\"\n        containingEl.appendChild(content);\n        return containingEl;\n      }\n    }\n    else {\n      content = await solidUI.processComponent('',item) ;\n      if(!item.format) content = mungeAnchors(content);\n      containingEl.innerHTML=\"\"\n      if(typeof content === 'string'){\n        let div = document.createElement('DIV');\n        div.innerHTML = content;\n        containingEl.appendChild(div);\n      }\n      else containingEl.appendChild(content);\n      return containingEl;\n    }\n  }\n  async function showMarkdown(item,containingEl){\n    let content = await fetch(item.href);\n    content = await content.text();\n    containingEl.innerHTML=\"\"\n    let style =`\n<style>\n  h1 {display:none;}\n//  a{text-decoration:none; padding-top:0.25em;display:inline-block;padding-left:1em;}\n  ul {list-style:none;padding-left:0;margin-top:0;}\n</style>`;\n    let wrapper = document.createElement('SPAN');\n    wrapper.innerHTML = style + marked.parse( content );\n    wrapper = mungeAnchors(wrapper,\"noStyle\");\n    return wrapper;\n  }\n\n  function mungeAnchors(element,noStyle){\n    if(!element) return;\n    const anchors = element.querySelectorAll('A');\n    for(var anchor of anchors){\n      if(!anchor.innerHTML) alert(anchor)\n      if(anchor.classList.contains('skipMunge')) continue;\n      anchor.addEventListener('click',async(event)=>{\n        event.preventDefault();\n        let displayArea = element.dataset.target;\n        let display = event.target.closest('.solid-uic-app')\n        if(display && !displayArea) displayArea = display.querySelector('.main');\n        let href = event.target.href || event.target.parentElement.href\n        displayLink(null,{href,needsIframe:true},displayArea);\n      });\n      if(noStyle) continue;\n      anchor.style=\"display:block;text-decoration:none;padding:0.5em; border-bottom:1px solid grey;color:#017698 !important;\";\n    }\n    return element;\n  }\n  async function getIframe(item,containingEl,nativeIframe){\n    let uri = item.href;\n    const iframe = document.createElement(\"IFRAME\");\n    iframe.style=\"width:100%;height:90vh;border:none;margin:0;padding:0;\";\n    iframe.src = \"\";\n    if(nativeIframe) {\n      iframe.src=uri;\n    }\n    else {\n      try{\n        let content = await fetch(uri);\n        if(content){\n          content = await content.text()\n//        if(!content.match(/^\\s*</)) return await goto(uri,containingEl);\n          containingEl.innerHTML=\"\";\n          uri = uri.replace(/^.*proxy\\?uri=/,'');\n          uri = new URL(uri);\n          const b = `<base href=\"${uri.origin}/\"><base target=\"_BLANK\">`;\n          iframe.srcdoc = `<body>${b}${content}</body>`\n          iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n        }\n        else {\n          console.log(\"Fetched but no content!\");\n        }\n      }\n      catch(e){console.log(\"Couldn't fetch!\",e)}\n    }\n    return iframe;\n  }\n\n  async function goto(uri,domElement){\n    var kb = UI.store;\n    var outliner = panes.getOutliner(window.document)\n    var subject = kb.sym(uri);\n    const pane = panes.byName('dataContents');\n    outliner.GotoSubject(subject, true, pane, true, undefined);\n  }\n\n  function gotoPane(uri,paneName,targetElement){\n    var subject = panes.UI.rdf.sym(uri);\n    var wantedPane = panes.byName(paneName);\n    outliner.GotoSubject(subject,true,wantedPane,true,null,targetElement);\n  }\n\n  function renderSolidOSpage(item){\n     const targetElement = document.getElementById('suicTabulator')\n     targetElement.style.display=\"block\";\n     window.outliner.GotoSubject(window.kb.sym(item.href),true,undefined,true);\n  }\n","export class Sparql {\n\n  async sparqlQuery(endpoint,queryString,forceReload){\n    if(typeof Comunica !=\"undefined\")\n      return await this.comunicaQuery(endpoint,queryString,forceReload);\n    else   \n      return await this.rdflibQuery(endpoint,queryString,forceReload);  \n  }\n\n/* REPLACED\n  async rdflibQuery(solidUI,kb,endpoint,queryString,json){\n    await solidUI.loadUnlessLoaded(endpoint);\n*/\n/* NEW */\n  async rdflibQuery(endpoint,queryString,forceReload){\n/*\n    kb = UI.store\n    const fetcher = UI.store.fetcher;\n*/\n    const kb = UI.rdf.graph();\n    const fetcher = UI.rdf.fetcher(kb);\n\n//    if(forceReload || !kb.any(null,null,null,UI.rdf.sym(endpoint)))\n      await kb.fetcher.load(endpoint);\n/* END-NEW */\n\n    try {\n      const preparedQuery=await UI.rdf.SPARQLToQuery(queryString,false,kb);\n      let wanted = preparedQuery.vars.map( stm=>stm.label );\n      let table = [];\n      let results = kb.querySync(preparedQuery);\n      for(let r of results){\n        let row = {};\n        for(let w of wanted){\n          let value = r['?'+w];\n          row[w] = value ?value.value :\"\";\n        }\n        table.push(row);\n      }\n      table = table.sort((a,b)=>a.label > b.label ?1 :-1);\n      return table\n    }\n    catch(e) { console.log(e); }\n  }\n\n  async  comunicaQuery(endpoint,sparqlStr,forceReload){\n   try {\n    let comunica = Comunica.newEngine() ;\n    if(forceReload) comunica.invalidateHttpCache();\n    function munge(x){\n       return x ? x.replace(/^\"/,'').replace(/\"[^\"]*$/,'') :\"\";\n    }\n    let result;\n    let r = await UI.store.fetcher.webOperation('GET',endpoint);\n    if(!r.ok) { alert(r.statusText); return; }\n    try { result = await comunica.query(sparqlStr,{sources:[endpoint]}) ; }\n    catch(e){alert(e); return};\n    let wanted = result.variables;\n    result = await result.bindings()\n    let table = [];\n    let hash = {};\n    for(let e of result.entries()) {\n      if( !e[1] ||  !e[1]._root || !e[1]._root.entries ) continue;\n      e = e[1]._root.entries\n      let row = {} ;\n      for(let i in e){\n        let key = munge( e[i][0].replace(/^\\?/,''))\n        row[key] = row[key] || \"\";\n        let value = munge(e[i][1].id)\n        if( typeof row[key] != 'ARRAY' ) row[key]= [row[key]]\n        if( typeof row[key] === \"ARRAY\" ) row[key].push(value)\n        else row[key] = value;\n      }\n      // include keys even for empty values\n      for(let key of wanted){\n        key = key.replace(/^\\?/,'');\n        row[key] = row[key] || \"\"\n      }\n      table.push(row);\n    }\n    if(!table.length) console.log('No results!');\n    return table;\n   }\n   catch(e){console.log(e)}\n  }\nflatten(results,groupOn){\n  const newResults = {};\n  for(let row of results) {\n    let key = row[groupOn];\n    if(!newResults[key]) newResults[key]={};\n    for(let k of Object.keys(row)){\n      if(!newResults[key][k]) {\n        newResults[key][k]=row[k];\n        continue;\n      }  \n      if(newResults[key][k].includes(row[k])) continue;\n      if(typeof newResults[key][k]!=\"object\") newResults[key][k]=[newResults[key][k]]\n      newResults[key][k].push(row[k])\n    }\n  }\n  results = [];\n  for(let n of Object.keys(newResults)){\n    results.push(newResults[n])\n  }\n  return results;\n} \n\n} // class Sparql  \n\n","export class Table {\n  render(options) {\n    let results = options.parts;\n    if(!results || !results.length) {\n      console.log(\"No results!\");\n      return document.createElement('SPAN');\n    }\n    if(options.sortOn) {\n//      results.sort((a,b)=> a[options.sortOn] - b[options.sortOn] )\n      results = results.reverse();\n    }\n    let table = document.createElement('TABLE');\n    let columnHeaders = Object.keys(results[0]);\n    let headerRow = document.createElement('TR');\n    for(let c of columnHeaders){\n      let cell = document.createElement('TH');\n      cell.innerHTML = c;\n      cell.style.border=\"1px solid black\";\n      cell.style.padding=\"0.5em\";\n      cell.style.background=options.unselBackground;\n      cell.style.color=options.unselColor;\n      headerRow.appendChild(cell);\n    }\n    table.appendChild(headerRow);\n    for(let row of results){\n      let rowElement = document.createElement('TR');\n      for(let col of columnHeaders){\n        if(options.cleanNodes){\n          row[col] = row[col].replace(/.*\\#/,'').replace(/.*\\//,'');\n        }\n        let cell = document.createElement('TD');\n        cell.innerHTML = row[col];\n        cell.style.border=\"1px solid black\";\n        cell.style.padding=\"0.5em\";\n        cell.style.backgroundColor=options.background;\n        cell.style.color=options.color;\n        rowElement.appendChild(cell);\n      }\n      table.appendChild(rowElement);\n    }\n    table.style.borderCollapse=\"collapse\";\n    return table;\n  }\n}\n// ENDS\n","import * as u from '../utils.js';\n/*\n  form.render()   // define options via Javascript parameters\n  form.fromUrl()  // define options via ui:Component file\n  form.fromMem()  // define options via a ui:Component string\n\n*/\nexport class Form {\n\n  /**\n   * @param {String}      form - the URL of the form definition document\n   * @param {String}      formSubject - the data for the form\n   * @param {String}      [formString] - a string form definition\n   * @param {HTMLElement} [dom=document] - DOM container to hold form\n   * @param {Boolean}     [forceReload] - empty store before loading\n   * @param {String}      [formResultDocument] - place to store form results\n   * @param {Function}    [script] - Javascript to execute on form change\n   * @returns an HTML DIV element containing the form\n   */\n  async fromURL(url){\n    let node = UI.rdf.sym(url);\n    await UI.fetcher.load(node);\n    return await this.render({\n                form : url,\n         formSubject : u.getProperty(node,'ui:formSubject'),\n              script : u.getProperty(node,'ui:script'),\n      resultDocument : u.getProperty(node,'ui:formResultDocument'),\n    });\n  }\nasync render(o){\n    const dom = o.dom || document;\n    const container = document.createElement(\"DIV\");\n    container.classList.add('uic-form');\n    let form = UI.rdf.sym(o.form);\n    let subject;\n    if(o.formSubject) subject = UI.rdf.sym(o.formSubject) ;\n    if(o.formString){\n      UI.rdf.parse(string,UI.store,o.form,'text/turtle');\n    }\n    else await UI.store.fetcher.load(o.form);\n    if(!subject){\n       let fSubj = UI.rdf.sym('http://www.w3.org/ns/ui#formSubject');\n       subject = UI.store.any(form,fSubj)\n    }\n    if(o.forceReload){ \n      if(subject && subject.doc) UI.store.removeDocument(subject.doc());\n    }\n    if(subject) await UI.store.fetcher.load(subject.doc());\n    else {\n      container.innerHTML=\"ERROR : Could not load form subject \"\n      return container;\n    }\n    const title = document.createElement(\"H2\");\n    let doc = o.formResultDocument;\n    if(subject && !doc && subject.doc) doc = subject.doc();\n    const script = o.script || function (){\n      UI.store.fetcher.putBack(subject) // tempory work-around ui:ordered bug\n    };\n    try {\n      UI.widgets.appendForm(dom, container, {}, subject, form, doc, script);\n    }\n    catch(e){\n       // console.log(dom,container,subject,form,doc)\n       container.innerHTML = \"FORM ERROR:\"+e;\n    }  \n    return container;\n  }\n\n}\n\n/* OLD\n  async render(solidUI,options){\n    const container = document.createElement(\"DIV\",'uic-form');\n    const dom = window.document;\n    const form = await solidUI.loadUnlessLoaded(options.form);\n    await solidUI.loadUnlessLoaded(options.formSubject);\n    const subject = await solidUI.loadUnlessLoaded(options.formSubject);\n    if(!subject) return console.log(\"ERROR : Couldn not load form subject \",options.formSubject)\n    let doc = options.formResultDocument;\n    if(!doc && subject.doc) doc = subject.doc();\n    const script = options.script || function(){};\n    try {\n      UI.widgets.appendForm(dom, container, {}, subject, form, doc, script);\n    }\n    catch(e){return console.log(e)}  \n    if(options.onchange) {\n      const vals = container.querySelectorAll('.formFieldValue button');\n      for(let v of vals){\n        v.onclick = \"alert(3)\";\n      }\n    }\n    return container;\n  }\n\n*/\n","/*\n  NON-RDF \n   image pdf video audio text html graphviz markdown\n  RDF\n   SolidOSLink Form SparqlQuery DataTemplate PageDefinition \n*/\n\n\n/*\n  show[rdf|markdown|graphviz](uri,string,targetSelector)\n  mungeLabel(label)\n  PUT(url,content,contentType)\n*/\nimport {Sparql} from './model/sparql.js';\nimport {Table} from './view/table.js';\nimport {Form} from './view/form.js';\n//import mime from \"https://cdn.skypack.dev/mime\";\n\nexport class CU {\n\n  constructor(){\n    this.UIO = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n    this.ISA = UI.rdf.sym(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\");\n    this.PIM = UI.rdf.Namespace(\"http://www.w3.org/ns/pim/space#\");\n  }\n\n\nremoveClass(tag,cl){\n    document.querySelector(tag).classList.remove(cl);\n}\naddClass(tag,cl){\n    document.querySelector(tag).classList.add(cl);\n}\n\nnewElement(tag,id,classList,value){\n   let thing = document.createElement(tag);\n   if(id) thing.id = id;\n   if(classList) thing.classList = classList;\n   if(value) thing.value = value;\n   return thing;\n}\n\n  getProperty(subject,curie){\n    let [vocab,predicate] = curie.split(/:/);\n    return UI.store.any(subject,UI.ns[vocab](predicate)) || \"\";\n  }\n  getProperties(subject,curie){\n    let [vocab,predicate] = curie.split(/:/);\n    return UI.store.each(subject,UI.ns[vocab](predicate))  || [];\n  }\n  getValues(subject,curie){\n    let all = [];\n    let some = this.getProperties(subject,curie) || [];\n    for(let one of some){\n      all.push(one.value);\n    }\n    return all;\n  }\n\n  getObjects(subject,predicate){\n    return UI.store.each(subject,predicate).map((s)=>{return s.value});\n  }\n  getObject(subject,predicate){\n    let val = UI.store.any(subject,predicate);\n    return val && val.value ?val.value :\"\";\n  }\n\n  /*\n  displays rendered component in targetSelector if it is not null\n  returns rendereed component as an HTML-element\n\n  renderFromURL(url,targetSelector,forceReload);\n   \n\n  load from URL - renderComponent({url:\"\"});\n  load from STRING - renderComponent({url:\"\",string:\"\"});\n  load from HTML-ELEMENT - renderComponent({element:\"\"});\n\n    1. loads from url, string, or html-element\n       * if string, parses it into store\n       * else if !url, gets url from element dataset, loads into store\n       * else if !string && !element loads url into store\n       * if forceReload, does store.removeDocument before loading\n    2. finds subject from url or #this\n       * if url contains #, use it as subject\n       * else use url+#this as subject\n    3. \n \n            loads uri into store\n\n   renderComponent({\n     url,\n     string,\n     element,\n     forceReload,\n   })\n     \n  async renderComponent(url,string,element){\n    url = url.value ?url.value :UI.rdf.sym(url)\n    let uiType = this.getUItype(url);\n    let mainSubject = UI.store.rdf.sym( url.match(/\\#/) ?url :url+\"#this\" );\n    let node = await this.crossLoad(url,string,forceReload);\n    let subjectType = this.getUItype(mainSubject);\n  }\n   */\n\n  menuize(buttonGroupElement){\n    buttonGroupElement = document.querySelector(buttonGroupElement);\n    if(!buttonGroupElement) return;\n    let buttons = buttonGroupElement.querySelectorAll('BUTTON');\n    for(let b of buttons){\n      b.addEventListener('click',(e)=>{\n        let clicked = e.target;\n        for(let b2 of buttons){ b2.classList.remove('selected') }\n        b.classList.add('selected');\n      });\n    }\n  }\n\n  findType(uri,string){\n    if(!uri && typeof sourceFile != \"undefined\") uri = sourceFile;\n    if(!uri) return \"unknown\";\n    let type = uri.replace(/\\#.*/,'').replace(/\\?.*/,'').replace(/.*\\./,'');\n    if(!type) return \"unknown\";\n    if(type.match(/(md)|(markdown)/)) return \"markdown\";\n    if(type.match(/(dot)|(gv)/)) return \"graphviz\";\n    if(type.match(/(ttl)|(rdf)|(n3)/)) return \"rdf\";\n    if(type.match(/(html)|(css)|(js)/)) return type;\n    return \"unknown\";\n  }\n  async show(type,uri,string,targetSelector,forceReload,obj){\n    if(solidUI.hideTabulator) solidUI.hideTabulator();\n    if(targetSelector && typeof targetSelector != \"string\"){\n//      targetSelector = targetSelector.id;\n    }\n    /*\n     NEW (NO ACE)\n    */\n\n    type = type ?type.replace(/.*\\//,'') :null;\n    if(!type || !type.match(/html/)) type = \"rdf\";\n    return await this._show[type](uri,string,targetSelector,forceReload,obj);\n\n    /*\n     OLD\n    */\n    if(type.match(/(turtle)|(rdf)|(n3)/)) type = \"rdf\";\n    if(type.match(/image/)) type = \"image\";\n    if(type.match(/video/)) type = \"video\";\n    if(type.match(/audio/)) type = \"audio\";\n    if(type.match(/graphviz/)) type = \"graphviz\";\n    if(type.match(/(javascript|json|text)/)) type = \"text\";\n    type = type.replace(/.*\\//,'');\n    if(this._show[type])\n       return await this._show[type](uri,string,targetSelector,forceReload,obj);\n  }\n\n  _show = {\n\n  image : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrc(uri,targetSelector);\n  },\n  pdf : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrc(uri,targetSelector);\n  },\n  video : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrcDoc(`<video controls=\"yes\" src=\"`+uri+`\" style=\"max-width:100vw;max-height:100vh\"></video>`,uri,targetSelector);\n  },\n  audio : async(uri,string,targetSelector) => {\n    if(targetSelector) return this.showIframeSrcDoc(`<audio controls=\"yes\" src=\"`+uri+`\" style=\"margin-top:2em;\"></audio>`,uri,targetSelector);\n  },\n  text : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) return this.showIframeSrcDoc(string,uri,targetSelector);\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = string;\n    return div;\n  },\n  html : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) return this.showIframeSrcDoc(string,uri,targetSelector);\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = string;\n    return div;\n  },\n  graphviz : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    if(targetSelector) {\n      document.querySelector(targetSelector).innerHTML = \"\";\n      try {\n        d3.select(targetSelector).graphviz().renderDot(string, ()=>{} );\n      } catch(e){ alert(e); }\n    }\n    else {\n      let div = document.createElement(\"DIV\");\n      try {\n        d3.select(div).graphviz().renderDot(string, ()=>{} );\n      } catch(e){ alert(e); }\n      return div;\n    }\n  },\n  markdown : async (uri,string,targetSelector) => {\n    string ||= (await this.loadFile(uri)).body;\n    // string ||= await this.loadFile(uri);\n    let parsedString = marked.parse(string);\n    if(targetSelector){\n      return this.showIframeSrcDoc(parsedString,uri,targetSelector);\n    }\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = parsedString;\n    return div; \n  },\n  Component : ()=>{\n    alert(\"utils.js Component\")\n  },\n  SolidOSLink : async (url,string,targetSelector,forceReload,obj)=>{\n    url ||= obj.href;\n    if(solidUI.showTabulator) solidUI.showTabulator();\n      let targetElement = document.getElementById('suicTabulator') || targetSelector\n      if(targetElement) targetElement.style.display=\"block\";\n      let targetOutline = targetElement ?targetElement.querySelector('#outline') || targetElement.querySelector('.outline') :null;\n      if(!targetOutline) {\n        targetElement=makeOutline();\n        targetOutline =  targetElement.querySelector('.outline') ;\n      }\n      let subject = UI.rdf.sym(url);\n      // let wantedPane = obj && obj.pane ?panes.byName(obj.pane) :null;\n      let wantedPane = obj && obj.pane ?obj.pane :null;\n      let plugin = obj ?obj.plugin :\"\";\n      plugin ||= \"\";\n      let displayTarget = obj ?obj.displayTarget :\"\";\n      if(plugin.match(/ProfileEditor/)) wantedPane = \"editProfile\";\n      if(plugin.match(/PreferencesEditor/)) wantedPane = \"basicPreferences\";\n      wantedPane = wantedPane ?panes.byName(wantedPane) :null;\n      const params = new URLSearchParams(location.search)\n      url = url.uri ?url.uri :url;\n      params.set('uri', url);\n      //setHistory(window.orgin+'/cm/?uri='+url);\n      let thisApp = '/cm/'\n      window.outliner.GotoSubject(subject,true,wantedPane,true,null,targetOutline);\n//      window.history.replaceState({}, '', `${thisApp}?${params}`);\n      return targetOutline;\n      function makeOutline(){\n        let div = document.createElement('DIV');\n        div.classList.add('TabulatorOutline');\n        let table = document.createElement('TABLE');\n        table.classList.add('outline');\n        div.appendChild(table);\n        return div;\n      }\n  },\n  Form : async(subject,targetSelector,forceReload)=>{\n    let uri = subject.doc ?subject.doc() :subject;\n    if(uri.value) uri = uri.value;\n    const form = await (await new Form()).render({ form:subject.value });\n    if(targetSelector){\nif(!targetSelector.startsWith('#')) targetSelector = '#'+targetSelector;\n      document.querySelector(targetSelector).innerHTML = \"\";\n      document.querySelector(targetSelector).appendChild(form);\n      // return await this.showIframeSrcDoc( form.outerHTML, targetSelector );\n      // let src =  \"showForm.html?uri=\" + encodeURI(uri) ;\n      // return this.showIframeSrc( src, targetSelector );\n    }\n    return form;\n  },\n  SparqlQuery : async(subject,targetSelector,forceReload)=>{\n    let e = (UI.store.any(subject,this.UIO('endpoint'),null)||\"\").value;\n    let q = (UI.store.any(subject,this.UIO('query'),null)||\"\").value;\n    q = q.replace(/\\$\\{[^\\}]*\\}/g,'');\n    let table = (new Table()).render({\n      parts : await (new Sparql()).sparqlQuery(e,q,forceReload),\n      cleanNodes : true,\n      sortOn : 'term'\n    });\n    if(targetSelector) {\n      document.querySelector(targetSelector).innerHTML=\"\";\n      document.querySelector(targetSelector).appendChild(table);\n    }\n    return table;\n  },\n  DataTemplate : async(subject,targetSelector,store)=>{\n    store ||= UI.store;\n    let query =  this.getUIterm(subject,'query');\n    let endpoint =  this.getUIterm(subject,'endpoint');\n    let template = this.getUIterm(subject,'template');\n    let data = await (new Sparql()).sparqlQuery(endpoint,query,store);\n    let interpolated = \"\";\n    for(let row of data.reverse()){\n      interpolated += template.interpolate(row);\n    }\n    if(targetSelector) {\n      this.showIframeSrcDoc(interpolated,subject,targetSelector);\n    }\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = interpolated;\n    return div;\n  },\n  PageDefinition : async(subject,targetSelector)=>{\n    subject = this.getMainSubject(subject);\n    let DM = new DOMParser();\n    let XS = new XMLSerializer();\n    let templateURL = this.getUIterm(subject,'pageTemplate');\n    let templateInfo = await this.loadFile(templateURL)\n    let dom = DM.parseFromString( templateInfo.body,\"text/html\");\n//alert( XS.serializeToString(dom) );\n    let parts =  UI.store.match(subject,this.UIO('component'));\n    for(let p of parts){\n      p=p.object;\n      let component = \"\";\n      let label, url;\n        label = this.getObject(p,this.UIO(\"label\"));\n        url = this.getObject(p,this.UIO(\"href\"));\n/*\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      for(let pstmt of p){\n        if(pstmt.predicate.value.match(\"label\")) label = pstmt.object.value;\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      }\n*/\n      let i = this.fileInfo(url);\n      if(i && label)\n        dom.querySelector('#'+label).appendChild( await this.show(i.contentType,url) );\n    }\n    dom = XS.serializeToString(dom);    \n    if(targetSelector) await this.showIframeSrcDoc(dom,url,targetSelector);\n    return dom;\n/*\n    let div = document.createElement(\"DIV\");\n    div.innerHTML = this.getUIterm(subject,'template');\n    let x = this.getUIterm(subject,'template');\nalert(x)\n    let parts =  this.getUIterm(subject,'parts');\n    for(let p of parts){\n      let component = \"\";\n      let label, url;\n      for(let pstmt of p){\n        if(pstmt.predicate.value.match(\"label\")) label = pstmt.object.value;\n        if(pstmt.predicate.value.match(\"pagePart\")) url = pstmt.object.value;\n      }\n      let type = this.findType(url);\n      div.querySelector('#'+label).appendChild( await this.show(type,url) );\n    }\n    if(targetSelector) await this.showIframeSrcDoc(div.innerHTML,targetSelector);\n    return div;\n*/\n  },\n  rdf : async (uri,string,targetSelector,forceReload,obj) => {\n    if(obj.dataSourceType){\n        return await this._show[obj.dataSourceType](uri,string,targetSelector,forceReload,obj);\n    }\n    try {\n      let mainSubject = UI.rdf.sym( uri.match(/\\#/) ?uri :uri+\"#this\" );\n      let node = mainSubject;\n      await this.crossLoad(uri,string,forceReload);\n      let subjectType = this.getUItype(mainSubject);\n      if(subjectType && subjectType.match(/(Form)/)) {\n//OLD      if(subjectType && this._show[subjectType]) {\n        return await this._show[subjectType](mainSubject,targetSelector,forceReload);\n      }\n      else {\n        return await this._show.SolidOSLink(UI.rdf.sym(uri),targetSelector,forceReload,obj);\n      }\n      let subjects = UI.store.each(null,null,null,node.doc());\n      let visitedSubject = {}\n      let str = \"\";\n      for(let subject of subjects){\n        if(visitedSubject[subject.value]===1) continue;\n        visitedSubject[subject.value]=1;\n        str += `<br><div style=\"font-weight:bold\">${this.mungeLabel(subject)}</div>`;\n        let stmts = UI.store.match(subject,null,null,node.doc());\n        for(let stmt of stmts){\n          let p = this.mungeLabel(stmt.predicate);\n          let o = stmt.object.value;\n          str += `&nbsp;&nbsp;&nbsp;<b>${p}</b> : ${o}<br />`\n        }\n      }\n      if(targetSelector) {\n        return this.showIframeSrcDoc(str,uri,targetSelector);\n      }\n      let div = document.createElement(\"DIV\");\n      div.innerHTML = str;\n      div.style.width=\"640px;\";\n      return div;\n    } catch(e) { alert(e); return e; }\n  },\n}\n\nmungeHash(uri){\n  return UI.rdf.sym( uri.match(/\\#/) ?uri :uri+\"#this\" );\n}\nasync dataTemplate2Iframe(mainSubject,targetSelector){\n  let query =  this.getUIterm(mainSubject,'query');\n  let endpoint =  this.getUIterm(mainSubject,'endpoint');\n  let template = this.getUIterm(mainSubject,'template');\n  let data = await (new Sparql()).sparqlQuery(endpoint,query,UI.store);\n  let interpolated = \"\";\n  for(let row of data.reverse()){\n    interpolated += template.interpolate(row);\n  }\n  this.showIframeSrcDoc(interpolated,mainSubject,targetSelector);\n  return interpolated;\n}\nasync template2Iframe(mainSubject,targetSelector){\n       let queryURL =  this.getUIterm(mainSubject,'query');\n        await UI.store.fetcher.load(queryURL);\n        let querySubject = UI.rdf.sym(queryURL+\"#this\");\n        let endpoint =  this.getUIterm(querySubject,'endpoint');\n        let query =  this.getUIterm(querySubject,'query');\n        let before =  this.getUIterm(mainSubject,'before');\n        let beforeQueryURL =  this.getUIterm(mainSubject,'beforeQuery');\n        await UI.store.fetcher.load(beforeQueryURL)\n        let beforeQuerySubject = UI.rdf.sym(beforeQueryURL+\"#this\");\n        let beforeEndpoint=this.getUIterm(beforeQuerySubject,'endpoint');\n        let beforeQuery=this.getUIterm(beforeQuerySubject,'query');\n        let beforeData = await (new Sparql()).sparqlQuery(beforeEndpoint,beforeQuery,UI.store);\n        before = before.interpolate(beforeData[0])\n        let data = await (new Sparql()).sparqlQuery(endpoint,query,UI.store);\n        let recurring =  this.getUIterm(mainSubject,'recurring');\n        let after =  this.getUIterm(mainSubject,'after');\n        let middle = \"\";\n        for(let row of data.reverse()){\n          middle += recurring.interpolate(row);\n        }\n        let interpolated = before + middle + after;\n        this.showIframeSrcDoc(interpolated,targetSelector);\n        return interpolated;\n}\nmakeIframe(){\n  let iframe = document.createElement('IFRAME');\n  iframe.style = \"height:100%;width:100%;border:none\";\n  return iframe;\n}\nshow_iframe(iframe,targetSelector){\n  document.querySelector(targetSelector).innerHTML=\"\";\n  document.querySelector(targetSelector).appendChild(iframe);\n}\nshowIframeSrc(src,targetSelector){\n  let iframe = this.makeIframe();\n  iframe.src = src;\n  if(targetSelector) this.show_iframe(iframe,targetSelector);\n  else return iframe;\n}\nshowIframeSrcDoc(content,uri,targetSelector){\n  let iframe = this.makeIframe();\n   content = content.replace(/X-Frame-Options/g,'');\n   uri = new URL(uri);\n   const b = `<base href=\"${uri.origin}${uri.pathname}\">`; // <base target=\"_BLANK\" />`;\n   iframe.srcdoc = `<body>${b}${content}</body>`\n   iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n   this.show_iframe(iframe,targetSelector);\n}\n\n  /* makeSelector(options,onchange,selected,targetSelector,size,)\n       options : array\n       onchange : function\n       selected : string,      // must be in options array\n       targetSelector : string // = a css selector e.g. \"#foo .bar\"\n     returns an HTML select element\n   */\n  makeSelector(options,onchange,selected,targetSelector,size){\n    let selectEl = document.createElement('SELECT');\n    for(let option of options){\n      let value,label;\n      if(typeof option===\"string\") value = label = option;\n      else {\n        value = option[0]\n        label = option[1]\n      }\n      label=(label||value).replace(/^http:\\/\\//,'').replace(/^https:\\/\\//,'');\n      if(!label.endsWith(\"/\"))\n         label = label.replace(/.*\\//,'')\n      if(!label || !option) continue;\n      label ||= \"/\";\n      let optionEl = document.createElement('OPTION');\n//      optionEl.innerHTML = option.replace(/http[s]*:\\/\\/[^\\/]*\\//,'') || option;\n      optionEl.value = optionEl.title = value;\n      optionEl.innerHTML = label;\n      selectEl.appendChild(optionEl);\n    }\n\n    /* HIGHLIGHT SELECTED */\n    if(selected) selectEl.value = selected;\n    selectEl.value ||= selectEl.childNodes[0].value;\n\n//    selectEl.addEventListener('click',async(e)=>{\n//      onchange(e.target.value)\n//    })\n    selectEl.addEventListener('change',async(e)=>{\n      onchange(e.target.value)\n    })\n    if(size) selectEl.size=size;\n    if(targetSelector) {\n      let targetEl = document.querySelector(targetSelector)\n      targetEl.innerHTML = \"\"\n      targetEl.appendChild(selectEl);\n    }\n    return selectEl;\n  }\n  getParent(url){\n    let parent = url.replace(/\\/$/,'').replace(/\\/[^\\/]*$/,'/');\n    return parent;\n  }\n  fileInfo(url){\n    if(!url) return;\n    if(typeof url!=\"string\") url = url.url || url.uri;\n    let newu;\n    try{ newu = new URL(url); }\n    catch(e){console.log(77,url,e); return {} };\n    let file = newu.pathname.replace(/.*\\//,'').replace(/\\.[^\\.]*$/,'');;\n    file = file===newu ?\"\" :file;\n    let ext = newu.pathname.replace(/.*\\//,'').replace(/.*\\./,'');\n    ext = ext===file ?\"\" :ext;\n    /*\n     * type is  the Ace-Editor type e.g. turtle, html, markdown\n     * contentType is Iana media type e.g. text/turtle, etc.\n    */\n    let type,contentType;\n    if(ext.match(/(md)|(markdown)/)) type = \"markdown\";\n    if(ext.match(/(dot|gv)/)) type = \"graphviz\";\n    if(ext.match(/(ttl|rdf|n3)/)) type = \"rdf\";\n    if(ext.match(/txt/)) { type=\"text\"; contentType=\"text/plain\" }\n    if(ext.match(/(html)|(css)|(js)/)) type = ext;\n    if(ext.match(/(gif|jpg|jpeg)/)) type = ext;\n    type ||= \"unknown\";\n    let path = newu.pathname.replace(/[^\\/]*$/,'');\n    file = decodeURI(file);\n    let isContainer = !file && path.endsWith(\"/\");\n    contentType = \"unknown\";    \n    if(isContainer) contentType = \"text/turtle\";\n    else if(window.mime) contentType = window.mime.getType(url);\n    let editable = contentType && !contentType.match(/(image|video|audio|unknown)/);\n    return {\n      url,\n      file,\n      path,\n      ext,\n      label : (file||path) + (ext ?\".\"+ext :\"\"),\n      editable,\n      type,         // markdown, graphviz, html, rdf ...\n      contentType,  // text/vnd.graphviz, text/turtle ...\n      host : newu.origin + \"/\",\n      isHidden : url.match(/\\/\\./) ?true :false,\n      isContainer,\n    }\n  }\n\n\nasync crossLoad(uri,string,forceReload){\n  if(forceReload) {\n//     UI.store.removeDocument(UI.rdf.sym(uri));\n  }\n  if(string) UI.rdf.parse(string,UI.store,uri,'text/turtle');\n  else await UI.store.fetcher.load(uri);\n  let i = this.fileInfo(uri);\n  i.contentType = \"text/turtle\";\n  i.type = \"rdf\";\n  i.editable = true;\n  return i;\n} \nasync loadFile(uri){\n  let fileInfo = this.fileInfo(uri);\n  try {\n     // OMIT CREDENTIALS NEEDED FOR MOST FETCHES\n     let response = await UI.store.fetcher.webOperation(\"GET\",uri,{credentials:\"omit\"});\n     if(response.ok) {\n       fileInfo.contentType = response.headers.get(\"Content-Type\");\n       fileInfo.editable = !fileInfo.contentType.match(/(image|video|audio|pdf|unknown)/);\n       fileInfo.body = response.responseText;\n       fileInfo.ok=response.ok\n     }\n     else alert(\"utils.loadFile() \"+response.status)\n     return fileInfo\n  }\n  catch(e) { alert(\"network loadFile() \"+e); return fileInfo }\n}\n\ngetUItype(subject){\n  subject = this.getMainSubject(subject);\n  let types = UI.store.each(subject,this.ISA,null);\n  for(let type of types){\n    if(type.value.match(/ui\\#/)) return type.value.replace(/.*\\#/,'');\n  }\n}\ngetUIterm(subject,term){\n   subject = this.getMainSubject(subject);\n   let val = UI.store.each(subject,this.UIO(term));\n   let newval = [];\n   if(val && val[0] && val[0].termType===\"Collection\"){\n     for(let e of val[0].elements){\n        newval.push( UI.store.match(e) );\n     }\n     return newval;\n   }\n   return val[0] ?val[0].value :val;\n}\ngetMainSubject(uri){\n  uri = uri.uri ?uri.uri :uri;\n  uri = uri.match(/\\#/) ?uri :uri+\"#this\";\n  try { return UI.rdf.sym(uri) }\n  catch(e){console.log(e)}\n}\nmungeLabel = (label)=>{ \n if(!label)return \"\";\n if(label.termType===\"Literal\"){\n    return `\"${label}\"`;\n  }\n  label = label.value.replace(/.*\\#/,'').replace(/.*\\//,'');\n  if(label===\"type\") label = \"a\";\n  return label;\n}\nmungeURL = (url)=>{\n  let URL = document.getElementById(url).value;\n  if(!URL.startsWith('http')){\n    URL = window.location.href.replace('index.html','')+URL;\n  }\n  return URL;\n}\nPUT = async (url,content,cType)=>{\n  url = url.replace(/\\#[^\\#]*$/,'')\n  try {\n    let response = await UI.store.fetcher.webOperation('PUT',url,{\n      contentType : cType,\n      body: content,\n    });\n    return(response);\n  }\n  catch(e) {return e;}\n}\n}\n\n/* https://stackoverflow.com/a/41015840/15781258\n * usage :\n *   const template = 'Hello ${var1}!';\n *   const data     = { var1: 'world'};\n *   const interpolated = template.interpolate(data);\n */\nString.prototype.interpolate = function(params) {\n  const names = Object.keys(params);\n  const vals = Object.values(params);\n  return new Function(...names, `return \\`${this}\\`;`)(...vals);\n}\n","import {CU} from    '../utils.js';\n\n/*\n *  myFeed = new Feed(solidUI,feedUri)\n *\n *  feedSelector()\n *  htmlDiv = feed.items2list() which calls feed.fetchAndParse()\n\nproxy\nhref || link\ndisplayType\nstandAlone\nlabel\n  selBackground\n  selColor\n  height\n  width\n\n */\n\n/*\n\n      \n*/\n\nexport class Feed {\n\nasync makeFeedSelector(topTopic,targetSelector,displayArea){\n  self = this;\n  self.displayArea = displayArea;\n\n  const u = new CU();\n  const ui = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n  const skos = UI.rdf.Namespace(\"http://www.w3.org/2004/02/skos/core#\");\n  const rdf = UI.rdf.Namespace(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\");\n  let targetElement = document.body;\n\n  await u.crossLoad(topTopic);\n  topTopic = UI.rdf.sym(topTopic);\n//  let topicNodes = UI.store.each(null,bookm('subTopicOf'),topTopic)\n//  let topicNodes = UI.store.each(topTopic,skos('memberList'))\n//  let topicNodes = UI.store.each(topTopic,ui('feedTopicList'))\n  let topicNodes = UI.store.each(null,rdf('type'),ui('FeedTopic'))\n//  topicNodes = topicNodes[0].elements;\n  let topics = [];\n  for(let n of topicNodes){\n     topics.push([n.value, UI.store.any(n,ui('label')).value]);\n  }\n  let onchange = async(e)=>{await collectionSelector(e)};\n  let topicSelector = u.makeSelector(topics,onchange,null,null,3);\n  topicSelector.id=\"topicSelector\";\n  if(targetSelector){\n    targetElement = typeof targetSelector===\"string\" ?document.querySelector(targetSelector) :targetSelector;\n    targetElement.innerHTML=\"\";\n    let c = u.newElement('DIV','collectionHolder') ;\n    let i = u.newElement('DIV','itemSelector') ;\n    targetElement.appendChild(topicSelector);\n    targetElement.appendChild(c);\n    targetElement.appendChild(i);\n    await collectionSelector(topics[0][0],targetElement);\n  }\n  let selectors = targetElement.querySelectorAll('#feedMenu select')\n  for(let s of selectors){\n    s.style=\"display:block; width:100%;  padding:0.5rem; margin-bottom:1rem; border-radious:0.02rem;\";\n  }\n//  return topicSelector;\n\n  async function collectionSelector(topTopic,targetElement){\n    if(typeof topTopic === \"string\") topTopic = UI.rdf.sym(topTopic);\n    await u.crossLoad(topTopic);\n//    let topicNodes = UI.store.each(null,bookm('hasTopic'),topTopic)\n//    let topicNodes = UI.store.each(topTopic,skos('memberList'))\n    let topicNodes = UI.store.each(null,skos('broader'),topTopic)\n//    topicNodes = topicNodes[0].elements;\n    let collections = [];\n    for(let n of topicNodes){\n       let href = UI.store.any(n,ui('href')).value;\n       let label = UI.store.any(n,ui('label')).value;\n       collections.push([href,label]);\n    }\n    let onchange = async(e)=>{\n       await itemSelector(e)\n    };\n    let colSelector = await u.makeSelector(collections,onchange,null,null,7);\n    colSelector.id=\"collectionSelector\";\n    let el = (targetElement||document).querySelector('#collectionHolder');\n    el.innerHTML=\"\";\n    el.appendChild(colSelector);\n    let selectors = el.querySelectorAll('#feedMenu select')\n    for(let s of selectors){\n      s.style=\"display:block; width:100%;  padding:0.5rem; margin-bottom:1rem; border-radious:0.02rem;\";\n    }\n    await itemSelector(collections[0][0]);\n  }\n\n  async function itemSelector(topTopic){\n    let elm = document.getElementById('itemSelector');\n    elm.innerHTML=\"\";\n    elm.appendChild( await self.items2list({href:topTopic})  );\n\n  }\n\n}\n\n  async fetchAndParse(feedUri,proxy){\n\n    // fetch feed URI & parse into a Dom structure\n    //\n    proxy = typeof proxy===\"undefined\" ?\"https://solidcommunity.net/proxy?uri=\" :proxy;\n    feedUri = proxy + encodeURI( feedUri );\n\n    let response = await fetch( feedUri )\n    let feedContent = await response.text();\n    const domParser = new window.DOMParser();\n    let feedDom = domParser.parseFromString(feedContent, \"text/xml\")\n\n    // find items (RSS) or entries (Atom)\n    //\n    let items = feedDom.querySelectorAll(\"item\") || null;\n    items = items.length<1 ?feedDom.querySelectorAll(\"entry\") :items;\n\n    // parse items\n    //\n    let parsedItems=[];\n    items.forEach( el => {\n\n      // find item link, account for specific kinds of quirks\n      //\n      let link = el.querySelector(\"link\").innerHTML;\n      // vox\n      if(!link) link = el.querySelector('link').getAttribute('href');\n      // reddit\n      if(!link || link.match(/ /)){\n        link = el.querySelector('content').innerHTML.replace(/.*\\[link\\]/ ,'').replace(/a href=\"/,'').replace(/\"&gt;.*/,'').replace(/.*&lt;/,'');\n      }\n      // engadget\n      if(!link.match(/^http/)) link = link.replace(/.*\\[CDATA\\[/,'').replace(/\\]\\]\\>$/,'');\n\n      // always use https, not http\n      link = link.replace(/^http:/,'https:');\n\n      // get the title\n      let title = el.querySelector(\"title\").innerHTML;\n      title = title.replace(/^\\<\\!\\[CDATA\\[/,'');\n      title = title.replace(/\\]\\].*\\>/,'').trim();\n\n      parsedItems.push({title,link});\n    });\n    return parsedItems;\n  }  // END OF fetchAndParse()\n\n\n  async items2list(json,solidUI){\n\n    let elm = document.getElementById('itemSelector');\n    elm.innerHTML=\"\";\n    json.proxy ||= \"https://solidcommunity.net/proxy?uri=\";\n    let items = \"\";\n    let externalLinkIcon = UI.icons.iconBase+`/noun_189137.svg`;\n    externalLinkIcon = `<img src=\"${externalLinkIcon}\" style=\"width:1em;height:1em;display:inline-block; padding-left:0.4em;opacity:1\">`;\n    for(let i of await this.fetchAndParse((json.href||json.link),json.proxy)){\n      if(json.displayTarget===\"window\"){\n/*\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\">\n            <a href=\"${i.link}\" target=\"_BLANK\" property=\"rss:title\">\n              ${i.title}\n            </a>\n          </li>\n        `;\n*/\n      }\n      else {\n        items += `\n          <li about=\"${i.link}\" typeof=\"rss:item\" style=\"display:none;background:green;border:1px solid grey;\">\n            <a href=\"${json.proxy+i.link}\" target=\"#display\" property=\"rss:title\" style=\"background:#999;display:inline-block\">\n               ${i.title}\n            </a>\n            <a href=\"${i.link}\" class=\"skipMunge\" target=\"_BLANK\" class=\"external\">${externalLinkIcon}</a>\n          </li>\n        `;\n      }\n    }\n    const wrapper = document.createElement('DIV');\n    wrapper.property = \"xmlns:rss\";\n    wrapper.content = \"http://purl.org/rss/1.0/\";\n    if(json.standAlone) {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n          <b property=\"rss:title\">${json.label}</b>\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n\n    wrapper.querySelector('B').style=`padding:1em;padding-right:0;background:${json.selBackground};color:${json.selColor};border:1px solid grey;width:100%;display:inline-block`;\n    }\n    else {\n    wrapper.innerHTML = `\n        <div about=\"${json.href}\" typeof=\"rss:channel\">\n<!--          <div property=\"title\" style=\"background:#d0d0d0;padding:1em;\">${json.label}</div>-->\n          <ul typeof=\"rss:items\" style=\"display:table\">\n            ${items}\n          </ul>\n        </div>\n    `;\n    wrapper.querySelector('UL').style=`padding:0;padding-left:0;list-style:none;margin-top:0;width:100%;`;\n    }\n    wrapper.querySelector('UL').style=`padding:0;border:1px solid grey;list-style:none;margin-top:0;width:100%;height:${json.height};overflow-y:auto;`;\n    let anchors = wrapper.querySelectorAll('A');\n    for(let anchor of anchors){\n      anchor.style=\"text-decoration:none;\"\n      anchor.onclick = async (e) => {\n        if(e.target.parentNode.classList.contains('skipMunge')) return;\n        e.preventDefault();\n        let iframe = document.createElement('IFRAME');\n        iframe.style=\"height:100%;width:100%;border:none\";\n        let  uri = e.target.href\n        let r = await window.fetch(uri);\n        let content = await r.text();        \n        content = content.replace(/X-Frame-Options/g,'');\n        uri = uri.replace(/^.*proxy\\?uri=/,'');\n        uri = new URL(uri);\n        const b = `<base href=\"${uri.origin}/\"><base target=\"_BLANK\"><style>body{background:white !important}</style>`;\n        iframe.srcdoc = `<body>${b}${content}</body>`\n        iframe.scrollTo({ top: 0, behavior: \"smooth\" });\n        let area = document.querySelector(self.displayArea);\n        area.innerHTML = \"\";\n        area.appendChild(iframe);        \n      }\n    }\n    let listItems = wrapper.querySelectorAll('LI');\n    for(let li of listItems){\n      li.style=\"padding:0.5em;border-bottom:1px solid grey\";\n    }\n    if(json.width) wrapper.style.width = json.width;\n    return wrapper;\n  }\n}\n\n  async function initFeeds(){\n    let elms = document.querySelectorAll('[data-suicFeedMenu]');\n    for(let e of elms){\n      let topTopic = e.dataset.suicfeedmenu;\n      if(topTopic.startsWith('/')) topTopic = window.origin + topTopic;\n      let displayArea = e.dataset.display;\n      let menuArea = '#' + e.id;\n      const myFeed = new Feed();\n      await myFeed.makeFeedSelector(topTopic,menuArea,displayArea);\n    }\n  }\n  initFeeds();\n","export class Accordion {\n  async render(solidUI,json) {\n    const parts = json.parts;\n    const accordion = solidUI.createElement('DIV','accordion');\n    if(!parts || !parts.length) return accordion;\n    for(let row of parts){\n       let item = solidUI.createElement( 'DIV' );\n       let rowhead = solidUI.createElement( 'DIV','' );\n       let name = solidUI.createElement('SPAN','',row.label || row.topic) ;\n       name.style.display=\"table-cell\";\n       name.style.width=\"100%\";\n       rowhead.appendChild(name);\n       let caret = solidUI.createElement('SPAN','caret-down','\\u2304') ;       \n       caret.style.display=\"table-cell\";\n       caret.textAlign=\"right\";\n       rowhead.appendChild(caret);\n       rowhead.style.backgroundColor = json.unselBackground;\n       rowhead.style.color = json.unselColor;\n       rowhead.style.padding=\"0.75em\";\n       rowhead.style.border=\"1px solid grey\";\n       rowhead.style.cursor = \"pointer\";\n       let rowContent = solidUI.createElement( 'DIV');\n       if(row.content) rowContent.innerHTML = row.content;\n       else {\n        console.log(json)\n        for(let i=0;i<row.linkLabel.length;i++){\n          let label = row.linkLabel[i];\n          let link = row.linkUrl[i];\n          let button=solidUI.createElement('BUTTON','',label);\n          button.setAttribute('data-link',link) ;\n          button.style.width=\"100%\";\n          button.style.border=\"none\";\n          button.style.background=\"transparent\";\n          button.style.marginBottom=\"0.25em\";\n          button.style.cursor=\"pointer\";\n          button.onclick = (e) => {\n            showByClass(e);\n          }\n          rowContent.appendChild(button);\n        }\n       }\n       rowContent.style.padding=\"0.75em\";\n       rowContent.style.border=\"1px solid grey\";\n       rowContent.style.borderTop=\"none\"; \n       rowContent.style.display = \"none\";\n       rowhead.onclick = (e)=>{\n         let showing = rowContent.style.display === \"block\" ;\n         let items = accordion.children;\n         for(let i of items) {\n           i.children[1].style.display=\"none\";\n         }\n         rowContent.style.display = showing ?\"none\" :\"block\";\n       }\n       rowContent.style.backgroundColor = json.background;\n       rowContent.style.color = json.color;\n       item.appendChild(rowhead);\n       item.appendChild(rowContent);\n       item.style.marginBottom = \"1em\";\n       accordion.appendChild(item);\n    }\n    solidUI.simulateClick(accordion.querySelector('DIV DIV DIV'))\n    return await solidUI.initInternal(accordion);  \n  }\n}\n","import {createLoginBox,applyProfile} from '../databrowser.js';\n\nexport class App {\n  async render(solidUI,app){\n\n    // GET/SET DEFAULTS\n    //\n    app = solidUI.setDefaults(app);\n    if(app.fullPage){\n      window.addEventListener('resize',()=>{\n         app = mainHeight(app);\n         let mm = document.getElementById('mainMain')\n         let tab = document.getElementById('suicTabulator')\n         if(mm) mm.style.height = app.mainHeight;\n         if(tab) tab.style.height = app.mainHeight;\n      });\n      document.body.style.overflow=\"hidden\";\n    }\n\n    // FIND NUMBER OF PIXELS IN 1 REM - VARIES WITH BROWSER/USER SETTINGS\n    function rem2px(){\n      let el = document.createElement('DIV');\n      el.style=\"height:1rem\";\n      document.body.appendChild(el);\n      let remSize = el.clientHeight;\n      document.body.removeChild(el);\n      return(remSize);\n    }\n    // SET BODY HEIGHT TO WINDOW HIEGHT MINUS HEADER + MENU \n    function mainHeight(app){\n      let rem = rem2px();\n      app.menuHeight = 2*rem;\n      app.headerHeight = 6*rem;\n      window.SolidAppContext = { scroll : app.headerHeight }\n      app.mainHeight = ( window.innerHeight-app.headerHeight )\n      app.headerHeight = app.headerHeight.toString()+'px';\n      app.mainHeight = app.mainHeight.toString()+'px';\n      return app;\n    }\n    app = mainHeight(app);\n\n    // DISPLAY HEADER IF app.logo OR app.title\n    //\n    app.logo ||= \"\";\n    app.title ||= \"\";\n    app.headerHeight = ( app.logo || app.title || app.adminMenu ) ?app.headerHeight : \"0\";\n\n    // DISPLAY MENU AT TOP OR LEFT DEPENDING ON app.orientation\n    //\n    app.leftMenu = \"\" ;\n    app.siteMenu = \"\" ;\n    if(app.orientation===\"horizontal\"){\n      app.leftMenuStyle = \"display:none\";\n    }\n    else {\n      app.leftMenuStyle = `\n        display:block;\n        width:36vw !important;\n        height:${app.mainHeight};\n        overflow-y:scroll;\n        margin:0;\n        padding:0;\n      `;\n    }\n\n    let appString = await this.getHTML(app);\n    let element = solidUI.createElement('SPAN','',appString);\n    let solidLogo = element.querySelector('#solidLogo')\n    if(solidLogo) solidLogo.src = 'https://solidproject.org/assets/img/solid-emblem.svg';\n\n//    if(typeof app.currentPodMenu==='object')app.currentPodMenu.target = element.querySelector('.main');\n    let menuElement = element.querySelector(\"#currentPodMenu\");\n    if( app.orientation===\"vertical\"){\n      menuElement = element.querySelector(\"NAV\");\n    }\n    const menu = await solidUI.processComponent(menuElement,app.currentPodMenu);\n    if(menu && menuElement) menuElement.appendChild(menu);\n    if(app.userMenu) {\n      const amenu = await solidUI.processComponent(menuElement,app.userMenu);\n      let umenu = element.querySelector('#userMenu')\n      if( umenu) umenu.appendChild(amenu);\n    }\n    if(app.loginBox) await createLoginBox(element);\n    await applyProfile(element); // munge site menu\n    if(app.initialContent) {\n      let content = await solidUI.getComponentHash(app.initialContent);\n      content = content.content.interpolate(solidUI.vars)\n      let main = element.querySelector('#mainMain');\n      if(main) main.innerHTML = content;\n    }\n    return element;\n  }\n\nrem2vw(rem) {\n  const viewportWithoutScroll = document.body.clientWidth;\n  const pxPerVw = 100/viewportWithoutScroll;\n  return( rem * pxPerVw);  \n}\nrem2vh(rem) {\n  const viewportWithoutScroll = window.innerHeight;\n  const pxPerVw = 100/viewportWithoutScroll;\n  return( rem * 16 * pxPerVw);  \n}\n  async getHTML(app){ \n     app.leftColumnColumnStyle ||= \"display:none\";\n     app.leftColumnColumnMenu ||= \"\";\n     app.siteMenu ||= \"\";\n     app.leftColumnColumnStyle ||= \"\";\n     app.iframeSrc ||= \"\";\n     app.iframeContent ||= \"\";\n     app.logoStyle = `\n             height: 3rem;\n            display: inline-block;\n       padding-left: 0.5rem;\n     `;\n     app.titleStyle = `\n       display:inline-block;\n       vertical-align:top; align:left;\n       font-size: 2rem;\n       padding-top: 0.4rem;\n       padding-left:1rem;\"\n     `;\n     app.appStye = `\n              display: flex;\n       flex-direction: column;\n                width: 100%;\n               height: 100%;\n     `;\n      app.mainStyle = `\n        padding:0rem;\n        width:100%;\n        overflow:scroll;\n        position:absolute;\n        top:${app.headerHeight} !important;\n        left:0;\n        height:${app.mainHeight};\n     `;\n     if(app.theme) {\n        try {      \n//          let response = await panes.UI.store.fetcher.webOperation('GET',app.theme);\n          let response = await window.fetch(app.theme);\n          let content = await response.text();\n          content = solidUI.fillTemplate(content,[app]);\n          return await content;\n        }\n        catch(e){console.log(e)}\n     }\nreturn \"\";\n     return `\n<!--APP-->\n<div class=\"solid-uic-app solid-main-app\">\n\n    <!--BANNER-->\n    <div class=\"app-banner\">\n\n        <!--USER IMAGE & NAME-->  \n        <img id=\"currentPodLogo\" src=\"\">\n        <div id=\"currentPodTitle\"></div>\n\n\n        <!--ADMIN MENU, LOGIN, SOLID LOGO-->\n        <div style=\"background:${app.unselBackground};text-align:center;position:absolute;top:0.5rem;right:7rem;\"><span id=\"adminMenu\" style=\"white-space: nowrap;\"></span> </div>\n        <div id=\"loginArea\"></div>\n        <img src=\"${app.logo}\" style=\"height:7rem;position:absolute;top:-0.5rem;right:-0.5rem\">\n\n        <!--PUBLIC MENU-->\n        <div id=\"currentPodMenu\" style=\"white-space:nowrap;position:absolute;top:3rem;left:7.4rem;\">${app.siteMenu}</div>\n\n    </div><!--BANNER-->\n\n    <!--MAIN WRAPPER-->\n<!--    <div style=\"display:flex;flex-direction:row;width:100%;height:100%;\"> -->\n    <div style=\"width:100%;height:100%;min-height:0;\">\n\n        <!-- LEFT COLUMN MENU (IF EXISTS) -->\n        <div class=\"leftColumn\" style=\"${app.leftMenuStyle}\">${app.leftMenu}</div>\n\n        <!--MAIN MAIN-->\n        <div id=\"mainMain\" style=\"min-height:0;${app.mainStyle}\"></div>\n\n        <!--MAIN TABULATOR-->\n            <div class=\"TabulatorOutline\" role=\"main\" id=\"suicTabulator\" style=\"${app.mainStyle}\">\n                <table id=\"outline\"></table>\n                <div id=\"GlobalDashboard\"></div>\n            </div>\n\n    </div><!--MAIN WRAPPER-->\n\n</div><!--APP-->\n<style>\n  #suicTabulator{\n    top:${app.headerHeight} !important;\n    overflow:scroll !important;\n    min-height: 0; \n  }\n  #suicTabulator table {\n    background:#7e7e7e !important;\n    color:white !important;\n  }\n  .solid-main-app {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n  }\n  .solid-main-app .app-banner {\n     width:100%;\n     display:flex;\n     background:${app.unselBackground};\n     color:black;\n  }\n  .solid-main-app input[type=\"button\"]:hover {\n    background:${app.selBackground};\n    color:${app.selColor};\n  }\n  .solid-main-app #currentPodTitle {\n    left:8rem;\n    font-size:1.3rem;\n    position:absolute;\n    top:1rem;\n  }\n  .solid-main-app #currentPodLogo {\n    height:${app.headerHeight}\n  }\n</style>\n\n    `;\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","export class Menu {\n\n  async render( solidUI, json,element ){\n    if(typeof json==='string'){\n      json = await solidUI.processComponent(element,json);\n    }\n    let nav     = solidUI.createElement('NAV','solid-uic-dropdown-menu')\n    let topUL   = document.createElement('UL')\n    let mainDisplay = document.createElement('DIV')\n//    nav.style.width=\"100%\";\n    nav.style.background=json.unselBackground;\n    nav.style.color=json.unselColor;\n//    nav.style.paddingLeft=\"1rem\";\n//    nav.style.paddingRight=\"1em\";\n//    topUL.style.width=\"100%\";\n    mainDisplay.style.width=\"100%\";\n    mainDisplay.style.backgroundColor = json.background;\n    mainDisplay.style.color = json.color;\n    mainDisplay.innerHTML=\"\";\n    mainDisplay.classList.add('main');\n    nav.appendChild(topUL)\n    for(var i of json.parts){\n      topUL.appendChild( await this.renderMenuItem(i,json,mainDisplay) )\n    }\n    const wrapper = solidUI.createElement('SPAN');\n    nav.style.display=\"inline-block\";\n    nav.style.textAlign=json.position;\n    topUL.style.textAlign=json.position;\n    wrapper.appendChild(nav);\n    wrapper.appendChild(mainDisplay);\n    return(wrapper);\n  }\n\n  async renderMenuItem(i,json,mainDisplay){\n    if(i.menu && i.menu.type && i.menu.type === \"SparqlQuery\"){\n      let menu = await solidUI.processComponent(null,null,i.menu);\n      if(typeof menu===\"object\") i.parts = menu\n    }\n    const li = document.createElement('LI')\n    const sp =  document.createElement('SPAN')\n    sp.innerHTML = i.label\n    li.appendChild(sp)\n    li.style.cursor=\"pointer\"\n    li.style.display=\"inline-block\";\n    li.style.backgroundColor = json.unselBackground;\n    li.style.color = json.unselColor;\n    li.onmouseover = ()=>{\n      li.style.backgroundColor = json.selBackground;\n      li.style.color = json.selColor;\n    } \n    li.onmouseout = ()=>{\n      li.style.backgroundColor = json.unselBackground;\n      li.style.color = json.unselColor;\n    } \n    if(i.popout || !i.parts){\n// i.target=json.target;\n      /*\n       *  <li class=\"item\"><span>${i.label}</span></li>\n       */\n      li.classList.add('item')\n      li.name = i.href\n      const self = this\n/*\n      li.addEventListener('click',(e)=>{\n        window.displayLink(e,i,mainDisplay)\n      })\nWe can't easily override the eventListener later so use onclick instead.\n*/\n      li.onclick = (e)=>{\n        i.href = e.target.parentElement.name;\n        window.displayLink(e,i,mainDisplay)\n      }\n    }\n    else {\n      /*\n        <li class=\"caret\">\n          <span class=\"caret\" style=\"cursor:pointer;\">${i.title}</span>\n          <ul class=\"nested\">\n          </ul>\n        </li>\n      */\n      li.classList.add('caret')\n      let ul2 = document.createElement('UL')\n      li.appendChild(ul2)\n      ul2.classList.add('nested')     \n      for(var m in i.parts){\n        let newItem = i.parts[m]\n        if(typeof newItem==='object') newItem.target=json.target;\n        ul2.appendChild( await this.renderMenuItem(newItem,json,mainDisplay) )\n      }\n    }\n    return li\n  }\n}\n","export class Modal {\n\n/*\n<#MyModal>\n  a ui:Modal ;\n  ui:label           \"BUTTON_LABEL\" ;\n  ui:unselColor      \"BUTTON_COLOR\" ;\n  ui:unselBackground \"BUTTON_BACKGROUND_COLOR\" ;\n  ui:width           \"POPUP-BOX_WIDTH\" .\n\nModal.render({\n  label             // button label\n  unselColor        // button color\n  unselBackground   // button background color\n  width             // popup-box width\n  height            // popup-box height\n  content           // popup-box content string\n  iframe            // popup-box url for iframe\n});\n*/\n\n  async render (o,solidUI) {\n    let dom = o.dom || document;\n    let modal = document.createElement('SPAN');\n    if(o.targetSelector){\n      modal = dom.querySelector(o.targetSelector);\n    }\n    const s = _getCSS(o);\n    if(o.iframe){\n      let iframe = document.createElement(\"IFRAME\");\n      o.content = `<iframe src=\"${o.iframe}\" style=\"width:100%;height:90%;border:none\"></iframe>`;\n    }\n    modal.innerHTML = `\n      <button style=\"${s['button']}\" onclick=\"window.openModal(this)\">\n        ${o.label}\n      </button>\n      <div style=\"${s['.modal']}\">\n        <div style=\"${s['.modal-content']}\">\n          <div style=\"${s['.close']}\" onclick=\"window.closeModal(this)\">\n            &times;\n          </div>\n          ${o.content}\n        </div>\n      </div>\n    `;\n    if(solidUI) return await solidUI.initInternal(modal);  \n    else return modal;\n    return modal;\n  }\n}\n  window.openModal = function (element,action){\n    element.parentElement.children[1].style.display = \"block\" ;\n  }\n  window.closeModal = function (element,action){\n    element.parentElement.parentElement.style.display = \"none\" ;\n  }\n\n  function _getCSS(current){\n    return {\n    \"button\": `\n      background-color:${current.unselBackground};\n      color:${current.unselColor};\n      cursor:pointer;\n    `,\n    \".modal\": `\n      display: none; /* Hidden by default */\n      position: fixed; /* Stay in place */\n      left: 0;\n      top: 0;\n      width: 100%; /* Full width */\n      overflow: auto; /* Enable scroll if needed */\n      background-color: rgb(0,0,0); /* Fallback color */\n      background-color: rgba(0,0,0,0.8); /* Black w/ opacity */\n      height: 100%; /* Full height */\n      z-index:20000;\n    `,\n    \".modal-content\": `\n      background-color: #fefefe;\n      margin: 5% auto; /* 15% from the top and centered */\n      padding: 1rem;\n      border: 1px solid #888;\n      border-radius:0.5rem;\n      width: ${current.width};\n      height: ${current.height};\n    `,\n    \".close\": `\n      color:red;\n      text-align:right;\n      margin-bottom: 0.25rem;\n      font-size: 2rem;\n      font-weight: bold;\n      cursor:pointer;\n    `\n    }\n  }\n","export class SelectorPanel {\n\n  render(j){\n    const wrapper = document.createElement('SPAN');\n    wrapper.classList.add('solid-ui-component');\n     wrapper.style=\"display:flex;flex-direction:row;width:100%;height:${j.height}\"\n    const leftColumn = document.createElement('DIV');\n    leftColumn.style=\"margin-top:0; width:30vw;height:91vh;margin-top:0; min-height:min-content\";\n    const rightColumn = document.createElement('DIV');\n    rightColumn.style=`flex-grow:1;height:{j.height};max-height:100vh;`;\n    rightColumn.classList.add('main');\nrightColumn.style.background=\"ffe\";\n    let collectionSelector = document.createElement('DIV');\n    collectionSelector.style = `width:30vw;border:1px solid grey;border-bottom:none`;\n    collectionSelector.style.background=j.unselBackground;\n    collectionSelector.style.color=j.unselColor;\n    j.parts ||= j.dataSource.parts;\n    const firstOption = j.label || (j.parts[0]).label || j.parts[0];\n    collectionSelector.innerHTML = `\n       <div style=\"border-bottom:1px solid grey; padding:0.5em;cursor:pointer;\">\n        <span style=\"display:table-cell;width:100%\">${firstOption}</span><span style=\"display:table-cell;font-size:large;width:100%;text-align:right;\"></span>\n       </div>\n    `;\n    let collectionsList = document.createElement('DIV');\n    collectionsList.style = `width:30vw;border:1px solid grey;border-top:none;display:none`;\n    collectionSelector.querySelector('div').onclick=()=>{\n      collectionsList.style.display||=\"block\";     \n      if(collectionsList.style.display===\"block\") collectionsList.style.display=\"none\";     \n      else collectionsList.style.display=\"block\";     \n    }\n    for(let p of j.parts){\n      collectionsList.innerHTML += `\n         <a href=\"${p.link}\" style=\"text-decoration:none;display:block;border-bottom:1px solid grey; padding:0.5em;\" data-link=\"${p.link}\" data-type=\"${p.type}\">\n          ${p.label}\n         </a>\n      `;\n    }\n    for(let anchor of collectionsList.querySelectorAll('A')){\n      anchor.onclick = (e)=>{\n         e.preventDefault();\n         let el = e.target;\n         let link = {href:el.href,type:el.dataset.type,target:rightColumn};\n         el.parentElement.style.display=\"none\";\n         collectionSelector.querySelector('DIV SPAN').innerHTML = el.innerHTML;\n         itemsList.style.display=\"block\";      \n         itemsList.style.width=\"30vw\";      \n         displayLink(null,link,itemsList);\n         return false;\n      }\n    }\n    let itemsList = document.createElement('DIV');\n    itemsList.style = `height:100%;border:1px solid grey;overflow-y:scroll;width:30vw;`;\n    leftColumn.appendChild(collectionSelector);\n    leftColumn.appendChild(collectionsList);\n    leftColumn.appendChild(itemsList);\n    wrapper.appendChild(leftColumn);\n    wrapper.appendChild(rightColumn);\n    return wrapper;\n  }\n\n}\n\n/*\nwrapper\n  leftColumn\n    collectionSelector\n    collectionsList\n    itemsList\n  rightColumn\n    displayArea\n*/\n\n  \n","export class Tabs {\n  async render(solidUI,json) {\n    const parts = json.parts\n    const tabs = solidUI.createElement('DIV','solid-uic-tabs');\n    if(json.style) tabs.style = json.style;\n    const nav = solidUI.createElement('NAV');\n    if(json.orientation===\"vertical\")\n      nav.style.textAlign = \"right\";\n    else\n      nav.style.textAlign = json.position;\n    let mainDisplay = solidUI.createElement( 'DIV' );\n    mainDisplay.style.backgroundColor = json.background;\n    mainDisplay.style.color = json.color;\n    let r = 0;    \n    for(let row of parts){\n      r++;\n      let rowhead = solidUI.createElement( 'BUTTON',r,row.label );\n      rowhead.style.backgroundColor = json.unselBackground;\n      rowhead.style.color = json.unselColor;\n      rowhead.style.padding=\"0.75em\";\n      rowhead.style.border=\"1px solid grey\";\n      rowhead.style.cursor = \"pointer\";\n      let rowContent = solidUI.createElement( 'DIV',r,row.content );\n      rowContent.style.padding=\"0.75em\";\n      if(json.orientation===\"horizontal\") rowContent.style.border=\"1px solid grey\";  \n      rowContent.style.display = \"none\";\n      if(row.type===\"SolidOSLink\"){\n        let id = `tab-${r}-outline`;\n        rowContent.innerHTML = `\n          <div class=\"TabulatorOutline\" id=\"${id}-tabulator\" role=\"main\">\n            <table id=\"${id}\"></table>\n            <div id=\"GlobalDashboard\"></div>\n          </div>\n        `;\n        let subject = window.kb.sym(row.href);\n        let targetArea = rowContent.querySelector('#'+id);\n        targetArea.style=\"display:table-row;background-color:c0c0c0\"\n        window.outliner.GotoSubject(subject,true,undefined,true,undefined,targetArea);\n      }\n      rowhead.onclick = (e)=>{\n        e.preventDefault();\n        let items = tabs.querySelector('DIV').children;\n        for(let i of items) {\n          i.style.display=\"none\";\n        }\n        for(let n of nav.children) {\n          n.style.backgroundColor=json.unselBackground;\n          n.style.color=json.unselColor;\n        }\n        rowhead.style.backgroundColor = json.selBackground;\n        rowhead.style.color = json.selColor;\n        rowContent.style.display = \"block\";\n      }\n      nav.appendChild(rowhead);\n      mainDisplay.appendChild(rowContent);\n    if(json.orientation===\"vertical\"){\n      rowhead.style.display=\"block\";\n      rowhead.style.marginBottom = \"0.5em\";\n      rowhead.style.width=\"100%\"\n      tabs.style.width=\"100%\";\n      tabs.style.height=\"100%\";\n      tabs.style.display = \"table-row\";\n      nav.style.display = \"table-cell\";\n      mainDisplay.style.display = \"table-cell\";\n      mainDisplay.style.display=\"block\"\n      mainDisplay.style.height = \"100%\";\n      rowContent.style.height = \"100%\";\n    }\n    else {\n      rowhead.style.marginRight = \"0.5em\";\n      rowhead.style.borderBottom = \"none\";\n    }\n  }\n    tabs.appendChild(nav);\n      const closeButton = document.createElement('SPAN');\n      closeButton.style = `\n        color:red;\n        text-align:right;\n        position:absolute;\n        top:0.25rem;\n        right:0.25rem;\n        font-size: 2rem;\n        font-weight: bold;\n        cursor:pointer\n      `;\n      closeButton.addEventListener('click',(e)=>{\n        e.preventDefault();\n        e.target.parentElement.style.display=\"none\";\n      });\n      closeButton.innerHTML = \"&times\";\n\n    tabs.appendChild(closeButton);\n    tabs.appendChild(mainDisplay);\n    solidUI.simulateClick(tabs.querySelector('BUTTON'))\n    return await solidUI.initInternal(tabs);  \n  }\n}\n","export class BookmarkTree {\n\n  constructor(){\n    this.store = UI.rdf.graph();\n    this.fetcher = UI.rdf.fetcher(this.store);\n  }\n  async init(){\n    for(let containerElm of document.getElementsByClassName('ocb')){\n      let subject = containerElm.dataset.component\n      this.bookmarksDisplay = containerElm.dataset.display\n      try {\n        subject = await this.loadUnlessLoaded(subject)\n        containerElm = containerElm.appendChild(document.createElement('UL') )\n        await this.getTopic(subject,containerElm,this.bookmarksDisplay,'start')\n        document.getElementById('ocbStart').click();\n      }\n      catch(e){ alert(e) }\n    }\n  }\n  async getTopic(topic,containingElement,bookmarksDisplay,start){\n    const self=this\n    if(typeof containingElement===\"string\") containingElement = document.querySelector(containingElement);\n    bookmarksDisplay ||= containingElement.dataset.display;\n    this.bookmarksDisplay ||= bookmarksDisplay;\n\n    let book = UI.rdf.Namespace(\"http://www.w3.org/2002/01/bookmark#\")\n    const rdf= UI.rdf.Namespace('http://www.w3.org/2000/01/rdf-schema#')\n    const rdfs=UI.rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#')\n    const ui=UI.rdf.Namespace('http://www.w3.org/ns/ui#');\n\n    topic = await this.loadUnlessLoaded(topic);\n    let topicTitle = this.store.any( topic, rdf('label'),null,topic.doc() )\n    topicTitle = (typeof topicTitle ===\"undefined\") ? \"???\" : topicTitle.value\n    let span = document.createElement('SPAN')\n    span.appendChild(document.createTextNode(topicTitle))\n    span.classList.add('caret')\n    span.addEventListener(\"click\", function() {\n      let elm = this.parentElement.querySelector(\".nested\")\n      if(elm) elm.classList.toggle(\"active\");\n      this.classList.toggle(\"caret-down\");\n    });\n    let li = document.createElement('LI')\n    if(start){\n      span.id = \"ocbStart\";\n//      containingElement.appendChild(span)\n    }\n//    else {\n      li.appendChild(span)\n      containingElement.appendChild(li)\n//    }\n    let subTopics  = this.store.each( null, book('subTopicOf'), topic )\n    if(subTopics.length>0){\n      let ul = document.createElement('UL')\n      ul.classList.add('nested')\n      li.appendChild(ul)\n      for(let t in subTopics){\n        this.getTopic(subTopics[t],ul)\n      }\n    }\n    else {\n      let bookmarks = this.store.each( null, book('hasTopic'), topic )\n      let ul2 = document.createElement('UL')\n      ul2.classList.add('nested')\n      for(let b in bookmarks){\n        let bookmark = bookmarks[b]\n        let  bookmarkTitle = this.store.any( bookmark, rdf('label'),null,topic.doc() )\n        let isFeed=(this.store.match(bookmark,rdfs('type'),ui('Feed'))).length;\n        bookmarkTitle = bookmarkTitle ? bookmarkTitle.value : \"???\"\n        let bookmarkLink  = this.store.any( bookmark, book('recalls'),null,topic.doc() )\n        let bookElement = document.createElement(\"LI\")\n        if(isFeed) bookElement.classList.add('caret')\n        else bookElement.classList.add('item')\n        if(isFeed){\n          bookElement.addEventListener(\"click\", async function() {\n            alert(\"Feed Me!\");\n          });\n        }\n        else {\n          bookElement.addEventListener(\"click\", async function() {\n            document.querySelector(self.bookmarksDisplay).innerHTML=`<iframe src=\"${bookmarkLink.uri}\"></iframe>`;\n          });\n        }\n        bookElement.appendChild(document.createTextNode(bookmarkTitle))\n        let d = document.createElement('DIV')\n        d.classList.add('closed')\n        bookElement.appendChild(d)\n        ul2.appendChild(bookElement)\n      }\n      li.appendChild(ul2)\n    }\n  }\n  async loadUnlessLoaded(subject){\n    try {\n      const base = document.location.href.replace(/\\/[^\\/]*$/,'/')\n      subject  = (typeof subject===\"string\") ? subject : subject.uri\n      subject = subject.match('//') ? subject : base + subject\n      subject  = UI.rdf.sym(subject)\n      if(subject.termType==='BlankNode') return subject\n      if(!this.store.any(null,null,null,subject.doc())) \n        await this.fetcher.load(subject)\n    }\n    catch(e) { alert(e) }\n    return subject\n  }\n}\n\n/*\nwindow.addEventListener('DOMContentLoaded', async (event) => {\n  const ocb = new BookmarkTree()\n  ocb.init()\n})\n*/\n","  /* containerSelector\n       url\n       targetSelector\n       resourceOnChange\n       collectionSize\n       resourceSize\n  */\nexport async function containerSelector(json){\n    let url = json.dataSource;\n    let targetSelector = json.contentArea;\n    let collectionSize = json.collectionSize || 6;\n    let resourceSize = json.resourceSize || 12;\n    let resourceOnchange = async (e)=>{await solidUI.showPage(e,json)};\n    const ldp = UI.rdf.Namespace(\"http://www.w3.org/ns/ldp#\");\n    if(!url) return \"\";\n    let container = url.replace(/\\/[^\\/]*$/,'/'); // in case we get passed a resource\n    let host = _host(container);\n    const base = UI.rdf.sym(container);\n    await UI.store.fetcher.load(base);\n    let files = UI.store.each(base,ldp(\"contains\"),null,base);\n    let resources = [];\n    let containers=[];\n    containers.push({value:base.uri,label:_pathname(base.uri)});\n    for(let file of files.sort()){\n      let name = file.value\n      let contentType=_findContentType(file);\n      if( _isHidden(name) ) continue; \n      if(name.endsWith('/')) containers.push({value:name,label:_pathname(name),contentType});\n      else resources.push({value:name,label:_pathname(name),contentType});\n    }\n    let parent = base.uri.replace(/\\/$/,'').replace(/\\/[^\\/]*$/,'/');\n    if(parent) {\n      if(!parent.endsWith(\"//\")) {\n        containers.splice(1,0,{value:parent,label:\"../\"});\n      }\n    }\n    let x = ()=>{};\n    let containerOnchange = async (selectorElement)=>{\n       let newContainer = selectorElement.target.value;\n       json.dataSource = newContainer;\n       return await containerSelector(json);\n    };\n    containers = await selector(containers,containerOnchange,url,null,collectionSize)\n    resources =  await selector(resources,resourceOnchange,url,null,resourceSize)\n    containers.classList = [\"containerSelector\"];\n    if(resources) resources.classList = [\"resourceSelector\"];\n    if(targetSelector && typeof targetSelector===\"string\") targetSelector = document.querySelector(targetSelector);\n    let div = targetSelector ?targetSelector :document.createElement('DIV');\n    let hostEl = document.createElement('DIV');\n    hostEl.style = \"width:100% !important;text-align:right\";\n    hostEl.innerHTML = `\n       <span style=\"text-align:left\">${host}</span>\n       <a href=\"${container}\" style=\"display:inline-block !important;color:gold !important;text-align:right !important;\"><img src=\"https://solidproject.org/assets/img/solid-emblem.svg\" style=\"height:2rem;width:2rem;margin-left:2rem;\" /></a>\n    `;\n    hostEl.querySelector('A').addEventListener('click',(e)=>{\nalert(e)\n      e.preventDefault();\n      solidUI.showPage(e,{link:container,displayArea:json.displayArea});\n    });\n    div.innerHTML = \"\";\n    if(hostEl) div.appendChild(hostEl);    \n    if(containers) div.appendChild(containers);    \n    if(resources) div.appendChild(resources);    \n    return div;\n  }\n\n  function _findContentType(fileNode){\n    const isa = UI.rdf.sym(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\");\n    let types = UI.store.each(fileNode,isa).map((s)=>{return s.value});\n    for(let type of types){\n       if(type.match(/http:\\/\\/www.w3.org\\/ns\\/iana\\/media-types/))\n       return type.replace(/http:\\/\\/www.w3.org\\/ns\\/iana\\/media-types\\//,'').replace(/\\#Resource/,'');\n    }\n  }\n\n  function _isHidden(path){\n    if(!path) return true;\n    let name = new URL(path);\n    name = name.pathname;\n    name= name.endsWith('/') ?name.replace(/^\\//,'') :name.replace(/.*\\//,'');\n    if(name.startsWith('.') ) return true;\n    if(name.endsWith('~') ) return true;\n  }\n  function _pathname(path){\n    try{ \n      let p = new URL(path); \n      return p.pathname\n    }\n    catch(e){console.log(path,e); return path }; \n  }\n  function _host(path){\n    try{ \n      let p = new URL(path); \n      return p.host\n    }\n    catch(e){console.log(path,e); return path }; \n  }\n  function _origin(path){\n    try{ \n      let p = new URL(path); \n      return p.origin\n    }\n    catch(e){console.log(path,e); return path }; \n  }\n\n\n  /*\n     @paramoptions : an array of arrays [ [value1,label1], [value2,label2] ]\n     onchange : callback function when item selected\n     selected : value to select (from options)\n     targetSelector :  an optional css selector e.g. \"#foo .bar\" where output should be placed\n     size : optional integer size of selector\n     returns an HTML select element\n   */\n  export function selector(options,onchange,selected,targetSelector,size){\n\n    function mungeLabel(label){\n      if(!label) return \"\";\n      label = decodeURI(label);\n      if(!label.endsWith(\"/\")) label = label.replace(/.*\\//,'')\n      return label || \"/\";\n    }\n    function addAttributes(option,optionEl){\n      if(Object.keys(option).length>2){\n        for(let k of Object.keys(option)){\n          if(k===\"value\"||k===\"label\")continue;\n          optionEl.dataset ||= {};\n          optionEl.dataset[k] = option[k];\n        }\n      }\n      return optionEl;\n    }\n\n\n\n    let computedSize = options.length;\n    size ||= 0;\n    size = computedSize <= size ?computedSize :size;\n    if(size <1) return;\n    if(size ===1) {\n      let button = document.createElement('BUTTON');\n      button.value = options[0].value;\n      button.innerHTML = mungeLabel(options[0].label);\n      button.addEventListener('click',(e)=>{\n        onchange(e)\n//        onchange(e.target)\n      })\n      return button;\n    }\n    let selectEl = document.createElement('SELECT');\n    for(let option of options){\n      let value,label;\n      if(typeof option===\"string\") value = label = option;\n      else {\n        value = option.value\n        label = option.label || option.value\n      }\n      if(!label || !option) continue;\n      label=mungeLabel(label);\n//      label = decodeURI(label);\n//      if(!label.endsWith(\"/\"))\n//         label = label.replace(/.*\\//,'')\n//      label ||= \"/\";\n      let optionEl = document.createElement('OPTION');\n      optionEl.value = value;\n      optionEl.title = value+\"\\n\"+(option.contentType||\"\");\n      optionEl.dataset ||= {};\n      optionEl.dataset.contenttype=option.contentType||\"\";\n      optionEl.innerHTML = label;\n      optionEl.style = \"padding:0.25em;\";\n      optionEl = addAttributes(option,optionEl);\n/*\n      if(Object.keys(option).length>2){\n        for(let k of Object.keys(option)){\n          if(k===\"value\"||k===\"label\")continue;\n          optionEl.dataset ||= {};\n          optionEl.dataset[k] = option[k];\n        }\n      }\n*/\n      selectEl.appendChild(optionEl);\n    }\n\n    /* HIGHLIGHT SELECTED */\n    if(selected) selectEl.value = selected;\n//    selectEl.value ||= selectEl.childNodes[0].value;\n\n//    selectEl.addEventListener('click',async(e)=>{\n//      onchange(e.target)\n//    })\n    selectEl.addEventListener('change',async(e)=>{\n      onchange(e)\n//      onchange(e.target)\n    })\n    selectEl.size = size\n    selectEl.style=\"padding:0.5em;width:100%\"\n    if(targetSelector) {\n      let targetEl = document.querySelector(targetSelector)\n      targetEl.innerHTML = \"\"\n      targetEl.appendChild(selectEl);\n    }\n    return selectEl;\n  }\n\n","\nexport async function draggable(thing){\n  let component = thing;\n  if(typeof thing!=\"object\") component = await getFloatComponent(thing);\n  let id = getDraggableId(component);\n  let draggableDomElement = document.getElementById(id);\n\n  /* If it already exists, show it and return\n  */\n  if(draggableDomElement){\n    draggableDomElement.style.display = \"block\";\n    return;   \n  }\n\n  let div = document.createElement('DIV');\n  let header =  document.createElement('DIV');\n  let close =  document.createElement('SPAN');\n  let content =  document.createElement('DIV');\n  content = await getDraggableContent(component,content);\n  div.id = id;\n\n  close.innerHTML=\" X \";\n  close.style.color = \"#ffeeee\";\n  close.style[\"font-weight\"] = \"bold\";\n  close.style[\"margin-left\"] = \"2em\";\n  close.style.background = \"#000000\";\n  close.style.padding = \"0.2em;\"\n  close.style[\"border-radius\"] ||= \"0.2em\";\n  close.addEventListener('click',(e)=>{\n     e.target.parentNode.parentNode.style.display = \"none\";\n  });\n\n\n  /* STYLE OF THE DRAGGABLE DIV */\n  div.style = component.style || {};\n  div.style.position ||= \"absolute\";\n  div.style[\"z-index\"] ||= 3;\n  div.style.background ||= \"#f1f1f1\";\n  div.style.border ||= \"1px solid #d3d3d3\";\n  div.style[\"text-align\"] ||= \":center\";\n\n  /* STYLE OF DRAGGABLE DIV'S HEADER */\n  header.style = component.headerStyle || {};\n  header.style.padding ||= \"10px\";\n  header.style.cursor ||= \"move\";\n  header.style[\"z-index\"] ||= 3;\n  header.style[\"text-align\"] ||= \"center\";\n  header.style.background ||= \"#2196F3\";\n  header.style.color ||= \"#ffffff\";\n\n  /* STYLE OF DRAGGABLE DIV'S CONTENT */\n  content.style = component.style || {};\n  content.style.padding ||= \"1em\";\n\n  /* MOUSE ACTIONS */ \n  let pos1,pos2,pos3,pos4;\n  div.onmousedown = (e)=>{          /* DRAG ELEMENT CLICK */\n    e = e || window.event;\n    e.preventDefault();\n    pos3 = e.clientX;\n    pos4 = e.clientY;\n    document.onmouseup = (e)=>{      /* DRAG ELEMNT DROP */\n      document.onmouseup = null;\n      document.onmousemove = null;\n    }\n    document.onmousemove = (e)=>{    /* DRAG ELEMENT DRAG */\n      e = e || window.event;\n      e.preventDefault();\n      pos1 = pos3 - e.clientX;\n      pos2 = pos4 - e.clientY;\n      pos3 = e.clientX;\n      pos4 = e.clientY;\n      div.style.top = (div.offsetTop - pos2) + \"px\";\n      div.style.left = (div.offsetLeft - pos1) + \"px\";\n    }\n  };\n\n  header.appendChild(close);\n  div.appendChild(header);\n  div.appendChild(content);\n  document.body.appendChild(div);\n  return div;\n\n  /* UTILITY FUNCTIONS */\n  function getDraggableId(component){\n    return component.label.replace(/\\s+/g,\"_\");\n  }\n  async function getDraggableContent(component,content){\n    let ds;\n    header.innerHTML = `<span>${component.label}</span>`;\n    if(component.content) {\n      content.innerHTML = component.content;\n    }\n    else if(component.dataSource) {\n      ds = await solidUI.processComponent(null,component.dataSource);\n      content.appendChild( ds );\n    }\n    else if(component.dataSourceType) {\n      ds=await solidUI.util.show(component.dataSourceType,null,null,null,null,component);\n      content.appendChild( ds );\n    }\n    return content;\n  }\n  async function getDraggableComponent(uri){\n    let ui = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n    let c = {};\n    uri = UI.rdf.sym(uri);\n    await UI.store.fetcher.load(uri);\n    c.label = (UI.store.any(uri,ui('label'))||{}).value;    \n    c.content = (UI.store.any(uri,ui('content'))||{}).value;\n    c.style =  (UI.store.any(uri,ui('style'))||{}).value;\n    c.headerstyle =  (UI.store.any(uri,ui('headerStyle'))||{}).value;\n    c.dataSource =  (UI.store.any(uri,ui('dataSource'))||{}).value;\n    return c;\n  }\n\n}\n\n","import * as user from  './user.js';\n// DataSources\n//import {Feed} from './model/rss.js';\nimport {Feed} from './model/feed.js';\nimport {Sparql} from './model/sparql.js';\n// Templates\nimport {Accordion} from './view/accordion.js';\nimport {App} from './view/app.js';\nimport {Form} from './view/form.js';\nimport {Menu} from './view/menu.js';\nimport {menuOfMenus} from './view/menuMenu.js';\nimport {Modal} from './view/modal.js';\nimport {SelectorPanel} from './view/selectorPanel.js';\nimport {Table} from './view/table.js';\nimport {Tabs} from './view/tabs.js';\nimport {BookmarkTree} from './view/bookmarkTree.js';\nimport {containerSelector} from './view/selector.js';\nimport {draggable} from './view/draggable.js';\nimport {buttonListMenu} from './view/buttonListMenu.js';\nimport {componentButton} from './view/componentButton.js';\nimport {CU} from './utils.js';\nconst u = new CU();\n\nconst sparql = new Sparql();\nconst proxy = \"https://solidcommunity.net/proxy?uri=\";\n\nclass SolidUIcomponent {\n\n$rdf = UI.rdf;\nskos = $rdf.Namespace('http://www.w3.org/2004/02/skos/core#');\nui = $rdf.Namespace('http://www.w3.org/ns/ui#');\nrdf=$rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#');\n\n  constructor(){\nif(typeof panes !=\"undefined\") window.outliner = panes.getOutliner(document);\n  }\n\n\n  // BREAKING : components marked as data-suic, not data-solid_ui_component\n  suic = \"[data-suic]\";\n\n  async init(){\n\n    // fetcher = this.makeLSfetcher(UI); // see drafts/in-browser-fetcher.js\n    let all = document.querySelectorAll(this.suic)\n//    all= all.length>0 ?all : document.querySelectorAll('[data-solid_ui_component]')\n    for(let element of all) {\n      const content = await this.processComponent(element);\n      if(content) element.appendChild( content );\n    }\n  }\n\n  async initInternal(containingElement){\n    let all = containingElement.querySelectorAll(this.suic)\n    for(let element of all) {\n      const content = await this.processComponent(element);\n      element.appendChild( content );\n    }\n    return containingElement;\n  }\n\n  async activateComponent(selector,targetElement){\n    targetElement ||= document;\n    let elm = typeof selector===\"string\" ?document.querySelector(selector) :selector;\n    let c = await this.getComponentHash(elm.getAttribute('data-suic'));\n    if(c && c.plugin) elm.setAttribute('data-suicPlugin',c.plugin);\n    if(elm.innerHTML.replace(/\\s*/g,'').length === 0) {\n      const content = await this.processComponent(elm);\n      elm = content;\n      if(elm){\n        elm.style ||= {};\n        elm.style.display=\"block\";\n      }\n    }\n    return elm;\n  }\n\n  pluginType(plugin){\n    if(!plugin || plugin.match(/(PodBrowser,SolidOS,FeedList,ConceptTree)/)) return \"builtIn\";\n    return \"\";\n  }\n\n  async showPage(event,json,obj){\nconsole.log('SHOW PAGE')\n     if(event && event.preventDefault) event.preventDefault();\n     event ||= {target:{tagName:\"\"}};\n     event.target.dataset ||= {};\n     json ||= {};\n     obj ||= json;\n     let type;\n     let url = event.href || event.value || json.link || json['data'];\n     url ||= event.target.value;\n     let plugin = event.target.dataset.suicplugin;\n     if(!plugin && event.target.parentElement){\n        event.target.parentElement.dataset ||= {};\n        plugin = event.target.parentElement.dataset.suicplugin;\n     }\n     if(plugin && this.pluginType(plugin) != \"built-in\"){\n       let pFile = window.origin + `/cm/plugins/${plugin}.ttl`;\n       await UI.store.fetcher.load(pFile);\n       let node = UI.rdf.sym(pFile+\"#this\");\n       let x= UI.store.match(node,this.rdf('type'),this.ui('LinkHandler'));\n       if(x && x.length===1){\n         let converter = UI.store.any(node,this.ui('linkConvert'),null,node.doc())\n       url = converter.value.interpolate({href:url});\n         type=\"text/html\";\n       }\n     }\n     type ||= event.target.dataset.contenttype || u.findType(url);\n     if(solidUI.showFunction) return await solidUI.showFunction(type,url,json.displayArea,true,obj);\n     let content\n     if(obj.displayTarget && obj.displayTarget.match(/#Draggable/)){\n       let outerContent = (await u.show(type,url,\"\",\"\",true,obj)).outerHTML;\n       alert(outerContent)\n       await draggable({\n          label : obj.label,\n          content : outerContent,\n       });\n       return;\n     }\n     else {\n       content =  await u.show(type,url,\"\",json.displayArea,true,obj)\n     }\n     return content;\n  }\n\n  async processComponent(element,subject,json){\n    if(!json){    \n      if(!subject && element && element.dataset){\n        let urlToLoad  = element.dataset.suic;\n        if(urlToLoad.startsWith('/')) urlToLoad = window.origin + urlToLoad;\n        subject = await this.loadUnlessLoaded(urlToLoad);\n      }\n      if(!subject) return null;\n      json = await this.getComponentHash(subject)\n      element ||= {}\n      element.dataset ||= {};\n      element.parentNode  ||= {};\n      element.parentNode.dataset  ||= {};\n      json.displayArea = element.dataset.display || element.parentNode.dataset.display;\n      if(element.id) json.contentArea = '#' + element.id ;\n      json.contentSource = subject.value ?subject.value :subject ;\n    }\n    json ||= subject;\n    if(!json.plugin && element && element.getAttribute) json.plugin = element.getAttribute('data-suicPlugin') || {};\n    if(json.type===\"Component\"){\n       if(json.plugin.match(/#PodBrowser/))\n         return await containerSelector(json);\n       if(json.plugin.match(/#SolidOSLink/))\n         return u.show('SolidOSLink',json.href,null,null,null,json)\n       let newJson = await this.getComponentHash(json.dataSource,json);\n       newJson.contentSource = json.dataSource;\n       newJson.contentArea = json.contentArea;\n       newJson.displayArea = json.displayArea;\n       json = newJson;\n    }\n\n    if(!json) {console.log(\"No ComponentHASH \",subject); return;}\n    // default color,orientation,position\n    json = this.getDefaults(json);\n\n//    if(json.type.match(/Link/)){\n//      return displayLink(json)\n//    }\n\n    // DATASOURCE\n    let dataSource = (typeof json.dataSource===\"string\") ?await this.getComponentHash(json.dataSource) : json.dataSource ;\n    if(dataSource && typeof dataSource.dataSource===\"string\"){\n      dataSource = await this.getComponentHash(dataSource.dataSource);\n    }\n    if(dataSource && dataSource.type==='Script') {\n      let as=await Function('\"use strict\";return('+dataSource.content+')')();\n      let el = document.querySelector(json.contentArea);\n      for(let anchor of as){\n        anchor.target = json.displayArea;\n        anchor.addEventListener('click',async (e)=>{\n          e.preventDefault();\n          anchor.setAttribute('data-contenttype','text/html');\n          await u.show('text/html',anchor.href,null,json.displayArea);\n        });\n        el.classList.add('suic-anchor-list');\n        el.appendChild(anchor);      \n      }\n    }\n    if(dataSource && dataSource.type==='SparqlQuery') {\n      let endpoint = dataSource.endpoint;\n      let query = dataSource.query.replace(/\\$\\{[^\\}]*\\}/g,'');\n      json.parts = await this.sparqlQuery(endpoint,query,json);\n      if(json.type==='SparqlQuery') return json.parts;\n    }\n    if(json.type==='SparqlQuery') {\n      json.parts = await this.sparqlQuery(json.endpoint,json.query,json);\n      if(json.type==='SparqlQuery') return json.parts;\n    }\n    if(json.type==='SolidOSLink') {\n       return u.show('SolidOSLink',json.href,null,null,null,json)\n    }\n    if(json.type==='AnchorList') {\n      for(let l of json.content.split(/\\n/) ){\n\n      }\n    }\n    if(json.parts && json.groupOn){\n      json.parts = sparql.flatten(json.parts,json.groupOn)\n      console.log(json.groupOn,json.parts)\n    }\n\n    if(json.type==='App'){\n      return await (new App()).render(this,json);\n    }\n    else if(json.type && json.type.match(/Link/)){\n      return await window.displayLink(element,json,element);\n    }\n    else if(json.type && json.type.match(/ButtonListMenu/)){\n      return await buttonListMenu(json);\n    }\n    else if(json.type==='Menu'){\n      return await (new Menu()).render(this,json,element);\n    }\n    else if(json.type==='MenuOfMenus'){\n      return await menuOfMenus(json);\n    }\n    else if(json.type==='ComponentButton'){\n      return await componentButton(json);\n    }\n    else if(json.type==='Draggable'){\n      return await draggable(json);\n    }\n    else if(json.type==='ContainerSelector'){\n      return await containerSelector(json);\n    }\n    else if(json.type==='FeedList'){\n      return await (new Feed()).makeFeedSelector(json.contentSource,json.contentArea,json.displayArea);\n    }\n    else if(json.type==='BookmarkTree'){\n      await (new BookmarkTree()).getTopic(json.contentSource,json.contentArea,json.displayArea,'start');\n      let elm = document.querySelector(json.contentArea);\n      elm.style = \"padding:0;margin:0;list-style:none;\"\n      document.getElementById('ocbStart').click();\n    }\n    else if(json.type==='SelectorPanel'){\n      let panel = new SelectorPanel();\n      let d = this.setDefaults(json);\n      return await panel.render(json);\n    }\n    else if(json.type==='ModalButton'){\n      // return await (new Modal()).render(this,json)\n         return await (new Modal()).render(json,this)\n    }\n    else if(json.type==='Accordion'){\n      return await (new Accordion()).render(this,json)\n    }\n    else if(json.type==='FormComponent'){\n      return await (new Form()).render(this,json)\n    }\n    else if(json.type==='Tabset'){\n      return await (new Tabs).render(this,json)\n    }\n    if(json.type===\"Table\"){\n      return await (new Table()).render(json);\n    }\n    let contentWrapper = document.createElement('DIV');\n    let results,before,after,content,label;\n\n// RECORD\n    if(json.type==='Record') {\n      label = this.getValue( dataSource, ui('label') );\n      content = this.getValue( dataSource, ui('content') );\n      results = {label,content} ;\n    }\n\nresults = results || json.parts;  \nthis.log('Parts for Component',results);\n// TEMPLATE\n    let template = json.template;\n    if(!template){\n      return results;\n    }\n    if(template.groupOn) {\n      results = sparql.flatten(results,template.groupOn)\n    }   \n    \n      if(template==\"AccordionMenu\"){\n        let compo = await this.runBuiltIn(template,results);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      if(template==\"Table\"||json.type===\"Table\"){\n        let compo = await (new Table()).render(json);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      if(template==\"ModalButton\"){\n        let compo = await this.makeMmodal(json.label,json.content);\n        if(compo) contentWrapper.appendChild(compo);\n        return contentWrapper;\n      }\n      let recurring;\n// let template = json.template.value ?json.template.value :json.template ;\n\n/*\n      let isBuiltIn = template.match(/^https:\\/\\/www.w3.org\\/ns\\/ui#/) ;\n      if( isBuiltIn ) {\n        if(template.match(/ModalButton/)) {\n          results = await this.makeModalButton(label,content);\n        }\n        else if( template.match(/DropdownMenu/ || dataSourceType===\"App\") ){\n            let m = new Menu();\n            let results = await m.render(subject,contentWrapper)\n            // console.log(results)\n        }\n        else {\n          results = await this.runBuiltIn(template,results);\n        }\n        if(results) contentWrapper.appendChild(results);\n      }\n*/\n        if(typeof template==\"string\") {\n          template = await this.getComponentHash(template);\n        }\n        recurring = template.recurring;\n        before = template.before;\n        after = template.after;\n//        recurring = recurring || template;\n        let body = this.fillTemplate(recurring,results);\n        contentWrapper.innerHTML = (before||\"\") + body + (after||\"\");\n\n/*\n      if( dataSourceType.match(/Menu/) ) {\n        for(let menuItem of contentWrapper.children){\n          menuItem.addEventListener('click',(event)=>this.menu(event));\n        }\n      }\n*/\n      return contentWrapper ;\n    \n  }\ngetObjects(store,s,p,g){\n  let list = store.each(s,p,null,g);\n  if(list.length===0) return list\n  let type = list[0].termType;\n  let isFirst = store.any(list[0],this.rdf('first'));\n  if(type===\"Collection\") return list[0].elements;\n  else {\n    if(!isFirst) return list;\n    else {\n      return this.getRdfsList(store,list[0]);\n    }\n  }\n}\ngetRdfsList(store,first,list){\n  list ||= [];\n  list.push( store.any(first,this.rdf('first')) );\n  let rest = store.any(first,this.rdf('rest'));\n  if(rest && rest.value===this.rdf('nil').value) {\n    return list;\n  }\n  else {\n   return this.getRdfsList(store,rest,list)\n  }\n}\n  \nasync getComponentHash(subject,hash){\n    if(!subject) return hash;\n    subject = await this.loadUnlessLoaded(subject);\n    if(!subject) return null;\n    let predicatePhrases = UI.store.match(subject,null,null);\n/*\n    let thisdoc = UI.store.match(subject,null,null,subject.doc())\n    let isComponent = UI.store.any(subject,this.rdf('type'),this.ui('Component'));\n  //  console.log(66,subject.value,isComponent)\n*/\n    hash = hash || {}\n    for(let p of predicatePhrases){\n      let pred = p.predicate.value.replace(/http:\\/\\/www.w3.org\\/1999\\/02\\/22-rdf-syntax-ns#/,'').replace(/http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n      let obj = p.object;\n      let doc = subject.doc ?subject.doc() :subject;\n      let items = this.getObjects(UI.store,subject,p.predicate,doc);\n      hash[pred] ||= [];\n/*\n      for(let item of items){\n//console.log(55,p.predicate.value,item)\n//let x = await this.getComponentHash(item,hash);\n        hash[pred].push(item.value);\n      }\n*/\n      if(obj.termType===\"BlankNode\"){\n        obj = await this.getComponentHash(obj);\n        if(!hash[pred])  hash[pred] = obj;\n        else if(typeof hash[pred] !='ARRAY') hash[pred] = [obj]\n        else hash[pred].push(obj);\n      }\n      else if(obj.termType===\"Collection\"){\n        obj = obj.elements;\n        for(let uri of obj){\n          let component = await this.getComponentHash(uri,{});\n          if(!hash[pred])  hash[pred] = [component];\n          else hash[pred].push(component);\n        }\n      }\n      else {\n        obj = obj.value.replace(/^http:\\/\\/www.w3.org\\/ns\\/ui#/,'');\n        if(!hash[pred])  hash[pred] = obj;\n        else if(typeof hash[pred] !='ARRAY') hash[pred] = [obj]\n        else hash[pred].push(obj);\n      }\n      if(hash[pred].length==1) hash[pred]=hash[pred][0];\n    }\n    hash.id ||= subject.value;\n    return hash ;\n  }\n  log(...args){\n    if(typeof DEBUG!=\"undefined\") console.log(args);\n  }\n  setStyle(element,styles){\n    for(let s of Object.keys(styles)){\n      element.style[s]=styles[s];\n    }\n  }\n\n\n/*-----------\n  SPARQL\n----------*/\n  async sparqlQuery(endpoint,queryString,json){\n    if(typeof Comunica !=\"undefined\")\n      return await sparql.comunicaQuery(endpoint,queryString,json);\n    else   \n      return await sparql.rdflibQuery(endpoint,queryString,json);\n//    return await sparql.rdflibQuery(solidUI,UI.store,endpoint,queryString,json);  \n  }\n\n\n/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  DISPLAY METHODS\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */\n\ngetDefaults(json){\n  if(typeof json==\"string\") json = this.processComponent('',json)\n  json.height ||= this.height;\n  json.width ||= this.width;\n  json.proxy ||= this.proxy || proxy;\n  json.background ||= this.background || \"#f6f6f6\";\n  json.color ||= this.color || \"#000\";\n  json.selBackground ||= this.selBackground || \"#559\";\n  json.selColor ||= this.selColor || \"#fff\";\n  json.unselBackground ||= this.unselBackground || \"transparent\" // \"#e0e0e0\";\n  json.unselColor ||= this.unselColor || \"#000\";\n  json.orientation ||= this.orientation || \"horizontal\";\n  json.position ||= this.position || \"left\";\n  this.proxy = json.proxy\n  return(json);\n}\nsetDefaults(json){\n  if(typeof json==\"string\") json = this.processComponent('',json)\n  this.background = json.background;\n  this.color = json.color;\n  this.selBackground = json.selBackground;\n  this.selColor = json.selColor;\n  this.unselBackground = json.unselBackground;\n  this.unselColor = json.unselColor;\n  this.orientation = json.orientation;\n  this.position = json.position\n  this.proxy = json.proxy\n  return(this.getDefaults(json));\n}\n\n  fillTemplate(templateStr,object){\n    function fillOneTemplateRow(templateStr,object){\n      for(let o of Object.keys(object) ){\n        let newStuff=object[o]||\" \";\n        if(typeof newStuff==='object' && newStuff.length>1) newStuff = newStuff.join(\", \");\n        let re = new RegExp( `\\\\$\\\\{${o}\\\\}`, 'gi' );\n        templateStr  = templateStr.replace( re, newStuff );\n      }\n      return templateStr;\n    }\n    let string = \"\";\n    for(let r of object){\n       string += fillOneTemplateRow(templateStr,r)+\"\\n\";\n    }\n    return string;\n  }\n\n  runBuiltIn(json,template,results){\n    if(template.match(/Table/)) return this.results2table(json,results);\n    if(template.match(/Modal/)) return this.results2modal(results);\n    if(template.match(/Accordion/)) return tabset(results);\n    if(template.match(/DescriptionList/)) return this.results2descriptionList(results);\n  }\n\n  /* UTILITIES\n  */\n\n  diff(diffMe, diffBy){ diffMe.split(diffBy).join('') }\n\n  simulateClick(el){\n    if (el.fireEvent) {\n      el.fireEvent('on' + 'click');\n    } else {\n      var evObj = document.createEvent('Events');\n      evObj.initEvent('click', true, false);\n      el.dispatchEvent(evObj);\n    }\n  }\n\n  // CREATE HTML ELEMENT\n  createElement(elementType,className,html,styles){\n    let element = document.createElement(elementType);\n    if(className) element.classList.add(className);\n    if(html) element.innerHTML = html;\n    if(styles){\n      for(let s of styles.split(/;/)) {\n        let pair = s.split(/:/)\n        if(pair.length==2) \n          element.style[pair[0].trim()]=pair[1].trim();\n      }\n    }\n    return element;\n  }\n  getComponentType(subject){\n    if(!subject) return null;\n    let uiNamespace = 'http://www.w3.org/ns/ui#';\n    let type = UI.store.each( subject, rdf('type') ).map( (object) =>{\n      object = object.value;\n      if(object.match(/ns\\/ui#/)) return object.replace(/.*\\#/,'');\n    });\n    return type[0] || \"\";\n  }\n\n  async clearInline(){\n    for(let stm of UI.store.match()){\n      if(stm.graph.value.startsWith('inline:')) UI.store.remove(stm);\n    }\n  }\n\n  loadFromMemory(sentUri){\n    let uri = sentUri //.replace(/^inline:/,'');\n    if( UI.store.any(null,null,null,$rdf.sym(uri)) ) return $rdf.sym(uri);\n    let [eName,fragment] = uri.split(/#/);\n    let eDoc = document.getElementById(eName)\n    let uiString = eDoc.innerText || eDoc.value;\n    uiString = uiString.trim()\n    if(uiString.startsWith('\\<\\!\\[CDATA\\[')) uiString=uiString.replace(/^\\<\\!\\[CDATA\\[/,'').replace(/\\]\\]$/,'').replace(/~~/g,'#');\n    try {\n      $rdf.parse(  uiString, UI.store, uri, \"text/turtle\" ); \n      return($rdf.sym(uri));\n    }\n    catch(e) { console.log(e) }\n  }\n\n  async  loadUnlessLoaded(uri){\n    try {\n      if(!uri) return;\n      if(uri && uri.termType && uri.termType===\"BlankNode\") return uri;\n      uri = typeof uri===\"object\" ?uri.uri :uri;\n      if(uri.startsWith('inline')) return this.loadFromMemory(uri);\n      if(!uri.startsWith('http')&&!uri.startsWith('ls')) uri = window.location.href.replace(/\\/[^\\/]*$/,'/') + uri;\n    const mungedUri = uri.replace(/\\#[^#]*$/,'');\n      let graph = $rdf.sym(mungedUri);\n      if( !UI.store.any(null,null,null,graph) ){\n        console.log(\"loading \"+graph.uri+\" ...\");\n        let r = await UI.store.fetcher.load(graph.uri);\n        if(UI.store.any(null,null,null,graph)) console.log(`<${graph.uri}> loaded!`);\n        else console.log(`<${graph.uri}> could not be loaded!`);\n//console.log(UI.store.match(null,null,null,graph));\n      }\n      else console.log(`<${graph.uri}> already loaded!`);\n      return $rdf.sym(uri);\n    }\n    catch(e) { console.log(e); return $rdf.sym(uri) }\n  }\n   getValue(s,p,o,g) {\n     let node = UI.store.any( s, p, o, g );\n     return node ?node.value :\"\" \n   }\n   valuesContain(s,p,o,g,wanted) {\n    let nodes = UI.store.each( s, p, o, g );\n    for(let n of nodes) {\n      n = n ?n.value :\"\";\n      if(n===wanted) return n;\n    }\n  }\n\n} // END OF CLASS SolidUIcomponent\n\nlet solidUI = new SolidUIcomponent();\nsolidUI.util = u;\nsolidUI.draggable = draggable;\nexport default solidUI;\n/*\ndocument.addEventListener('DOMContentLoaded', function() {    \n  let solidUI = new SolidUIcomponent();\n  solidUI.util = u;\n});\n*/\n","export async function buttonListMenu(json){\n    let div = document.createElement('DIV');\n    div.id =  json.contentSource.replace(/.*\\#/,'');\n    let html = \"\";\n    for(let ds of json.dataSource){\n      let attrs = \"\";\n      if(!ds.dataSource) {\n        ds = await solidUI.getComponentHash(ds);\n      }\n      let b = document.createElement('BUTTON');\n      for(let k of Object.keys(ds)){\n          b.setAttribute(`data-${k}`,ds[k]);\n      }\n      b.innerHTML = ds.label;\n      b.addEventListener('click',async(e)=>{\n        e.preventDefault();\n        let link = b.getAttribute('data-link') || b.getAttribute('data-dataSource')\n        await solidUI.showPage(null,{link,displayArea:json.displayArea},ds); \n      });\n      div.appendChild(b)\n    }\n    let targetElement = document.querySelector(json.contentArea);\n    targetElement.innerHTML = \"\";\n    targetElement.appendChild(div)\n    return targetElement\n    let buttons = targetElement.querySelectorAll('BUTTON');\n    for(let button of buttons){\n      let tag  = button.getAttribute('about');\n      button.addEventListener('click',async(e)=>{\n        e.preventDefault();\n        let link = button.getAttribute('data-link') || button.getAttribute('data-dataSource')\n       await solidUI.showPage(null,{link,displayArea:targetElement}); \n      });\n    }\n    return targetElement;\n}\n","export async function menuOfMenus(json){\n    let div = document.createElement('DIV');\n    div.id =  json.contentSource.replace(/.*\\#/,'');\n    let html = \"\";\n    for(let ds of json.dataSource){\n      let component = ds.directDisplay ?ds.dataSource :ds.id\n      ds.directDisplay ||= \"\";\n      html += `<button about=\"${component}\" data-directDisplay=\"${ds.directDisplay}\">${ds.label}</button>`;\n    }\n    div.innerHTML = html;\n    let targetElement = document.querySelector(json.contentArea);\n    targetElement.innerHTML = \"\";\n    targetElement.appendChild(div)\n    let moreHtml = \"\"\n    for(let ds2 of json.dataSource){\n      let div2 = document.createElement('DIV'); \n      div2.id=ds2.label.replace(/\\s*/g,'_');\n      div2.setAttribute('data-suic',ds2.id);\n      div2.style=\"display:none\";\n      targetElement.appendChild(div2);\n    }\n    let buttons = targetElement.querySelectorAll('BUTTON');\n    for(let button of buttons){\n      let tag  = button.getAttribute('about');\n      button.addEventListener('click',async(e)=>{\n        e.preventDefault();\n        if(button.getAttribute('data-directDisplay')){\n          await solidUI.showPage(null,{link:button.getAttribute('about'),displayArea:targetElement}); \n          return;\n        }\n        let divs = targetElement.querySelectorAll(json.contentArea + ' > DIV');\n        for(let d of divs){\n          let target = d.getAttribute('data-suic');\n          if(target===tag){\n            d.style.display=\"block\";\n            await solidUI.activateComponent(d,targetElement);\n          }\n          else d.style.display=\"none\";\n        }\n      });\n    }\n    return targetElement;\n}\n","export async function componentButton(thing){\n\n  let component = thing;\n  if(typeof thing!=\"object\") component = await getButtonComponent(thing);\n  let button = document.createElement('BUTTON');\n  button.innerHTML = component.icon ?component.icon :component.label;\n  button.addEventListener('click',async (e)=>{\n    await solidUI.processComponent(null,component.dataSource);     \n  });\n  button.style = component.style;\n  button.style.cursor ||= \"pointer\";\n  button.style.background ||= \"#2196F3\";\n  button.style.color ||= \"#ffffff\";\n  button.style.padding ||= \"0.5em\";\n  button.style[\"border-radius\"] ||= \"0.2em\";\n  if(component.targetSelector) component.targetSelector.appendChild(button);\n  return button;\n\n  async function getButtonComponent(uri){\n    let ui = UI.rdf.Namespace(\"http://www.w3.org/ns/ui#\");\n    let c = {};\n    uri = UI.rdf.sym(uri);\n    await UI.store.fetcher.load(uri);\n    c.label = (UI.store.any(uri,ui('label'))||{}).value;    \n    c.content = (UI.store.any(uri,ui('icon'))||{}).value;\n    c.style =  (UI.store.any(uri,ui('style'))||{}).value;\n    c.headerstyle =  (UI.store.any(uri,ui('headerStyle'))||{}).value;\n    c.dataSource =  (UI.store.any(uri,ui('dataSource'))||{}).value;\n    return c;\n  }\n\n}\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","getObject","kb","subject","predicate","sym","any","getObjects","each","results","v","push","async","applyProfile","domElement","me","type","document","origin","window","storage","webId","$rdf","UI","rdf","RDFS","Namespace","FOAF","SOLID","PIM","LDP","VCARD","fetcher","node","load","e","console","log","extendedDocs","concat","doc","name","nick","image","inbox","preferences","privateTypeIndex","publicTypeIndex","storages","issuers","loadProfile","logo","querySelector","src","title","innerHTML","solidUI","vars","podRoot","podName","podNick","podWebID","podImage","podInbox","podProfile","Feed","feedUri","proxy","encodeURI","response","fetch","feedContent","text","feedDom","DOMParser","parseFromString","items","querySelectorAll","length","parsedItems","forEach","el","link","getAttribute","match","replace","trim","json","externalLinkIcon","icons","iconBase","i","this","fetchAndParse","href","displayTarget","wrapper","createElement","property","content","standAlone","label","style","selBackground","selColor","height","anchors","anchor","listItems","li","width","mungeAnchors","element","noStyle","alert","classList","contains","addEventListener","event","preventDefault","displayArea","dataset","target","display","closest","parentElement","displayLink","needsIframe","String","interpolate","params","names","keys","vals","values","Function","toggleMenu","column2","getElementById","toggleDarkMode","container","remove","add","toggleFontSize","currentSize","body","fontSize","item","popout","newElement","processComponent","appendChild","startsWith","util","show","containingEl","main","tabulator","span","initInternal","linkType","render","format","marked","parse","showMarkdown","div","script","nativeIframe","uri","iframe","URL","b","srcdoc","scrollTo","top","behavior","getIframe","Sparql","endpoint","queryString","forceReload","Comunica","comunicaQuery","rdflibQuery","graph","preparedQuery","SPARQLToQuery","wanted","map","stm","table","querySync","r","row","w","sort","a","sparqlStr","result","comunica","newEngine","munge","x","invalidateHttpCache","store","webOperation","ok","statusText","query","sources","variables","bindings","entries","_root","id","flatten","groupOn","newResults","k","includes","n","Table","options","parts","sortOn","reverse","columnHeaders","headerRow","c","cell","border","padding","background","unselBackground","color","unselColor","rowElement","col","cleanNodes","backgroundColor","borderCollapse","Form","url","form","formSubject","u","resultDocument","dom","formString","string","fSubj","removeDocument","formResultDocument","putBack","widgets","appendForm","CU","constructor","UIO","ISA","removeClass","tag","cl","addClass","thing","getProperty","curie","vocab","split","ns","getProperties","getValues","all","some","one","s","val","menuize","buttonGroupElement","buttons","b2","findType","sourceFile","targetSelector","hideTabulator","_show","showIframeSrc","pdf","video","showIframeSrcDoc","audio","loadFile","html","graphviz","d3","select","renderDot","markdown","parsedString","Component","SolidOSLink","showTabulator","targetElement","targetOutline","makeOutline","wantedPane","pane","plugin","panes","byName","URLSearchParams","location","search","set","outliner","GotoSubject","SparqlQuery","q","sparqlQuery","DataTemplate","getUIterm","template","data","interpolated","PageDefinition","getMainSubject","DM","XS","XMLSerializer","templateURL","templateInfo","p","object","fileInfo","contentType","serializeToString","dataSourceType","mainSubject","crossLoad","subjectType","getUItype","mungeHash","queryURL","querySubject","before","beforeQueryURL","beforeQuerySubject","beforeEndpoint","beforeQuery","beforeData","recurring","after","middle","makeIframe","show_iframe","pathname","makeSelector","onchange","selected","size","selectEl","option","endsWith","optionEl","childNodes","targetEl","getParent","newu","file","ext","path","decodeURI","isContainer","mime","getType","editable","host","isHidden","credentials","headers","responseText","status","types","term","newval","termType","elements","mungeLabel","mungeURL","PUT","cType","topTopic","ui","skos","topicNodes","topics","topicSelector","collectionSelector","selectors","collections","colSelector","itemSelector","elm","items2list","onclick","parentNode","area","elms","suicfeedmenu","menuArea","myFeed","makeFeedSelector","initFeeds","Accordion","accordion","rowhead","topic","caret","textAlign","cursor","rowContent","linkLabel","linkUrl","button","setAttribute","marginBottom","showByClass","borderTop","showing","children","simulateClick","App","app","mainHeight","rem","remSize","clientHeight","removeChild","rem2px","menuHeight","headerHeight","SolidAppContext","scroll","innerHeight","toString","setDefaults","fullPage","mm","tab","overflow","adminMenu","leftMenu","siteMenu","orientation","leftMenuStyle","appString","getHTML","solidLogo","menuElement","menu","currentPodMenu","userMenu","amenu","umenu","loginBox","loginButtonArea","mungeLoginArea","authn","currentUser","checkUser","initAuth","loginStatusBox","loginButtons","authSession","onLogin","onLogout","onSessionRestore","createLoginBox","initialContent","getComponentHash","rem2vw","clientWidth","rem2vh","leftColumnColumnStyle","leftColumnColumnMenu","iframeSrc","iframeContent","logoStyle","titleStyle","appStye","mainStyle","theme","fillTemplate","Menu","nav","topUL","mainDisplay","renderMenuItem","position","sp","onmouseover","onmouseout","ul2","m","newItem","Modal","modal","current","openModal","action","closeModal","SelectorPanel","j","leftColumn","rightColumn","dataSource","firstOption","collectionsList","itemsList","Tabs","tabs","targetArea","undefined","marginRight","borderBottom","closeButton","BookmarkTree","containerElm","getElementsByClassName","component","bookmarksDisplay","loadUnlessLoaded","getTopic","click","containingElement","start","book","rdfs","topicTitle","createTextNode","toggle","subTopics","ul","t","bookmarks","bookmark","bookmarkTitle","isFeed","bookmarkLink","bookElement","d","base","containerSelector","contentArea","collectionSize","resourceSize","ldp","_host","files","resources","containers","_pathname","_findContentType","_isHidden","parent","splice","selector","newContainer","selectorElement","showPage","hostEl","fileNode","isa","addAttributes","computedSize","contenttype","draggable","getFloatComponent","getDraggableId","draggableDomElement","pos1","pos2","pos3","pos4","header","close","ds","getDraggableContent","headerStyle","onmousedown","clientX","clientY","onmouseup","onmousemove","offsetTop","left","offsetLeft","sparql","getOutliner","suic","pluginType","tagName","suicplugin","pFile","showFunction","outerContent","outerHTML","urlToLoad","contentSource","newJson","getDefaults","as","l","buttonListMenu","directDisplay","ds2","div2","divs","activateComponent","menuOfMenus","headerstyle","getButtonComponent","icon","componentButton","panel","contentWrapper","getValue","compo","runBuiltIn","makeMmodal","g","list","isFirst","getRdfsList","first","rest","hash","predicatePhrases","pred","args","DEBUG","setStyle","styles","templateStr","fillOneTemplateRow","newStuff","join","re","RegExp","results2table","results2modal","tabset","results2descriptionList","diff","diffMe","diffBy","fireEvent","evObj","createEvent","initEvent","dispatchEvent","elementType","className","pair","getComponentType","loadFromMemory","sentUri","eName","fragment","eDoc","uiString","innerText","mungedUri","valuesContain","nodes"],"sourceRoot":""}